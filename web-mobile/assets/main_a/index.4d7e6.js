window.__require=function e(t,n,i){function a(s,c){if(!n[s]){if(!t[s]){var l=s.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!c&&r)return r(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return a(t[s][1][e]||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({FakeNames:[function(e,t){"use strict";cc._RF.push(t,"c8a6fsPrvdD55JZoR1GwP85","FakeNames");var n=[];n.push({name:"\u7231\u60c5/\u662f\u6211\u4e22\u6389\u7684\u5783\u573e"}),n.push({name:"\u5bf9\u4f60\u771f\u5fc3\u7eaf\u5c5e\u6d6a\u8d39"}),n.push({name:"\u53ef\u4ee5\u54ed\u4f46\u51b3\u4e0d\u8ba4\u8f93i"}),n.push({name:"\u9738\u5200\u85d0\u89c6\u5929\u4e0b"}),n.push({name:"\u6ca1\u90a3\u8d44\u672c\u8ba9\u4f60\u6b7b\u5fc3\u8e0f\u5730"}),n.push({name:"\u4e16\u754c\u8fd9\u4e48\u4e71\u88c5\u7eaf\u7ed9\u8c01\u770b"}),n.push({name:"\u624b\u6301\u83dc\u5200\uff0c\u5979\u6301\u60c5\u64cd"}),n.push({name:"\u864e\u7626\u96c4\u5fc3\u5728"}),n.push({name:"\u5bb6\u4e11\u4eba\u7a77\u5fc3\u4e0d\u7f8e"}),n.push({name:"\u5e74\u5c11\u8f7b\u72c2\u4e0d\u61c2\u80dc\u8005\u4e3a\u738bi"}),n.push({name:"\u5144\u5f1f\u4e00\u8bcd,\u7ecf\u5f97\u8d77\u6d41\u5e74.\xa0"}),n.push({name:"\u5730\u7403\u56de\u8f6c\u4eba\u5fc3\u4f1a\u53d8"}),n.push({name:"\u6211\u60f3\u505a\u4e00\u4e2a\u574f\u5b69\u7eb8"}),n.push({name:"\u6210\u5168\u65b0\u7684\u5e78\u798f"}),n.push({name:"\u52b3\u8d44\u6ca1\u5fc3\uff0c\u600e\u4e48\u8bb0\u4f60"}),n.push({name:"Evening l\u5915\u60c5\u4e36"}),n.push({name:";\u9a9a\u5e74 ilovehi"}),n.push({name:"beautiful\xb0"}),n.push({name:"chillily"}),n.push({name:"\u4f60\u597d\u778ei"}),n.push({name:"\u7b49\u6211\u53d8\u5f97\u8db3\u591f\u597d"}),n.push({name:"\u5c0f\u60c5\u7eea Triste *"}),n.push({name:"\u3010Aperson\u3011"}),n.push({name:"\u79bb\u5c9b\u2551Bombastic"}),n.push({name:"\u602a\u76dc"}),n.push({name:"Emotional \u6614"}),n.push({name:"SAY GOODBYE"}),n.push({name:"forever\u4e3a\u4f60\u9501\u5fc3"}),n.push({name:"Explosion\u7206\u70b8"}),n.push({name:"Lonely\u5b64\u72ec\u8005"}),n.push({name:"\u65e0\u89c6\u4e0a\u8bfe\u94c3ing"}),n.push({name:"[\u8d85\u4eba]"}),n.push({name:"\u672c\u4eba\u667a\u5546\u5df2\u6b20\u8d39"}),n.push({name:"\u8fd8\u4f60\u7b11\u773c,"}),n.push({name:"\u5df4\u62c9\u62c9\u80fd\u91cf\u4ed6\u4f1a\u7231\u6211"}),n.push({name:"\u552f\u7f99\u3001\u843d\u5e55"}),n.push({name:"\u653e\u5f00\u90a3\u5c3c\u59d1"}),n.push({name:"\u6625\u98ce\u4e4d\u8d77"}),n.push({name:"\u8f7b\u886b\u8426\u4f4f"}),n.push({name:"\u641e\u7b11\u7a3d\u53cb"}),n.push({name:"\u76f8\u89c1\u6068\u665a"}),n.push({name:"\u840c\u795e"}),n.push({name:"YY"}),n.push({name:"\u9752\u6625\u5fae\u51c9"}),n.push({name:"[\u5355\u67aa\u5339\u9a6c@]"}),n.push({name:"\u5230\u6211\u8eab\u8fb9"}),n.push({name:"\u89c1\u4f60\u7231\u7b11"}),n.push({name:"\u59b9\u7eb8\u522b\u80f8\u6211"}),n.push({name:"\u7fd2\u6163\u4e86,"}),n.push({name:"\u9a91\u58eb\u5148\u68ee\u3001\u3001"}),n.push({name:"\u62e5\u4f60\u5165\u6000"}),n.push({name:"\u81f3\u5c11\u7231\u8fc7\uff01"}),n.push({name:"\u54d1\u5267\u771f\u52a8"}),n.push({name:"\u6b64\u5904\u7981\u6b62\u5927\u5c0f\u4fbfi"}),n.push({name:"\u8111\u6b8b\u9178\u83dc\u9762"}),n.push({name:"\u9f99\u5c11\u5973"}),n.push({name:"\u9694\u5cb8\u89c2\u706b"}),n.push({name:"\u5f00\u7740\u62d6\u62c9\u673a\u53bb\u79c1\u5954i"}),n.push({name:"\u6211\u6765\u5bfb\u4f60"}),n.push({name:"\u8fc7\u5206\u8981\u6c42"}),n.push({name:"[ \u56cd\u5f53\u7239\uff01]"}),n.push({name:"\u773c\u7ebf\u969c\u788d"}),n.push({name:"\u5976\u9999\u80d6\u6b21"}),n.push({name:"\u6d1b\u9633\u738b"}),n.push({name:"\u59b9\u7eb8\u522b\u80f8\u6211"}),n.push({name:"\u5434\u8bb0\u5efa\u6750"}),n.push({name:"\u4e60\u60ef\u5b64\u72ec"}),n.push({name:"\u51e0\u65f6\u5171\u821e"}),n.push({name:"\u6c64\u5305\u5305"}),n.push({name:"\u76ae\u5361\u4e18i"}),n.push({name:"\u54d1\u5267\u771f\u52a8"}),n.push({name:"\u3064\u59d0\u4f1a\u628a\u4f60\u8e29\u5728\u9ad8\u8ddf\u9ed1\u9774\u4e0b"}),n.push({name:"\u62e8\u5f00\u53d1\u68a2"}),n.push({name:"\u5356\u840c\u75c7"}),n.push({name:"\u4ec5\u6709\u4e00\u9897\u5fc3\uff0c\u53ea\u5b58\u4e00\u4e2a\u4f60"}),n.push({name:"\u60c5\u8bdd\u817b\u5fc3"}),n.push({name:"\u68a6\u5728\u6df1\u5df7"}),n.push({name:"\u591a\u8bf4\u65e0\u611f"}),n.push({name:"\u54ed\u4e0d\u4ee3\u8868\u8f6f\u5f31i"}),n.push({name:"\u4eba\u751f\u82e5\u53ea\u5982\u521d\u89c1"}),n.push({name:"\u5e7b\u7a7aDrems`"}),n.push({name:"\u592a\u5584\u826f\u662f\u79cd\u6162\u6027\u75be\u75c5"}),n.push({name:"\u6211\u662f\u6e38\u620f\u8d77\u7801\u4f60\u4f1a\u966a\u7740\u6211"}),n.push({name:"\u539f\u8c05\u6211\u662f\u9017\u6bd4\u4e0d\u662f\u840c\u6bd4i"}),n.push({name:"\u719f\u6089\u770b\u4e0d\u6e05"}),n.push({name:"\u613f\u4eca\u751f\u7ea6\u5b9a\u4ed6\u751f\u518d\u62e5\u62b1 -"}),n.push({name:"\u6c38\u5782\u4e0d\u673d\u7684\u526a\u5200\u624b@"}),n.push({name:"\u4e00\u89c1\u4f60\u5c31\u7b11i"}),n.push({name:"\u96be\u820di"}),n.push({name:"\u4f60\u542c\u5fc3\u53e3\u5728\u8bf4\u8c0e"}),n.push({name:"\u4f60\u603b\u662f\u62ff\u6211\u548c\u5979\u6bd4"}),n.push({name:"\u6df1\u6d77\u7399\u9e7f"}),n.push({name:"\u7ed9\u6211\u5b89\u7a33"}),n.push({name:"\u773c\u6cea\u84b8\u53d1\u90a3\u53c8\u4f55\u59a8@"}),n.push({name:"\u4ed6\u4f1a\u817b\uff0c\u6211\u4f55\u5fc5"}),n.push({name:"\u5e38\u76f8\u4f34@"}),n.push({name:"\u540d\u4e49\u788d\u4ebai"}),n.push({name:"\u4e0e\u65f6\u95f4\u4e3a\u654ci"}),n.push({name:"\u6211\u7684\u4e16\u754c\u4e0d\u5141\u8bb8\u4f60\u6d88\u5931"}),n.push({name:"\u6700\u6b87\u3005\u4e0d\u8fc7\u4eba\u5fc3"}),n.push({name:"\u5e9f\u65e7\u7535\u5668\uff0c\u4e8c\u624b\u65e7\u8f66\u6536\u8d2d"}),t.exports=n,cc._RF.pop()},{}],ani2:[function(e,t){"use strict";cc._RF.push(t,"46860BIPx1Jsq9F12NNj8Sz","ani2"),cc.Class({extends:cc.Component,properties:{circleN:cc.Node,lightN:cc.Node},start:function(){cc.tween(this.circleN).repeatForever(cc.tween().by(1,{angle:-60})).start(),cc.tween(this.lightN.parent).repeatForever(cc.tween().by(1,{angle:-20})).start(),this.lightList=[this.lightN];for(var e=0;e<10;++e){var t=cc.instantiate(this.lightN);t.parent=this.lightN.parent,t.scale=1*Math.random()+1,t.position=this.getPos(!0),this.lightList.push(t)}},update:function(e){for(var t in this.lightList){var n=this.lightList[t],i=n.position,a=200*e;if(i.mag()>a+50){var o=i.normalize();n.position=i.sub(o.mul(a))}else n.position=this.getPos()}},getPos:function(e){var t=600,n=Math.random()*Math.PI*2;return e&&(t=600*Math.random()),cc.v2(t*Math.cos(n),t*Math.sin(n))}}),cc._RF.pop()},{}],ani3:[function(e,t){"use strict";cc._RF.push(t,"9908ddp63JMT4sXSXkGz0Up","ani3"),cc.Class({extends:cc.Component,properties:{circleN:cc.Node,lightN:cc.Node},start:function(){this.lightList=[this.lightN];for(var e=0;e<4;++e){var t=cc.instantiate(this.lightN);t.parent=this.lightN.parent,t.scale=.4*Math.random()+.6,t.position=this.getPos(!0),t.speed=5*Math.random()+1,this.lightList.push(t)}},update:function(e){for(var t in this.lightList){var n=this.lightList[t],i=n.position;n.position=i.add(cc.v2(-30*e,-50*e).mul(n.speed)),(n.x<-this.node.width/2||n.y<-this.node.height/2)&&(n.position=this.getPos(),n.speed=5*Math.random()+1)}},getPos:function(e){var t=this.node.height/2+10,n=this.node.width*(Math.random()-.5)+100;return e&&(t=this.node.height*(Math.random()-.5)),cc.v2(n,t)}}),cc._RF.pop()},{}],assetShow:[function(e,t){"use strict";cc._RF.push(t,"55c08ZoUh1PTouFOqT7JrVd","assetShow"),cc.Class({extends:cc.Component,properties:{goldLab:cc.Label,diamondLab:cc.Label,physicalLab:cc.Label},start:function(){if(cc.Canvas.instance.node.height>1136){var e=(cc.Canvas.instance.node.height-1136)/2,t=this.node.getComponent(cc.Widget).top;this.node.getComponent(cc.Widget).top=t+Math.min(50,e)}},onEnable:function(){this.updateAsset(),cc.director.on(MyEnum.CustomEvent.AssetUpdate,this.updateAsset,this)},onDisable:function(){cc.director.off(MyEnum.CustomEvent.AssetUpdate,this.updateAsset,this)},updateAsset:function(){this.goldLab.string=playerInfo.Gold,this.diamondLab.string=playerInfo.Diamond,this.physicalLab&&(playerInfo.physicalIsUnchanged()?this.physicalLab.string="\u65e0\u9650":this.physicalLab.string=playerInfo.Physical+"/"+MyEnum.physicalMax)}}),cc._RF.pop()},{}],audioCtrl:[function(e,t){"use strict";cc._RF.push(t,"b0776jZhLRDqJ0PslV4E299","audioCtrl"),cc.Class({extends:cc.Component,properties:{btnClip:{default:null,type:cc.AudioClip},hcClip:{default:null,type:cc.AudioClip},coinClip:{default:null,type:cc.AudioClip},bgmClip:{default:null,type:cc.AudioClip},attack1Clip:{default:null,type:cc.AudioClip},winClip:{default:null,type:cc.AudioClip},failClip:{default:null,type:cc.AudioClip},xiuClip:{default:null,type:cc.AudioClip},attackClip:{default:null,type:cc.AudioClip},jitaClip:{default:null,type:cc.AudioClip}},onLoad:function(){var e=this,t=cc.Button.prototype._onTouchEnded;cc.Button.prototype._onTouchEnded=function(){this.interactable&&this.enabledInHierarchy&&(this._pressed&&e.playBtnClickedAudio(),t.apply(this,arguments))},cc.game.addPersistRootNode(this.node),Global.audioCtrl=this,this.timeMap={},console.log("audio ******************",this)},playBtnClickedAudio:function(){this.playEffect(this.btnClip)},playHCAudio:function(){this.playEffect(this.hcClip,!1,.6,50)},playCoinClip:function(){this.playEffect(this.coinClip)},playAttack1Clip:function(){this.playEffect(this.attack1Clip,!1,.6,500)},playAttackClip:function(){this.playEffect(this.attackClip,!1,.6,500)},playJitaClip:function(){this.playEffect(this.jitaClip,!1,.4,500)},playWinClip:function(){this.playEffect(this.winClip)},playFailClip:function(){this.playEffect(this.failClip)},playXiuClip:function(){this.playEffect(this.xiuClip,!1,1,200)},playWorldBgm:function(){this.musicId=cc.audioEngine.play(this.bgmClip,!0,.8)},stopWorldBgm:function(){this.musicId&&(cc.audioEngine.stop(this.musicId),this.musicId=null)},playEffect:function(e,t,n,i){if(void 0===n&&(n=1),void 0===i&&(i=0),i){var a=e.name,o=this.timeMap[a]||0,s=+new Date;if(s-o<i)return;this.timeMap[a]=s}cc.audioEngine.setEffectsVolume(n),cc.audioEngine.playEffect(e,t,n)}}),cc._RF.pop()},{}],basePage:[function(e,t){"use strict";cc._RF.push(t,"ec2daGcR65IuIZb1QjzEsY2","basePage"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},init:function(){},playExitAction:function(){}}),cc._RF.pop()},{}],basePanel:[function(e,t){"use strict";cc._RF.push(t,"146afRPtQNLMLw+Qb9Nison","basePanel"),cc.Class({extends:cc.Component,properties:{showBanner:!1},updateBanner:function(){},show:function(){},onClickedCloseBtn:function(){this.close()},close:function(){this.node.active=!1},onEnable:function(){this.oldBannerAdState=platformAdapter.bannerAdState,platformAdapter.updateBannerAdState(!1),this.showBanner&&platformAdapter.updateBannerAdState(!0);var e=(new Date).getTime();platformAdapter.interstTime||(platformAdapter.interstTime=e),console.log("nowTime",e,platformAdapter.interstTime,e-6e4>platformAdapter.interstTime),e-6e4>platformAdapter.interstTime&&(platformAdapter.interstTime=e,platformAdapter.startOfShowInterAd())},onDisable:function(){this.oldBannerAdState||platformAdapter.updateBannerAdState(!1)}}),cc._RF.pop()},{}],battleMeetingReward:[function(e,t){"use strict";cc._RF.push(t,"85d760IOI5MZKgNBvB4UyEo","battleMeetingReward"),cc.Class({extends:e("basePanel"),properties:{rewardLabs:{default:[],type:cc.Label},reward2Labs:{default:[],type:cc.Label}},start:function(){var e=playerInfo.getBattleMeetingData().rewardBaseCost,t=MyEnum.MeetingRewardRate;for(var n in this.rewardLabs)this.rewardLabs[n].string="x"+Math.floor(t[n].g*e);for(var i in this.reward2Labs)this.reward2Labs[i].string="x"+t[i].d}}),cc._RF.pop()},{basePanel:"basePanel"}],battleMeeting:[function(e,t){"use strict";cc._RF.push(t,"6dda6nbXbBHNayhU4s8GLAG","battleMeeting");var n=e("FakeNames");cc.Class({extends:e("basePanel"),properties:{itemN:cc.Node,scrollV:cc.ScrollView,bgSfs:{default:[],type:cc.SpriteFrame},rankLab:cc.Label,rewardLab:cc.Label,reward2Lab:cc.Label},start:function(){for(var e=this,t=playerInfo.getBattleMeetingData(),i=Utils.getDayNum(),a=[],o=0;o<n.length;++o)a.push(o);var s=function(){var e=Math.floor(a.length*Math.random()),t=a[e];return a[e]=a[a.length-1],a.length-=1,t};if(t.date&&t.date!=i&&t.rewardBaseCost){this.rewardLab.node.parent.active=!0;var c=t.rewardBaseCost,l=t.rank;if(l>25)this.rewardLab.node.parent.active=!1;else{var r=MyEnum.MeetingRewardRate[0];l>=16&&l<=25?r=MyEnum.MeetingRewardRate[3]:l>=6&&l<16?r=MyEnum.MeetingRewardRate[2]:l>=2&&l<6?r=MyEnum.MeetingRewardRate[1]:1==l&&(r=MyEnum.MeetingRewardRate[0]);var d=Math.floor(r.g*c);playerInfo.Gold+=d,playerInfo.Diamond+=r.d,this.rankLab.string="\u7b2c"+l+"\u540d\u5956\u52b1:",this.rewardLab.string=d,this.reward2Lab.string=r.d}}else this.rewardLab.node.parent.active=!1;if(t.date!=i){for(var h=Utils.getAvgLevel(),p=[],u=0;u<29;++u){for(var f=Math.floor(25*Math.random())+1,m=[],g=0,v=1.5*(30-u)+(30-u)*(30-u)/30+2*Math.random(),y=Math.floor(v/15*4+4),b=Math.max(Math.floor(v/15+h-2),1),C=0;C<4;++C){var S,I=void 0;if(3==C?I=y:y-=I=Math.floor(Math.random()*y/(4-C)*2),0!=I){S=Math.floor(b+.5*Math.random());var N=Config["student_"+(C+1)],w=N[S-1]||N[N.length-1];m.push({num:I,lv:S}),g+=this.getPower(w)*I}else m.push({num:0,lv:0})}var P={rank:u+1,nIndex:s(),hIndex:f,power:g,eList:m};p.push(P)}p.push({rank:30,nIndex:-1,hIndex:-1,power:"\u5f85\u5b9a"}),t={date:i,rank:30,roleList:p,rewardBaseCost:Utils.getAvgCost()},playerInfo.setBattleMeetingData(t)}this.battleMeetingData=t,this.itemList=this.itemList||[this.itemN];for(var E=function(n){e.scheduleOnce(function(){var i=e.itemList[n];i||((i=cc.instantiate(e.itemN)).parent=e.itemN.parent,e.itemList.push(i)),e.updateItem(i,t.roleList[n],t.rank),e.itemN.parent.getComponent(cc.Layout).updateLayout(),t.roleList[n].rank<=t.rank&&e.scrollV.scrollToOffset(cc.v2(0,e.scrollV.node.height/2-i.y),0)},.02*n)},M=0;M<30;++M)E(M)},updateItem:function(e,t,i){var a=cc.find("rankLab",e).getComponent(cc.Label),o=cc.find("nameLab",e).getComponent(cc.Label),s=cc.find("powerLab",e).getComponent(cc.Label),c=cc.find("ppLab",e).getComponent(cc.Label),l="\u6211";t.nIndex>=0&&(l=n[t.nIndex].name).length>6&&(l=l.substr(0,6)+"...");var r=i==t.rank;a.node.color=r?cc.Color.BLACK:cc.Color.BLACK.fromHEX("#F8E651"),o.node.color=r?cc.Color.WHITE:cc.Color.BLACK,s.node.color=r?cc.Color.WHITE:cc.Color.BLACK,c.node.color=r?cc.Color.WHITE:cc.Color.BLACK,a.string=t.rank,o.string=l,s.string=r?playerInfo.getValueByKey("max_power")||0:t.power,cc.find("bg",e).getComponent(cc.Sprite).spriteFrame=r?this.bgSfs[1]:this.bgSfs[0];var d=cc.find("btn",e).getComponent(cc.Button);d.node.active=t.rank<i,d.node.info=t,d.interactable=t.rank<this.battleMeetingData.rank&&Math.abs(t.rank-this.battleMeetingData.rank)<=3,Utils.loadBundle("main_a",function(n,i){var a="ImgGeneralHeads";t.hIndex>0&&(a="portrait"+t.hIndex),i.load("panel/matchPanel/head/"+a,cc.SpriteFrame,function(t,n){cc.isValid(e)&&(cc.find("head",e).getComponent(cc.Sprite).spriteFrame=n)})})},getPower:function(e){var t=(Number(e.atk)-Number(e.defense))*e.atk_speed/10*(e.crit*e.crit_num+100)/100,n=Number(e.hp)/10+Number(e.defense);return Math.floor(t+n)},onClickedBattleBtn:function(e){var t=e.target.info;console.log(t,"onClickedBattleBtn"),Global.gameType=MyEnum.GameType.Endless,Global.endlessConfig={info:t,stepNum:10,weight_list:"10,10,10,10"},Global.MatchInfo={oInfo:{sf:cc.find("head",e.target.parent).getComponent(cc.Sprite).spriteFrame,name:n[t.nIndex].name}},cc.director.loadScene("game")},onClickedRewardRuleBtn:function(){Global.mainCtrl.openBattleMeetingReward()},onClickedGetRewardBtn:function(){Utils.showHintText("normal","\u94bb\u77f3+"+this.reward2Lab.string+" \u91d1\u5e01+"+this.rewardLab.string),this.rewardLab.node.parent.active=!1}}),cc._RF.pop()},{FakeNames:"FakeNames",basePanel:"basePanel"}],battlePage:[function(e,t){"use strict";cc._RF.push(t,"919a5PYyHdDeoo2MLJAkxpb","battlePage"),cc.Class({extends:e("basePage"),properties:{matchBtnN:cc.Node,tipLab:cc.Label,missionLab:cc.Label,bossIconN:cc.Node,mores:{default:[],type:cc.Node},signRedPoint:cc.Node,guajiRedPoint:cc.Node,onlineRedPoint:cc.Node,physicalIconN:cc.Node,startBtnN:cc.Node,onlineTimeLab:cc.Label,hides:[cc.Node],followBtn:cc.Node},start:function(){var e=Utils.getMissionInfo(playerInfo.MissionID);if(!DebugConfig.isDebug()&&playerInfo.MissionID<2)for(var t in this.hides)this.hides[t].active=!1;for(var n in this.missionLab.string="\u7b2c"+playerInfo.MissionID+"\u5173",this.bossIconN.active=!(null==e||!e.size_list),this.tipLab.node.parent.active=!1,this.mores)this.mores[n].active=!1;this.updateRedPoint(),this.followBtn.active=platformAdapter.isDouYin()},update:function(){var e=playerInfo.getOnlineData(),t=!0,n=!1,i=0;for(var a in MyEnum.OnlineConfig){var o=MyEnum.OnlineConfig[a];if(!(e.cur>a)){if(o.time<=e.time){n=!0;break}t=!1,i=o.time;break}}n?(this.onlineTimeLab.string="\u53ef\u9886\u53d6",this.onlineRedPoint.active=!0):t?(this.onlineTimeLab.string="\u660e\u5929\u518d\u6765",this.onlineRedPoint.active=!1):(this.onlineTimeLab.string=Utils.getFormatTime(i-e.time,!0),this.onlineRedPoint.active=!1)},updateRedPoint:function(){this.signRedPoint.active=playerInfo.getIsCanSign();var e=+new Date,t=Math.min((e-playerInfo.GuajiStartTime)/1e3/60,480);this.guajiRedPoint.active=t>=60},playPhysicalAction:function(e){var t=cc.instantiate(this.physicalIconN);t.parent=this.physicalIconN.parent;var n=t.position,i=t.parent.convertToNodeSpaceAR(this.startBtnN.convertToWorldSpaceAR(cc.Vec2.ZERO)),a=cc.v2(n.x-200,n.y);cc.tween(t).bezierTo(.5,a,a,i).call(function(){t.destroy(),e&&e()}).start()},_onClickedStartBtn:function(){Utils.getMissionInfo(playerInfo.MissionID)?playerInfo.expendPhysical(MyEnum.physicalCost)?(Global.openMask(),this.playPhysicalAction(function(){platformAdapter.sendMissionStartEvent({stageId:Number(playerInfo.MissionID),stageName:"\u7b2c"+playerInfo.MissionID+"\u5173",userId:platformAdapter.openId}),Global.closeMask(),platformAdapter.aldSendEvent("_onClickedStartBtn",{desc:"\u6309\u94ae\u70b9\u51fb_\u4e3b\u754c\u9762_\u5f00\u59cb\u6e38\u620f",missionId:playerInfo.MissionID}),Utils.emitGuideEvent(MyEnum.GuideEvents.ClickedStartGame),Global.gameType=MyEnum.GameType.Normal,Utils.switchScene("game")}),playerInfo.physicalIsUnchanged()||Utils.showHintText("physicalSub",MyEnum.physicalCost)):Global.mainCtrl.openTiliPanel():Utils.showHintText("mission_none")},onClickedStartBtn:function(){this._onClickedStartBtn(),Global.mainCtrl.handAni.node.active=!1,cc.Tween.stopAllByTarget(Global.mainCtrl.handAni.node)},onClickedEndlessBtn:function(){Utils.switchScene("endlessnew")},onClickedMatchBtn:function(){Global.isHideTip=!0,this.tipLab.node.parent.active=!1,Global.mainCtrl.openMatchPanel(),platformAdapter.aldSendEvent("onClickedMatchBtn",{desc:"\u6309\u94ae\u70b9\u51fb_\u4e3b\u754c\u9762_\u5339\u914d",missionId:playerInfo.MissionID})},onClickedBonusBtn:function(){},onClickedEggBtn:function(){Global.mainCtrl.openColoredEggsPanel()},onClickedTestPaperBtn:function(e){Global.mainCtrl.openTestPaperPanel(null,function(){e.target.active=!1,Global.hideTestPaperBtn=!0,platformAdapter.aldSendEvent("onClickedTestPaperBtn",{desc:"\u6309\u94ae\u70b9\u51fb_\u4e3b\u754c\u9762_\u8003\u8bd5",missionId:playerInfo.MissionID})})},onClickedTurntableBtn:function(){Global.mainCtrl.openTurntablePanel(null,function(){})},onClickedGuajiBtn:function(){Global.mainCtrl.openGuajiPanel()},onClickedSignBtn:function(){Global.mainCtrl.openSignPanel(null)},onClickedOnlineBtn:function(){Global.mainCtrl.openOnlinePanel(null)},onClickedTiLiBtn:function(){Global.mainCtrl.openTiliPanel()},onClickedFollowBtn:function(){Global.mainCtrl.openFollowPanel()}}),cc._RF.pop()},{basePage:"basePage"}],bonusPanel:[function(e,t){"use strict";cc._RF.push(t,"1f085L8clhKWoYBT07W05gg","bonusPanel"),cc.Class({extends:e("basePanel"),properties:{iconSp:cc.Sprite,descLab:cc.Label,desc1Lab:cc.Label,titleLab:cc.Label,btnLab:cc.Label},show:function(e,t){var n=this;this.genieIndex=e.genieIndex;var i=Config.genius[this.genieIndex];this.descLab.string=i.name,this.desc1Lab.string=i.desc.format(i.value),this.useCB=e.useCB,this.success=t,e.sf?this.iconSp.spriteFrame=e.sf:Utils.loadBundle("main_a",function(e,t){t.load("book/eggColor"+i.iccon,cc.SpriteFrame,function(e,t){n.iconSp.spriteFrame=t})}),this.titleLab.string=e.title||"\u5e78\u8fd0\u5f69\u86cb",platformAdapter.aldSendEvent("showBonus"+i.name,{desc:"\u5f69\u86cb\u5c55\u793a_"+i.name,1:1})},changeAllNodeState:function(e,t){for(var n in e.children){var i=e.children[n];"icon"!=i.name&&(i.active=t)}},onClickedUseBtn:function(){var e=Config.genius[this.genieIndex];platformAdapter.aldSendEvent("useBonus"+e.name,{desc:"\u5f69\u86cb\u4f7f\u7528_"+e.name,1:1}),platformAdapter.aldSendEvent("videoBonus",{desc:"\u89c6\u9891\u70b9_\u5f69\u86cb"+e.name,name:e.name}),console.log("unlockGenius",this.genieIndex),playerInfo.unlockGenius(this.genieIndex),Utils.showHintText("normal",this.desc1Lab.string),this.useCB&&this.useCB(),this.success&&this.success(),this.close()}}),cc._RF.pop()},{basePanel:"basePanel"}],bonus:[function(e,t){"use strict";cc._RF.push(t,"0694a4OamFHUrI7TD2z6s+r","bonus");var n=cc.Enum({"\u6218\u58eb":1,"\u5c04\u624b":2,"\u8089\u76fe":4,"\u6cd5\u5e08":8,"\u5168\u4f53":15});cc.Class({extends:cc.Component,properties:{bonusType:{default:n["\u6218\u58eb"],type:n},isRandom:!1},start:function(){if(this.isRandom){var e=Math.floor(5*Math.random());0==e?this.bonusType=n["\u6218\u58eb"]:1==e?this.bonusType=n["\u5c04\u624b"]:2==e?this.bonusType=n["\u8089\u76fe"]:3==e?this.bonusType=n["\u6cd5\u5e08"]:4==e&&(this.bonusType=n["\u5168\u4f53"])}this.genieIndex=this.getGenieIndex(),this.updateState(),cc.tween(this.node).delay(.2*Math.random()).repeatForever(cc.tween().repeat(1,cc.tween().by(.5,{angle:-4}).by(1,{angle:8}).by(.5,{angle:-4})).repeat(2,cc.tween().by(.2,{y:20}).by(.2,{y:-20})).delay(.6+.5*Math.random())).start()},getGenieIndex:function(){var e=this,t=[];for(var n in Config.genius){var i=Config.genius[n],a=Number(n);Number(i.e_id)==this.bonusType&&(playerInfo.geniusIsUnlock(a)||t.push(a))}if(t.length>0){var o=t[Math.floor(Math.random()*t.length)];console.log("index",o,t,"vvvvvvvvvaaa");var s=Config.genius[o];return Utils.loadBundle("main_a",function(t,n){n.load("book/eggColor"+s.iccon,cc.SpriteFrame,function(t,n){e.getComponent(cc.Sprite).spriteFrame=n})}),o}return-1},getBasePage:function(){for(var e=this.node;e;){var t=e.getComponent("basePage");if(t)return t;e=e.parent}return null},updateState:function(){var e=platformAdapter.getCurDateStoreDate("bonusData")||{};console.log("bonusbonus updateState",e),this.genieIndex<0||e[this.genieIndex]?this.node.active=!1:this.node.active=!0},getId:function(){return this.bonusType},onUsed:function(){var e=platformAdapter.getCurDateStoreDate("bonusData")||{};e[this.genieIndex]=!0,platformAdapter.setCurDateStoreDate("bonusData",e),this.node.active=!1},onClickedBtn:function(e){cc.isValid(Global.mainCtrl)?Global.mainCtrl.openBonusPanel({id:this.getId(),sf:this.getComponent(cc.Sprite).spriteFrame,genieIndex:this.genieIndex,useCB:this.onUsed.bind(this),pos:e.target.convertToWorldSpaceAR(cc.Vec2.ZERO)}):Global.gameCtrl.openBonusPanel({id:this.getId(),sf:this.getComponent(cc.Sprite).spriteFrame,genieIndex:this.genieIndex,useCB:this.onUsed.bind(this),pos:e.target.convertToWorldSpaceAR(cc.Vec2.ZERO)})}}),cc._RF.pop()},{}],bossChallenge:[function(e,t){"use strict";cc._RF.push(t,"3cf07P+oKVJ4bDhLQzcj6Qn","bossChallenge");var n=cc.Enum({b1:1,b2:2,b3:3,b4:4});cc.Class({extends:cc.Component,properties:{bossType:{default:n.b1,type:n},iconSp:cc.Sprite},start:function(){2==this.bossType?cc.tween(this.iconSp.node).repeatForever(cc.tween().by(.5,{y:5}).by(.5,{y:-5})).start():cc.tween(this.iconSp.node).repeatForever(cc.tween().by(.5,{scale:.02}).by(.5,{scale:-.02})).start()},onEnable:function(){var e=this.getDataByType(this.bossType),t=Config.mission_boss[this.bossType],n=null;for(var i in t){var a=t[i];if(Number(a.level)==e.lv){n=a;break}}n?this.missionConfig=n:this.node.active=!1},getDataByType:function(e){return(playerInfo.getValueByKey("bossChallengeData")||[])[e]||{lv:1}},onClickedBtn:function(){Global.mainCtrl.openBossPanel({missionConfig:this.missionConfig,sf:this.iconSp.spriteFrame,bossType:this.bossType})}}),cc._RF.pop()},{}],bossPanel:[function(e,t){"use strict";cc._RF.push(t,"bd19fMAqYRMo4KWdj8jtYHj","bossPanel"),cc.Class({extends:e("basePanel"),properties:{iconSp:cc.Sprite,descLab:cc.Label,desc1Lab:cc.Label,titleLab:cc.Label,startN:cc.Node,sStartN:cc.Node,foreverTimesLab:cc.Label,missionLimitLab:cc.Label},start:function(){},show:function(e){this.missionConfig=e.missionConfig;var t=Config.mission_boss[e.bossType].length;this.descLab.string="\u7b2c"+this.missionConfig.level+"/"+t+"\u5c42",console.log("missionConfig **",this.missionConfig),cc.Tween.stopAllByTarget(this.iconSp.node),this.iconSp.node.y=42.271,this.iconSp.node.x=0,2==e.bossType?(this.iconSp.node.x=50,this.iconSp.node.y=100,cc.tween(this.iconSp.node).repeatForever(cc.tween().by(.5,{y:15}).by(.5,{y:-15})).start()):(console.log("**************",this.iconSp.node),cc.tween(this.iconSp.node).repeatForever(cc.tween().by(.5,{scale:.05}).by(.5,{scale:-.05})).start()),this.iconSp.spriteFrame=e.sf,this.missionLimitLab.string="\u5efa\u8bae\uff1a\u5148\u901a\u8fc7"+this.missionConfig.missionid+"\u5173",platformAdapter.aldSendEvent("openBossPanel",{desc:"Boss\u754c\u9762_\u6253\u5f00\u754c\u9762",type:e.bossType}),this.updateBtnState()},updateBtnState:function(){if(playerInfo.getValueByKey("watched_boss")){var e=playerInfo.getValueByKey("bossAdTimes")||0;e<3?(this.foreverTimesLab.node.parent.parent.active=!0,this.startN.active=!1,this.sStartN.active=!0,this.foreverTimesLab.string="("+e+"/3)"):(this.startN.active=!0,this.foreverTimesLab.node.parent.parent.active=!1,this.sStartN.active=!1)}else this.foreverTimesLab.node.parent.parent.active=!1,this.startN.active=!1,this.sStartN.active=!0},onClickedNoAdUseBtn:function(){Global.gameType=MyEnum.GameType.Boss,Global.missionConfig=this.missionConfig,this.close();var e=this.missionConfig.type+"_"+this.missionConfig.level;platformAdapter.aldSendEvent("BossStart",{desc:"Boss\u754c\u9762_\u5f00\u59cb\u6311\u6218",key:e}),Utils.switchScene("game")},onClickedUseBtn:function(){playerInfo.setValueByKey("watched_boss",!0),this.onClickedNoAdUseBtn();var e=this.missionConfig.type+"_"+this.missionConfig.level;platformAdapter.aldSendEvent("bossVideo",{desc:"\u89c6\u9891\u70b9_boss"+this.missionConfig.type,key:e})},onClickedLockBtn:function(){var e=playerInfo.getValueByKey("bossAdTimes")||0;e++,playerInfo.setValueByKey("bossAdTimes",e),platformAdapter.aldSendEvent("bossLockVideo",{desc:"\u89c6\u9891\u70b9_\u6c38\u4e45\u89e3\u9501",times:e}),this.updateBtnState()}}),cc._RF.pop()},{basePanel:"basePanel"}],boxPanel:[function(e,t){"use strict";cc._RF.push(t,"36454lSXs9IfbyIUMoouwrV","boxPanel"),cc.Class({extends:e("basePanel"),properties:{items:[cc.Node]},start:function(){},show:function(e){for(var t=Math.max(e.length,this.items.length),n=0;n<t;++n){var i=e[n],a=this.items[n];if(console.log("info ***",i,a),i){a.active=!0,console.log(i,a,"000000000"),Utils.getAssetSf(i.type,cc.find("icon",a).getComponent(cc.Sprite));var o=cc.find("name",a),s=cc.find("icon2",a).getComponent("heroShow");i.type==MyEnum.ObjectType.Chip?(cc.find("icon",a).active=!1,s.node.active=!0,s.setId(i.id,function(){}),o.active=!0,o.getComponent(cc.Label).string=Config.skin[i.id-1].name+"\u788e\u7247"):(cc.find("icon",a).active=!0,s.node.active=!1,o.active=!1),cc.find("num",a).getComponent(cc.Label).string="x"+i.num}else a.active=!1}},onDisable:function(){this._super(),cc.director.emit(MyEnum.CustomEvent.AssetUpdate)}}),cc._RF.pop()},{basePanel:"basePanel"}],chaojikaijuPanel:[function(e,t){"use strict";cc._RF.push(t,"c9899tDmQhLuIf9MJTVp6Zt","chaojikaijuPanel"),cc.Class({extends:e("basePanel"),properties:{},show:function(e){this.cb=e,platformAdapter.aldSendEvent("openChaojikaiju",{desc:"\u8d85\u7ea7\u5f00\u5c40\u754c\u9762_\u5c55\u793a"})},onClickedGetBuffBtn:function(){playerInfo.addTempAttr({att_type:"clean_num",value:5}),playerInfo.addTempAttr({e_id:15,att_type:"p_atk",value:30}),playerInfo.addTempAttr({e_id:15,att_type:"p_defense",value:30}),playerInfo.addTempAttr({e_id:15,att_type:"p_hp",value:30}),playerInfo.addTempAttr({e_id:15,att_type:"crit",value:20}),playerInfo.addTempAttr({e_id:15,att_type:"p_atk_speed",value:20}),console.log("onClickedGetBuffBtn",playerInfo.tempAttr),platformAdapter.sendMissionStartEvent({stageId:Number(playerInfo.MissionID),stageName:"\u7b2c"+playerInfo.MissionID+"\u5173",userId:platformAdapter.openId}),platformAdapter.aldSendEvent("chaojikaijuStartClick",{desc:"\u6309\u94ae\u70b9\u51fb_\u8d85\u7ea7\u5f00\u5c40\u754c\u9762_\u5f00\u59cb\u6e38\u620f",missionId:playerInfo.MissionID}),Global.gameType=MyEnum.GameType.Normal,platformAdapter.aldSendEvent("getBuffChaojikaiju",{desc:"\u8d85\u7ea7\u5f00\u5c40\u754c\u9762_\u83b7\u53d6BUFF"}),Utils.switchScene("game")},onClickedCancelBtn:function(){var e;this.node.active=!1,null==(e=this.cb)||e.call(this)}}),cc._RF.pop()},{basePanel:"basePanel"}],chapters:[function(e,t){"use strict";cc._RF.push(t,"3de58iS61pJ1LNX3L2yPSyu","chapters"),cc.Class({extends:cc.Component,properties:{layout:cc.Layout,cItemN:cc.Node,mItemN:cc.Node,scrollView:cc.ScrollView},start:function(){var e=[];for(var t in Config.mission){var n=Config.mission[t];1==n.level&&e.push(n)}this.init(e)},init:function(e){this.cItemN.active=!1,this.mItemN.active=!1,this.chapters=[],this.missions=[this.mItemN];for(var t=0;t<e.length;++t){var n=null;0==t?n=this.cItemN:(n=cc.instantiate(this.cItemN)).parent=this.cItemN.parent,n.active=!0,n.index=t,cc.find("Background/Label",n).getComponent(cc.Label).string="\u7b2c"+(t+1)+"\u7ae0",this.chapters.push(n)}},selectChapter:function(e){this.curChapter=Number(e);var t=[];for(var n in Config.mission){var i=Config.mission[n];i.mission==this.curChapter+1&&t.push(i)}for(var a=Math.max(t.length,this.missions.length),o=0;o<a;++o){var s=this.missions[o];if(s||((s=cc.instantiate(this.mItemN)).parent=this.mItemN.parent,this.missions.push(s)),o>=t.length)s.active=!1;else{s.active=!0;for(var c=this.curChapter+o+1,l=o+1;l<this.missions.length;++l)this.missions[l].getSiblingIndex()<=c&&c++;s.setSiblingIndex(c),s.index=o,cc.find("Background/Label",s).getComponent(cc.Label).string=this.curChapter+1+"-"+(o+1)}}this.chapters[this.curChapter],this.layout.updateLayout()},onClickedChapterBtn:function(e){var t=e.target.index;this.curChapter!=t&&this.selectChapter(t)},onClickedMissionBtn:function(e){e.target.index}}),cc._RF.pop()},{}],coloredEggsPanel:[function(e,t){"use strict";cc._RF.push(t,"8d0d3X+iJJMX6dQc+rx5P7O","coloredEggsPanel"),cc.Class({extends:e("basePanel"),properties:{item:cc.Node},onLoad:function(){var e=this;this.showNodeList=[],this.data=Config.genius,this.init(),cc.director.on("bonusUpdate",function(t){e.updateShowUi(Number(t.id))})},onDestroy:function(){cc.director.off("bonusUpdate")},start:function(){},init:function(){for(var e=this,t=function(t){var n=void 0,i=e.data[t];0==t?n=e.item:(n=cc.instantiate(e.item)).parent=e.item.parent,e.showNodeList[t]=n;var a=playerInfo.geniusIsUnlock(t);Utils.loadBundle("main_a",function(t,a){a.load("book/eggColor"+i.iccon,cc.SpriteFrame,function(t,i){if(e&&cc.isValid(n)){n.getChildByName("own").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=i;var a=100/i._rect.width,o=120/i._rect.height,s=a<o?a:o;n.getChildByName("own").getChildByName("icon").width=s*i._rect.width,n.getChildByName("own").getChildByName("icon").height=s*i._rect.height}})}),n.getChildByName("own").active=a,n.getChildByName("lock").active=!a,n.getChildByName("own").getChildByName("name").getComponent(cc.Label).string=i.name,n.getChildByName("lock").getChildByName("name").getComponent(cc.Label).string=i.name,n.getChildByName("own").getChildByName("desc").getComponent(cc.Label).string=i.desc.format(i.value)},n=0;n<this.data.length;n++)t(n);this.randomEggAction()},updateShowUi:function(e){var t=this.data[e],n=this.showNodeList[e],i=playerInfo.geniusIsUnlock(e);n.getChildByName("own").active=i,n.getChildByName("lock").active=!i,n.getChildByName("own").getChildByName("name").getComponent(cc.Label).string=t.name,n.getChildByName("lock").getChildByName("name").getComponent(cc.Label).string=t.name},randomEggAction:function(){for(var e=this,t=Math.floor(2*Math.random())+3,n=[];n.length<t;){for(var i=Math.floor(Math.random()*this.showNodeList.length),a=!0,o=0;o<n.length;o++)i==n[o]&&(a=!1);a&&n.push(i)}for(var s=!0,c=0;c<n.length;c++){var l=this.showNodeList[n[c]];if(l){var r=l.getComponent(cc.Animation);r&&(r.play("normal"),s&&(s=!1,r.once(cc.Animation.EventType.FINISHED,function(){e.scheduleOnce(function(){e.randomEggAction()},1)})))}}}}),cc._RF.pop()},{basePanel:"basePanel"}],equipInfo:[function(e,t){"use strict";cc._RF.push(t,"4bc66qI3MBFA6TAOP+NfWqR","equipInfo");var n=function(){this.isUse=!1,this.instanceId=0,this.id=0,this.level=0,this.chipNum=0,this.eId=0,this.ePos=0};n.prototype.setInfo=function(){},t.exports=n,cc._RF.pop()},{}],followPanel:[function(e,t){"use strict";cc._RF.push(t,"919d6paGoNCvZcXKQvlEwX5","followPanel"),cc.Class({extends:e("basePanel"),properties:{followBtn:cc.Node,getBtn:cc.Node,icon:cc.Node,equipIcon:cc.Node,items:[cc.Node]},onEnable:function(){!playerInfo.getValueByKey("follow")||playerInfo.getValueByKey("followReward")?(this.followBtn.active=!0,this.getBtn.active=!1):(this.followBtn.active=!1,this.getBtn.active=!0)},openAwemeUserProfile:function(){var e=this;playerInfo.setValueByKey("follow",!0),platformAdapter.openAwemeUserProfile(),setTimeout(function(){e.onEnable()},500)},onGetReward:function(){this.getGoldOrDiamond(),playerInfo.setValueByKey("followReward",!0),this.onClickedCloseBtn()},getGoldOrDiamond:function(){this.coinAction(this.icon.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){playerInfo.Gold+=1888,Utils.showHintText("coin_2",1888)},cc.find("Canvas/asset/gold/iconGold"))},coinAction:function(e,t,n,i,a){for(var o=e,s=a.convertToWorldSpaceAR(cc.Vec2.ZERO),c=Math.random()*Math.PI-3*Math.PI/4,l=2*Math.PI/t,r=function(e){var r=cc.instantiate(a);r.parent=cc.director.getScene(),r.position=o;var d=c+l*e,h=50*Math.random()+50,p=cc.v2(Math.cos(d),Math.sin(d)).mul(h),u=p.add(o),f=p.mul(2).add(o);r.runAction(cc.sequence(cc.moveTo(.15,u).easing(cc.easeSineOut()),cc.bezierTo(.2+.05*e,[u,f,s]).easing(cc.easeInOut(1)),cc.callFunc(function(){a.stopAllActions(),a.runAction(cc.sequence(cc.scaleTo(.05,1.4),cc.scaleTo(.1,1))),r.destroy(),Utils.invokeCallback(n),e==t-1&&Utils.invokeCallback(i)})))},d=0;d<t;++d)r(d)}}),cc._RF.pop()},{basePanel:"basePanel"}],geniusPage_old:[function(e,t){"use strict";cc._RF.push(t,"6098adAZHpOsrM5Sw4L2yEo","geniusPage_old");var n=e("../../../load/common/GroupWait");cc.Class({extends:e("basePage"),properties:{showPanelN:cc.Node,toggleN:cc.Node,lineN:cc.Node,titleLab:cc.Label,iconSfs:{default:[],type:cc.SpriteFrame}},start:function(){this.selectMaxIndex()},init:function(){platformAdapter.aldSendEvent("openGeniusPage",{desc:"\u6253\u5f00\u5929\u8d4b\u754c\u9762"})},initUI:function(e){var t,n,i=this;this.tList=null!=(t=this.tList)?t:[this.toggleN],this.lList=null!=(n=this.lList)?n:[this.lineN];var a=[[[-226.788,-68,-1],[-138.128,64,1],[21.893,47,1],[121.895,-83,-1],[211.636,63,1]],[[-226.788,-68,-1],[-138.128,64,1],[21.893,47,1],[121.895,-83,-1],[211.636,63,1]],[[-226.788,-68,-1],[-138.128,64,1],[21.893,47,1],[121.895,-83,-1],[211.636,63,1]]],o=a[e]||a[0],s=Config.genius[e],c=s.length,l=function(e,t){console.log("createPos",e);var n=Math.floor(e/2),a=i.tList[n];a||((a=cc.instantiate(i.toggleN)).parent=i.toggleN.parent,i.tList.push(a)),a.active=!0,a.position=cc.v2(o[n][0],o[n][1]),a.index=n;var l=s[n],r=cc.find("Background",a).getComponent(cc.Sprite),d=playerInfo.getGLevel(i.selectType,n);a.unlock=!0,console.log(e,i.selectType,n,d,"lllllllllll",playerInfo.assetInfo.gLevels),r.spriteFrame=0==d?n<c-1?i.iconSfs[0]:i.iconSfs[2]:n<c-1?i.iconSfs[1]:i.iconSfs[3];var h=cc.find("descLabel",a).getComponent(cc.Label);h.node.y=(n<c-1?42:52)*o[n][2],h.string=l.desc.format(l.value),1==l.e_id?h.node.color=cc.Color.WHITE.fromHEX("#E54848"):2==l.e_id?h.node.color=cc.Color.WHITE.fromHEX("#2C7BFF"):4==l.e_id?h.node.color=cc.Color.WHITE.fromHEX("#F8D869"):8==l.e_id?h.node.color=cc.Color.WHITE.fromHEX("#C240F2"):h.node.color=cc.Color.WHITE.fromHEX("#C1C1C1");var p=cc.find("checkmark",a);n!=i.selectIndex?(p.active=!1,cc.Tween.stopAllByTarget(p)):(p.active=!0,p.getComponent(cc.Sprite).spriteFrame=e<4?i.iconSfs[4]:i.iconSfs[5],cc.tween(p).repeatForever(cc.tween().to(1,{scale:1.1,opacity:180}).to(1,{scale:1,opacity:255})).start()),t&&t()},r=function(t,n){var a=Math.floor(t/2),s=i.lList[a];s||((s=cc.instantiate(i.lineN)).parent=i.lineN.parent,s.zIndex=-1,i.lList.push(s)),s.active=!0;var c=cc.v2(o[a][0],o[a][1]),l=cc.v2(o[a+1][0],o[a+1][1]);s.angle=180*cc.Vec2.RIGHT.signAngle(cc.v2(l.sub(c)))/Math.PI;var r=playerInfo.getGLevel(e,a);s.getComponent(cc.Sprite).spriteFrame=0==r?i.iconSfs[6]:i.iconSfs[7];var d=.6*l.sub(c).mag();0!=r&&(d+=40);var h=c.sub(l).normalize().mul(d/2);s.position=c.add(l).mul(.5).add(h),cc.tween(s).set({width:0}).to(.1,{width:d}).call(function(){n&&n()}).start()};cc.find("shareVideoBtn",this.showPanelN).active=!1,function e(t,n,i){t>=n?i&&i():t%2==0?l(t,function(){e(t+1,n,i)}):r(t,function(){e(t+1,n,i)})}(0,9,function(){i.updateShowPanel()}),this.createPos=l,this.createLine=r},updateType:function(e){this.initUI(e)},updateShowPanel:function(){var e=this.selectIndex;for(var t in this.tList){var n=this.tList[t],i=cc.find("checkmark",n);t!=this.selectIndex?(i.active=!1,cc.Tween.stopAllByTarget(i)):(i.active=!0,i.getComponent(cc.Sprite).spriteFrame=e<4?this.iconSfs[4]:this.iconSfs[5],cc.tween(i).repeatForever(cc.tween().to(1,{scale:1.1,opacity:180}).to(1,{scale:1,opacity:255})).start())}Config.genius[this.selectType][this.selectIndex];var a=playerInfo.getGLevel(this.selectType,this.selectIndex);cc.find("shareVideoBtn",this.showPanelN).active=!(a>=1)},getMaxIndexAndType:function(){var e=0,t=0,n=!1;for(e=0;e<4;++e){console.log("Config['genius']",Config.genius,e);var i=Config.genius[e]||[],a=!1;for(t=0;t<i.length;++t)if(playerInfo.getGLevel(e,t)<=0){a=!0;break}if(a)break}return e>=4&&(e=3,t=4,n=!0),{type:e,index:t,isEnd:n}},selectMaxIndex:function(){var e=this.getMaxIndexAndType();this.selectType=e.type,this.selectIndex=e.index,this.titleLab.string="\u9636\u6bb5"+Utils.getBigNum(Number(this.selectType)+1),this.initUI(this.selectType)},onClickedLevelUpBtn:function(){var e=this,t=Config.genius[this.selectType][this.selectIndex];console.log("info.cost",t.cost,playerInfo.Diamond,"diamond"),Utils.showHintText("levelup_success"),platformAdapter.aldSendEvent("levelup_success",{desc:"\u517b\u6210_\u5929\u8d4b\u5347\u7ea7",key:this.selectType+"_"+this.selectIndex,missionId:playerInfo.MissionID}),playerInfo.addGLevel(this.selectType,this.selectIndex);var i=this.getMaxIndexAndType();i.type==this.selectType?(this.selectType=i.type,this.selectIndex=i.index,i.isEnd?this.createPos(2*this.selectIndex,function(){e.updateShowPanel()}):this.createPos(2*this.selectIndex-2,function(){e.createLine(2*e.selectIndex-2,function(){e.createPos(2*e.selectIndex,function(){e.updateShowPanel()})})})):(cc.find("shareVideoBtn",this.showPanelN).active=!1,this.createPos(2*this.selectIndex,function(){e.updateShowPanel();var t=new n(function(){e.selectMaxIndex()},1),i=function(n){var i=e.tList[n];t.wait(),cc.tween(i).delay(.2*n).to(.2,{scale:1.2}).to(.4,{scale:1.3,opacity:0}).call(function(){i.scale=1,i.opacity=255,i.active=!1,t.done()}).start()};for(var a in e.tList)i(a);var o=function(n){var i=e.lList[n];t.wait(),cc.tween(i).delay(.1*n+.1).to(.4,{opacity:0}).call(function(){i.scale=1,i.opacity=255,i.active=!1,t.done()}).start()};for(var s in e.lList)o(s);t.done()}))}}),cc._RF.pop()},{"../../../load/common/GroupWait":void 0,basePage:"basePage"}],geniusPage:[function(e,t){"use strict";cc._RF.push(t,"c1df96goA1Bc4NVCqycs1r2","geniusPage"),cc.Class({extends:e("basePage"),properties:{labList:{default:[],type:cc.Label},endlessLevel:cc.Label},start:function(){this.labList[0].node.active=playerInfo.MissionID<=MyEnum.OtherPlay.Match.unlock,this.labList[1].node.active=playerInfo.MissionID<=MyEnum.OtherPlay.Endless.unlock,this.labList[2].node.active=playerInfo.MissionID<=MyEnum.OtherPlay.Meeting.unlock,this.labList[0].string="\u901a\u8fc7\u7b2c"+MyEnum.OtherPlay.Match.unlock+"\u5173\u89e3\u9501",this.labList[1].string="\u901a\u8fc7\u7b2c"+MyEnum.OtherPlay.Endless.unlock+"\u5173\u89e3\u9501",this.labList[2].string="\u901a\u8fc7\u7b2c"+MyEnum.OtherPlay.Meeting.unlock+"\u5173\u89e3\u9501",this.endlessLevel.node.active=!this.labList[1].node.active,this.endlessLevel.string="\u7b2c "+playerInfo.EndlessLevel+" \u7ae0"},onClickedMatch:function(){!DebugConfig.isDebug()&&playerInfo.MissionID<=MyEnum.OtherPlay.Match.unlock?Utils.showHintText("normal",this.labList[0].string):(this.addPlayTime(MyEnum.OtherPlay.Match.key),Global.mainCtrl.openMatchPanel(),platformAdapter.aldSendEvent("onClickedMatch",{desc:"\u6309\u94ae\u70b9\u51fb_\u5bf9\u6218\u754c\u9762_\u7ade\u6280\u573a",missionId:playerInfo.MissionID}))},addPlayTime:function(e){var t=playerInfo.getValueByKey(e)||0;return t++,playerInfo.setValueByKey(e,t),t},onClickedEndless:function(){!DebugConfig.isDebug()&&playerInfo.MissionID<=MyEnum.OtherPlay.Endless.unlock?Utils.showHintText("normal",this.labList[1].string):(this.addPlayTime(MyEnum.OtherPlay.Endless.key),Utils.switchScene("endlessnew"),platformAdapter.aldSendEvent("onClickedEndless",{desc:"\u6309\u94ae\u70b9\u51fb_\u5bf9\u6218\u754c\u9762_\u65e0\u5c3d\u8bd5\u70bc",missionId:playerInfo.MissionID}))},onClickedBattle:function(){!DebugConfig.isDebug()&&playerInfo.MissionID<=MyEnum.OtherPlay.Meeting.unlock?Utils.showHintText("normal",this.labList[2].string):(this.addPlayTime(MyEnum.OtherPlay.Meeting.key),platformAdapter.aldSendEvent("onClickedBattle",{desc:"\u6309\u94ae\u70b9\u51fb_\u5bf9\u6218\u754c\u9762_\u6bd4\u6b66\u5927\u4f1a",missionId:playerInfo.MissionID}),Global.mainCtrl.openBattleMeeting())}}),cc._RF.pop()},{basePage:"basePage"}],getAssetPanel:[function(e,t){"use strict";cc._RF.push(t,"08f10O4sYdISblVInjzViCF","getAssetPanel"),cc.Class({extends:e("basePanel"),properties:{tipLab:cc.Label,numLab:cc.Label,iconSp:cc.Sprite,iconSp2:cc.Sprite},show:function(e){this.type=e.type,this.type==MyEnum.ObjectType.Coin?(this.value=Math.floor(4*Utils.getAvgCost()),console.log("************",0,this.value),this.tipLab.string="\u91d1\u5e01\u9886\u53d6"):this.type==MyEnum.ObjectType.Diamond&&(this.value=10,this.tipLab.string="\u94bb\u77f3\u9886\u53d6"),this.numLab.string="x"+this.value,Utils.getAssetSf(this.type,this.iconSp),Utils.getAssetShowSf(this.type,this.iconSp2)},onGetSuccess:function(e){Global.audioCtrl.playCoinClip(),this.type==MyEnum.ObjectType.Coin?(playerInfo.addObject({type:MyEnum.ObjectType.Coin,num:this.value},!0),this.coinAction(e.target.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},cc.find("Canvas/asset/gold/iconGold"))):(playerInfo.addObject({type:MyEnum.ObjectType.Diamond,num:this.value},!0),this.coinAction(e.target.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},cc.find("Canvas/asset/diamond/iconGold"))),this.close()},coinAction:function(e,t,n,i,a){for(var o=e,s=a.convertToWorldSpaceAR(cc.Vec2.ZERO),c=Math.random()*Math.PI-3*Math.PI/4,l=2*Math.PI/t,r=function(e){var r=cc.instantiate(a);r.parent=cc.director.getScene(),r.position=o;var d=c+l*e,h=50*Math.random()+50,p=cc.v2(Math.cos(d),Math.sin(d)).mul(h),u=p.add(o),f=p.mul(2).add(o);r.runAction(cc.sequence(cc.moveTo(.15,u).easing(cc.easeSineOut()),cc.bezierTo(.2+.05*e,[u,f,s]).easing(cc.easeInOut(1)),cc.callFunc(function(){a.stopAllActions(),a.runAction(cc.sequence(cc.scaleTo(.05,1.4),cc.scaleTo(.1,1))),r.destroy(),Utils.invokeCallback(n),e==t-1&&Utils.invokeCallback(i)})))},d=0;d<t;++d)r(d)}}),cc._RF.pop()},{basePanel:"basePanel"}],grade:[function(e,t){"use strict";cc._RF.push(t,"4a00eaxG75KSaTKcKovmqKZ","grade"),cc.Class({extends:cc.Component,properties:{lightStarSf:cc.SpriteFrame,grayStarSf:cc.SpriteFrame,starN:cc.Node},onLoad:function(){this.init()},init:function(){this.initCompleted||(this.radius=this.starN.y,this.stars=[this.starN],this.initCompleted=!0)},setGrade:function(e){if(this.init(),e<=0)this.node.active=!1;else{this.node.active=!0;var t=Config.grade[e-1],n=t?Number(t.sub_index):0;t||(t=Config.grade[Config.grade.length-1],n=e-Number(t.index)+Number(t.sub_index)),cc.find("gradeLab",this.node).getComponent(cc.Label).string=t.name+n+"\u661f",Utils.getGradeSf(t.type,cc.find("icon",this.node).getComponent(cc.Sprite));for(var i=Number(t.total),a=Number(t.sub_index),o=Math.max(i,this.stars.length),s=0;s<o;++s){var c=this.stars[s];if(c||((c=cc.instantiate(this.starN)).parent=this.starN.parent,this.stars[s]=c),s>i)c.active=!1;else{c.getComponent(cc.Sprite).spriteFrame=s<a?this.lightStarSf:this.grayStarSf;var l=120*-(s-i/2+.5)/i;c.position=cc.v2(0,this.radius).rotate(l*Math.PI/180)}}}}}),cc._RF.pop()},{}],guajiPanel:[function(e,t){"use strict";cc._RF.push(t,"981b4xzBLJB1qjgwWjTYLvH","guajiPanel"),cc.Class({extends:e("basePanel"),properties:{goldLab:cc.Label,goldTipLab:cc.Label,diamondLab:cc.Label,diamondTipLab:cc.Label,timeLab:cc.Label},start:function(){},show:function(){var e=350,t=1.5,n=MyEnum.GuaJiConfig;for(var i in n)if(playerInfo.MissionID<Number(i)){e=n[i][1],t=n[i][2];break}var a=+new Date,o=Math.min((a-playerInfo.GuajiStartTime)/1e3/60,480);this.gold=e,this.diamond=t,this.goldTipLab.string=e+"/H",this.diamondTipLab.string=t+"/H",this.goldReward=Math.floor(o*e/60),this.diamondReward=Math.floor(o*t/60),this.goldLab.string=this.goldReward,this.diamondLab.string=this.diamondReward,platformAdapter.aldSendEvent("openGuaJiPanel",{desc:"\u6302\u673a\u754c\u9762_\u5c55\u793a"})},update:function(){var e=+new Date,t=Math.min((e-playerInfo.GuajiStartTime)/1e3/60,480);this.goldReward=Math.floor(t*this.gold/60),this.diamondReward=Math.floor(t*this.diamond/60),this.goldLab.string=this.goldReward,this.diamondLab.string=this.diamondReward;var n=Math.min(Math.floor((e-playerInfo.GuajiStartTime)/1e3),28800);this.timeLab.string="\u6302\u673a\u65f6\u95f4  "+Utils.getFormatTime(n)},onClickedGetBtn:function(){this.goldReward&&(playerInfo.addObject({type:MyEnum.ObjectType.Coin,num:this.goldReward},!0),this.coinAction(this.goldLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},cc.find("Canvas/asset/gold/iconGold"))),this.diamondReward&&(playerInfo.addObject({type:MyEnum.ObjectType.Diamond,num:this.diamondReward},!0),this.coinAction(this.diamondLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},cc.find("Canvas/asset/diamond/iconGold"))),playerInfo.updateGuajiStartTime(),this.close(),platformAdapter.aldSendEvent("onClickedGetBtn",{desc:"\u6302\u673a\u754c\u9762_\u83b7\u53d6\u5956\u52b1"})},onClickedDoubleGetBtn:function(){this.goldReward&&(playerInfo.addObject({type:MyEnum.ObjectType.Coin,num:2*this.goldReward},!0),this.coinAction(this.goldLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),10,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},cc.find("Canvas/asset/gold/iconGold"))),this.diamondReward&&(playerInfo.addObject({type:MyEnum.ObjectType.Diamond,num:2*this.diamondReward},!0),this.coinAction(this.diamondLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),10,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},cc.find("Canvas/asset/diamond/iconGold"))),playerInfo.updateGuajiStartTime(),this.close(),platformAdapter.aldSendEvent("onClickedDoubleGetBtn",{desc:"\u6302\u673a\u754c\u9762_\u53cc\u500d\u83b7\u53d6\u5956\u52b1"})},coinAction:function(e,t,n,i,a){for(var o=e,s=a.convertToWorldSpaceAR(cc.Vec2.ZERO),c=Math.random()*Math.PI-3*Math.PI/4,l=2*Math.PI/t,r=function(e){var r=cc.instantiate(a);r.parent=cc.director.getScene(),r.position=o;var d=c+l*e,h=50*Math.random()+50,p=cc.v2(Math.cos(d),Math.sin(d)).mul(h),u=p.add(o),f=p.mul(2).add(o);r.runAction(cc.sequence(cc.moveTo(.15,u).easing(cc.easeSineOut()),cc.bezierTo(.2+.05*e,[u,f,s]).easing(cc.easeInOut(1)),cc.callFunc(function(){a.stopAllActions(),a.runAction(cc.sequence(cc.scaleTo(.05,1.4),cc.scaleTo(.1,1))),r.destroy(),Utils.invokeCallback(n),e==t-1&&Utils.invokeCallback(i)})))},d=0;d<t;++d)r(d)}}),cc._RF.pop()},{basePanel:"basePanel"}],guideCtrl:[function(e,t){"use strict";cc._RF.push(t,"57c91uNJ0ZOhIR2FLfN4CSb","guideCtrl"),e("Sync");var n=new cc.Vec2,i=new cc.Mat4;cc.Mat4,cc.Class({extends:cc.Component,properties:{lab:cc.Label,teacherSp:cc.Sprite,tSfs:{default:[],type:cc.SpriteFrame},maskN:cc.Node,continueN:cc.Node,handAni:cc.Animation,maskNew:cc.Mask},onLoad:function(){cc.director.on(MyEnum.CustomEvent.GuideEvent,this.onEvent,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node._touchListener.setSwallowTouches(!1),this._guideIndex=0,this.updateMaskFunc()},touchStart:function(){Utils.emitGuideEvent(MyEnum.GuideEvents.GuideTouchStart)},onEvent:function(e){console.log("GuideEvent");var t=this.guides[this.index];t&&(t.next_event==e.type?this.nextGuide():t.stop_event==e.type&&this.stop())},stop:function(){this.node.active=!1},updateMaskNew:function(e,t){void 0===e&&(e=cc.v2(0,0)),void 0===t&&(t=cc.size(0,0));var n=this.maskN.parent.convertToNodeSpaceAR(e);this.maskN.width=t.width,this.maskN.height=t.height,this.maskN.position=n},updateMaskFunc:function(){var e=this;this.maskRects=[],this.maskNew._updateGraphics=function(){var t=e.maskNew._graphics;for(var n in t.clear(),t.lineWidth=0,t.fillColor.fromHEX("#ff0000"),e.maskRects){var i=e.maskRects[n];t.rect(i.x,i.y,i.width,i.height)}t.fill()};var t=this;this.maskNew._hitTest=function(e){var a=this.node,o=a.getContentSize(),s=o.width,c=o.height,l=n;if(a._updateWorldMatrix(),!cc.Mat4.invert(i,a._worldMatrix))return!1;cc.Vec2.transformMat4(l,e,i),l.x+=a._anchorPoint.x*s,l.y+=a._anchorPoint.y*c;var r=!1;for(var d in t.maskRects){var h=t.maskRects[d];if(l.x>=h.x&&l.y>=h.y&&l.x<=h.xMax&&l.y<=h.yMax){r=!0;break}}return this.inverted&&(r=!r),r}},updateMaskGraphics:function(){this.maskNew._updateGraphics()},updateMask:function(e,t){void 0===e&&(e=cc.v2(0,0)),void 0===t&&(t=cc.size(0,0));var n=this.maskN.convertToNodeSpaceAR(e),i=this.maskN.children[0];i.width=4e3,i.height=4e3,i.x=n.x-t.width/2-i.width/2,i.y=n.y;var a=this.maskN.children[1];a.width=4e3,a.height=4e3,a.x=n.x+t.width/2+a.width/2,a.y=n.y;var o=this.maskN.children[2];o.width=t.width,o.height=4e3,o.x=n.x,o.y=n.y+t.height/2+o.height/2;var s=this.maskN.children[3];s.width=t.width,s.height=4e3,s.x=n.x,s.y=n.y-t.height/2-o.height/2},startGuide:function(e,t){this.guides=e,this.index=-1,this.isChapter=t,this.nextGuide()},nextGuide:function(){this.unschedule(this.nextGuide),this.index++;var e=this.guides[this.index];e?(1==playerInfo.MissionID&&this.isChapter&&platformAdapter.aldSendEvent("newGuide",{desc:"\u5f15\u5bfc\u65b0_"+this.index}),this.node.active=!0,this.execGuide(e)):this.endGuide()},endGuide:function(){this.node.active=!1,console.log("GuideEvent","stop"),Global.gameCtrl.IsShowHand=!0,Global.gameCtrl.handNum=2,cc.director.off(MyEnum.CustomEvent.GuideEvent,this.onEvent,this)},execGuide:function(e){var t=this;this.handAni.node.active=!1,cc.Tween.stopAllByTarget(this.handAni.node),this.teacherSp.node.parent.active=!0,this.updateMaskNew(),this.updateMask(),this.clickedCb=null,this.continueN.active=!1,this.maskRects=[];var n=++this._guideIndex;if("talk"==e.guide_type)this.teacherSp.spriteFrame=this.tSfs[Number(e.teacher)-1],this.lab.string=e.text,this.playEnter(function(){n==t._guideIndex&&(t.continueN.active=!0,t.clickedCb=t.nextGuide)});else if("click"==e.guide_type){var i=cc.find(e.text);if(!i)return void this.nextGuide();var a=i.convertToWorldSpaceAR(cc.Vec2.ZERO);this.updateMask(a,i.getContentSize()),this.playHandAni(a,e.guide_type)}else if("max_click"==e.guide_type){var o=Global.gameCtrl.getGuideClickNodes(),s=new cc.Vec2;for(var c in o){var l=o[c];if(l){var r=l.convertToWorldSpaceAR(cc.Vec2.ZERO),d=l.width,h=l.height;this.maskRects.push(new cc.Rect(r.x-d/2-cc.winSize.width/2,r.y-h/2-cc.winSize.height/2,d,h)),c==Math.floor(o.length/2)&&(s=r)}}this.playHandAni(s,"click"),this.updateMaskGraphics()}else if("hcMove"==e.guide_type){var p=Global.gameCtrl.hechengCtrl.getHeChengMove();if(!p.from||!p.to)return void this.nextGuide();var u=p.from.convertToWorldSpaceAR(cc.Vec2.ZERO),f=p.to.convertToWorldSpaceAR(cc.Vec2.ZERO);this.updateMaskNew(f,p.to),this.updateMask(u,p.from);var m=p.to.convertToWorldSpaceAR(cc.Vec2.ZERO);this.playHandMoveAni(u,m)}else if("dragMax"==e.guide_type){var g=Global.gameCtrl.hechengCtrl.getMaxElement().b,v=null;if(Global.gameCtrl.battleCtrl){var y=Global.gameCtrl.battleCtrl.selfN;this.updateMaskNew(y.convertToWorldSpaceAR(cc.Vec2.ZERO),y),v=Global.gameCtrl.battleCtrl.selfN.convertToWorldSpaceAR(cc.Vec2.ZERO)}else v=Global.gameCtrl.sScoreLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO);var b=g.convertToWorldSpaceAR(cc.Vec2.ZERO);this.updateMask(b,g.getContentSize()),this.playHandMoveAni(b,v)}e.teacherY?this.lab.node.parent.parent.y=e.teacherY:this.lab.node.parent.parent.y=83.741,e.closeMask&&this.updateMask(cc.v2(0,0),new cc.Size(1e4,2e4)),e.hideTeacher&&(this.teacherSp.node.parent.active=!1),e.delay&&this.scheduleOnce(this.nextGuide,e.delay)},playHandMoveAni:function(e,t,n){void 0===n&&(n=400),this.handAni.node.active=!0,e=this.handAni.node.parent.convertToNodeSpaceAR(e),t=this.handAni.node.parent.convertToNodeSpaceAR(t),this.handAni.node.position=e;var i=Math.max(t.sub(e).mag()/n,.5);cc.tween(this.handAni.node).repeatForever(cc.tween().set({position:e}).delay(.3).to(i,{position:t}).delay(.6)).start().to(.5,{position:t}),this.handAni.stop()},playHandAni:function(e,t){var n=this.handAni.node.parent.convertToNodeSpaceAR(e);this.handAni.node.position=n,this.handAni.node.active=!0,this.handAni.play(t)},playEnter:function(e){var t=this.getComponent(cc.Animation);t.off(cc.Animation.EventType.FINISHED),t.on(cc.Animation.EventType.FINISHED,function(){e&&e()}),t.play("teacherEnter")},playWait:function(){},playExit:function(e){var t=this.getComponent(cc.Animation);t.off(cc.Animation.EventType.FINISHED),t.on(cc.Animation.EventType.FINISHED,function(){e&&e()}),t.play("teacherExit")},onClickedMask:function(){console.log("clickedCbclickedCbclickedCbc",this.clickedCb),this.clickedCb&&this.clickedCb()}}),cc._RF.pop()},{Sync:void 0}],heroShow:[function(e,t){"use strict";cc._RF.push(t,"a5224VEKcBLQoF99mBTV1d6","heroShow"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.target=this.node.getComponent(dragonBones.ArmatureDisplay),this.target.animationName="stand",this.target.timeScale=.5,this.target.playAnimation("stand")},setId:function(e,t){var n=this,i=Config.skin[e-1];Utils.getOrLoadDBSk(i.icon,function(e){e&&(n.target.dragonAsset=e),Utils.getOrLoadDBSkTex(i.icon,function(e){n.target.dragonAtlasAsset=e,n.target.armatureName="Armature",n.target.playAnimation("stand"),t&&t()})})},upAni:function(e,t){if(console.log("level ****",e,Math.floor((e-1)/10)),e=Math.floor((e-1)/5)+1,e=Math.max(Math.min(e,5),1),console.log(e,"level **********"),this.target&&this.target.node&&cc.isValid(this.target.node)){var n=this.target.armature();if(n){var i=n.getSlot("weapon");dragonBones.CCFactory.getInstance().replaceSlotDisplay(this.target.getArmatureKey(),"Armature","weapon","weapon"+e,i),Utils.invokeCallback(t)}else Utils.invokeCallback(t)}else Utils.invokeCallback(t)}}),cc._RF.pop()},{}],mainCtrl:[function(e,t){"use strict";cc._RF.push(t,"76b20/lz4NP3ozR4U7GEBR3","mainCtrl");var n=e("PoolManager");cc.Class({extends:cc.Component,properties:{panelParentN:cc.Node,panelMaskN:cc.Node,mainToggleN:cc.Node,battlePage:e("basePage"),studentRedPointN:cc.Node,heroPre:cc.Prefab,lightAPre:cc.Prefab,tipLab:cc.Label,btnSideNode:cc.Node,startBtn:cc.Node,handAni:cc.Animation},onLoad:function(){var e=this;this.handAni.node.active=!1,cc.Tween.stopAllByTarget(this.handAni.node),Global.mainCtrl=this,this.pages={battlePage:this.battlePage},this.battlePage.init(),this.panelShowList=[],this.toggleList=[];var t=function(t){var n=e.mainToggleN.children[t];n.index=Number(t),n.on(cc.Node.EventType.TOUCH_START,function(){n.zIndex=1e3}),n.on(cc.Node.EventType.TOUCH_CANCEL,function(){n.zIndex=0}),n.on(cc.Node.EventType.TOUCH_END,function(){n.zIndex=0}),e.toggleList.push(n)};for(var i in this.mainToggleN.children)t(i);this.curIndex=2,this.battlePage.node.zIndex=2,this.updatePanelZIndex(),this.updateStudentRedPoint(),cc.director.on(MyEnum.CustomEvent.AssetUpdate,this.updateStudentRedPoint,this),console.log("Global.gotoPage",Global.gotoPage),null!=Global.gotoPage&&(this.clickedToggle(Global.gotoPage),Global.gotoPage=null),Global.isSuccess=null,this.scheduleOnce(function(){Utils.loadBundle("game",function(){cc.director.preloadScene("game",function(){console.log("cc.director.preloadScene game success")})})},.1);var a=playerInfo.getValueByKey("notIsFirstInMain");playerInfo.setValueByKey("notIsFirstInMain",!0),a&&playerInfo.getIsCanSign();var o=platformAdapter.getCurDateStoreDate("joinMainTimes")||0;platformAdapter.setCurDateStoreDate("joinMainTimes",o+1),0!=o&&(1==o&&playerInfo.getIsCanSign()?this.openSignPanel():Global.isShowFollow||!platformAdapter.isDouYin()||playerInfo.getValueByKey("follow")||(Global.isShowFollow=!0,this.openFollowPanel())),playerInfo.clearTempAttr(),n.initPoolByName("hero",this.heroPre,0),n.initPoolByName("lightAPre",this.lightAPre,3),this.tipLab.node.parent.active=!1,playerInfo.MissionID>MyEnum.OtherPlay.Match.unlock&&!playerInfo.getValueByKey(MyEnum.OtherPlay.Match.key)?(this.tipLab.node.parent.active=!0,this.tipLab.string="\u7ade\u6280\u573a\u5f00\u542f"):playerInfo.MissionID>MyEnum.OtherPlay.Endless.unlock&&!playerInfo.getValueByKey(MyEnum.OtherPlay.Endless.key)?(this.tipLab.node.parent.active=!0,this.tipLab.string="\u65e0\u5c3d\u8bd5\u70bc\u5f00\u542f"):playerInfo.MissionID<=MyEnum.OtherPlay.Endless.unlock||playerInfo.MissionID>MyEnum.OtherPlay.Meeting.unlock&&!playerInfo.getValueByKey(MyEnum.OtherPlay.Meeting.key)&&(this.tipLab.node.parent.active=!0,this.tipLab.string="\u6bd4\u6b66\u5927\u4f1a\u5f00\u542f"),cc.tween(this.tipLab.node.parent).repeatForever(cc.tween().by(.15,{y:10}).by(.15,{y:-10}).by(.15,{y:10}).by(.15,{y:-10}).delay(.4)).start(),Global.joinMainTimes=Global.joinMainTimes||0,Global.joinMainTimes++,console.log("Global.joinMainTimes % 3",Global.joinMainTimes%3),this.btnSideNode.active=GCommon.OnlineInfo.jumpList.length>0,Global.autoOpenBonus&&(Global.autoOpenBonus=!1,this.autoOpenBonusPanel()),window.isShowMianHand&&this.showHand()},showHand:function(){window.isShowMianHand=!1,console.log("GuideEvent","showHand"),platformAdapter.aldSendEvent("guide",{desc:"\u5f15\u5bfc4"});var e=this.startBtn.convertToWorldSpaceAR(cc.Vec2.ZERO);console.log("GuideEvent:handPos",e),this.playHandAni(e,"click"),this.handNum++},playHandAni:function(e,t){var n=this.handAni.node.parent.convertToNodeSpaceAR(e);console.log("GuideEvent:pos",n),this.handAni.node.position=n,this.handAni.node.active=!0,this.handAni.play(t)},getRandomChipId:function(){var e=Config.skin,t=[];for(var n in e){var i=e[n];if(!playerInfo.skinIsUnlock(i.id)){var a=playerInfo.getChipInfo(i.id),o=Number(i.need);a.c>=o||t.push(i.id)}}return t[Math.floor(t.length*Math.random())]},onDestroy:function(){cc.director.off(MyEnum.CustomEvent.AssetUpdate,this.updateStudentRedPoint,this)},updateStudentRedPoint:function(){this.studentRedPointN.active=Utils.checkAllStudentRedPoint()},touchMove:function(e){var t=e.getLocation().sub(e.getStartLocation()),n=-640*Number(this.curIndex-2)+t.x/2;this.panelParentN.x=n},touchEnd:function(e){var t=e.getLocation().sub(e.getStartLocation());console.log("pos",Math.abs(t.x)),Math.abs(t.x)>200?t.x<0&&this.curIndex<4?this.clickedToggle(this.curIndex+1):t.x>0&&this.curIndex>0?this.clickedToggle(this.curIndex-1):this.switchPanel(this.curIndex):this.switchPanel(this.curIndex)},clickedToggle:function(e){for(var t in this.mainToggleN.children){var n=this.mainToggleN.children[t],i=n.getChildByName("Background");i.active=!0,n.index==e&&(i.active=!1,n.getComponent(cc.Toggle).isChecked=!0)}},getPanel:function(e,t){var n=this;for(var i in this.panelShowList){var a=this.panelShowList[i];if(a.node.name==e)return this.panelShowList.splice(i,1),void t(a)}Utils.loadBundle("main_a",function(i,a){console.log(i,"errr",a),a.load("panel/"+e+"/"+e,cc.Prefab,function(i,a){if(console.log(i,"errr ****"),n&&cc.isValid(n)&&cc.isValid(n.node)){var o=cc.instantiate(a);o.parent=n.panelMaskN.parent,o.name=e;var s=o.getComponent("basePanel");o.on("active-in-hierarchy-changed",function(e){e.active||(n.updatePanelZIndex(),e.hideCb&&e.hideCb())}),t(s)}})})},loadAndShowPanel:function(e,t,n,i){var a=this;this.getPanel(e,function(e){a.panelShowList.push(e),e.node.active=!0,e.node.hideCb=i,e.show(t),a.updatePanelZIndex(),n&&n()})},updatePanelZIndex:function(){for(var e=this,t=null,n=this.panelShowList.length,i=0;i<n;++i){var a=this.panelShowList[i],o=a.node;o.zIndex=10*i,o.active&&(this.panelMaskN.zIndex=o.zIndex-1,t=a)}t?(platformAdapter.changeCustomAdState3(!1),platformAdapter.changeCustomAdState4(!1)):(console.log("curIndex this.curIndex",this.curIndex),2==this.curIndex?(this.battlePage.mores[0].active=!1,this.battlePage.mores[1].active=!0,window.wx&&platformAdapter.changeCustomAdState3(!0).catch(function(){e.battlePage.mores[0].active=!0})):(platformAdapter.changeCustomAdState3(!1),platformAdapter.changeCustomAdState4(!1))),this.panelMaskN.active=!!t,console.log("updatePanelZIndex",this.panelMaskN.active)},start:function(){cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("****************** cc.game.EVENT_HIDE"),playerInfo.setAllData()}),playerInfo.clearTempReward()},onClickedToggle:function(e){var t=e.target.index,n=-320;for(var i in this.toggleList){var a=this.toggleList[i],o=a.getChildByName("Background");o.active=!0,a.index==t?(o.active=!1,a.x=n+70,n+=140):(a.x=n+62.5,n+=125)}this.switchPanel(t)},switchPanel:function(e){var t=this,n=(this.curIndex,this.curIndex==e);this.curIndex=e;var i=-640*Number(e-2);if(cc.Tween.stopAllByTarget(this.panelParentN),cc.tween(this.panelParentN).to(.001,{x:i},{easing:"sineInOut"}).start(),this.updatePanelZIndex(),!n){this.tipLab.node.parent.active=!1;var a=MyEnum.Page[e];console.log(e,"index"),this.pages[a]?!0!==this.pages[a]&&this.pages[a].init():(this.pages[a]=!0,Utils.loadBundle("main_a",function(n,i){console.log("load *&******","panel/"+a+"/"+a),i.load("panel/"+a+"/"+a,cc.Prefab,function(n,i){n&&console.log(n,"err ***");var o=cc.instantiate(i);o.parent=t.panelParentN,o.zIndex=e;var s=o.getComponent("basePage");t.pages[a]=s,s.init()})}))}},openChestRewardPanel:function(e){this.loadAndShowPanel("chestRewardPanel",e,function(){})},openEquipInfoPanel:function(e){this.loadAndShowPanel("equipInfoPanel",e,function(){},function(){})},openSkinPanel:function(e){this.loadAndShowPanel("skinPanel",e,function(){})},openGetSkinPanel:function(e){this.loadAndShowPanel("getSkinPanel",e,function(){})},openMatchPanel:function(){this.loadAndShowPanel("matchPanel",null,function(){})},openTestPaperPanel:function(e,t){this.loadAndShowPanel("testPaperPanel",e,function(){t&&t()})},openGetAssetPanel:function(e,t){this.loadAndShowPanel("getAssetPanel",e,function(){t&&t()})},openMissionPanel:function(e,t){console.log("openMissionPanel *** missionPanel"),this.loadAndShowPanel("missionPanel",e,function(){t&&t()})},openTurntablePanel:function(){this.loadAndShowPanel("turntablePanel",null,function(){})},openGuajiPanel:function(){var e=this;this.loadAndShowPanel("guajiPanel",null,function(){},function(){e.pages.battlePage.updateRedPoint()})},openTiliPanel:function(){this.loadAndShowPanel("tiliPanel",null,function(){})},openTupoPanel:function(e){this.loadAndShowPanel("tupoPanel",e,function(){})},openZhuXianBuffPanel:function(e,t){this.loadAndShowPanel("zhuxianbuffPanel",e,function(){},t)},openSignPanel:function(e){var t=this;this.loadAndShowPanel("signPanel",e,function(){},function(){t.pages.battlePage.updateRedPoint()})},openBoxPanel:function(e){this.loadAndShowPanel("boxPanel",e,function(){})},openSkinDescPanel:function(e,t){this.loadAndShowPanel("skinDescPanel",e,function(){},t)},openOnlinePanel:function(){this.loadAndShowPanel("zaixianPanel",null,function(){})},openBattleMeeting:function(){this.loadAndShowPanel("battleMeeting",null,function(){})},openBattleMeetingReward:function(){this.loadAndShowPanel("battleMeetingReward",null,function(){})},openBonusPanel:function(e){this.loadAndShowPanel("bonusPanel",e,function(){})},openColoredEggsPanel:function(e){this.loadAndShowPanel("coloredEggsPanel",e,function(){})},openPanelMoreGame:function(){Utils.showMoreGame()},openFollowPanel:function(){this.loadAndShowPanel("followPanel",null,function(){})},openBossPanel:function(e){this.loadAndShowPanel("bossPanel",e,function(){})},getEquipIdByPos:function(e,t){var n=Config.equip,i=Math.pow(2,e-1);for(var a in n){var o=n[a];if(Number(o.pos)==t&&Number(o.e_id)&i)return Number(o.id)}},checkEquipRedPoint:function(e,t){var n=playerInfo.getEEquips(e)[t];if(n){var i=n.level,a=n.id,o=Config.equip[a-1],s=Utils.getCost(i,o.chip,o.chip_add);if(playerInfo.getChipNum(a)<s)return!1;var c=Utils.getCost(i,o.cost,o.cost_add);return!(playerInfo.Gold<c)}var l=this.getEquipIdByPos(e,t);return!!playerInfo.haveChip(l)},autoOpenBonusPanel:function(){var e=[];for(var t in Config.genius){Config.genius[t];var n=Number(t);playerInfo.geniusIsUnlock(n)||e.push(n)}var i=e[Math.floor(Math.random()*e.length)];this.openBonusPanel({genieIndex:i,useCB:function(){var e=platformAdapter.getCurDateStoreDate("bonusData")||{};e[i]=!0,platformAdapter.setCurDateStoreDate("bonusData",e)}})},onClickedCoinBtn:function(){Global.mainCtrl.openGetAssetPanel({type:MyEnum.ObjectType.Coin})},onClickedDiamondBtn:function(){Global.mainCtrl.openGetAssetPanel({type:MyEnum.ObjectType.Diamond})},coinAction:function(e,t,n,i,a){for(var o=e,s=a.convertToWorldSpaceAR(cc.Vec2.ZERO),c=Math.random()*Math.PI-3*Math.PI/4,l=2*Math.PI/t,r=function(e){var r=cc.instantiate(a);r.parent=cc.director.getScene(),r.position=o;var d=c+l*e,h=50*Math.random()+50,p=cc.v2(Math.cos(d),Math.sin(d)).mul(h),u=p.add(o),f=p.mul(2).add(o);r.runAction(cc.sequence(cc.moveTo(.15,u).easing(cc.easeSineOut()),cc.bezierTo(.2+.05*e,[u,f,s]).easing(cc.easeInOut(1)),cc.callFunc(function(){a.stopAllActions(),a.runAction(cc.sequence(cc.scaleTo(.05,1.4),cc.scaleTo(.1,1))),r.destroy(),Utils.invokeCallback(n),e==t-1&&Utils.invokeCallback(i)})))},d=0;d<t;++d)r(d)}}),cc._RF.pop()},{PoolManager:void 0,basePage:"basePage"}],mask_open:[function(e,t){"use strict";cc._RF.push(t,"0f25e5Ml0dA8qTFm3Dve3zX","mask_open"),cc.Class({extends:cc.Component,properties:{}}),cc._RF.pop()},{}],matchPanel:[function(e,t){"use strict";cc._RF.push(t,"aad59iYyb9NJL1p5CUQY+BJ","matchPanel");var n=e("FakeNames");cc.Class({extends:e("basePanel"),properties:{selfN:cc.Node,otherN:cc.Node,selfSp:cc.Sprite,otherSp1:cc.Sprite,otherSp2:cc.Sprite,startMatchBtnN:cc.Node},onEnable:function(){this.updateInfo(this.selfN,{grade:playerInfo.Grade,name:"\u6211"}),this.updateInfo(this.otherN,{grade:0,name:""}),this.matching=!1,this.otherSp1.node.y=0,this.otherSp2.node.y=120,this.startMatchBtnN.active=!0,platformAdapter.aldSendEvent("openMatchPanel",{desc:"\u754c\u9762\u5c55\u793a_\u5339\u914d\u754c\u9762",missionId:playerInfo.MissionID})},updateInfo:function(e,t){e.info=t,cc.find("grade",e).getComponent("grade").setGrade(t.grade),cc.find("head/nameLab",e).getComponent(cc.Label).string=t.name},onClickedStartBtn:function(){var e=this;this.startMatchBtnN.active=!1,this.loadHeadSf(function(){e.startMatch()}),platformAdapter.aldSendEvent("clickStartMatch",{desc:"\u6309\u94ae\u70b9\u51fb_\u5339\u914d\u754c\u9762_\u5f00\u59cb\u5339\u914d",missionId:playerInfo.MissionID})},startMatch:function(){this.matching=!0,this.a=30,this.speed=0},endMatch:function(e){this.matching=!1;var t=n[Math.floor(n.length*Math.random())].name;this.updateInfo(this.otherN,{grade:Math.max(playerInfo.Grade+Math.floor(4*Math.random()),1),name:t});var i=this.selfN.info;i.sf=this.selfSp.spriteFrame;var a=this.otherN.info;a.sf=e.spriteFrame,Global.MatchInfo={sInfo:i,oInfo:a},setTimeout(function(){Global.gameType=MyEnum.GameType.Match,Utils.switchScene("game")},300)},update:function(e){if(this.matching){if(this.speed=Math.max(this.speed+this.a*e,4),this.a-=20*e,this.otherSp1.node.y-=this.speed,this.otherSp2.node.y-=this.speed,this.speed<6){if(this.otherSp1.node.y<0&&this.speed+this.otherSp1.node.y>0)return this.otherSp1.node.y=0,this.otherSp2.node.y=120,void this.endMatch(this.otherSp1);if(this.otherSp2.node.y<0&&this.speed+this.otherSp2.node.y>0)return this.otherSp2.node.y=0,this.otherSp1.node.y=120,void this.endMatch(this.otherSp2)}this.otherSp1.node.y<=-120&&(this.otherSp1.node.y+=240,this.otherSp1.spriteFrame=this.getSF()),this.otherSp2.node.y<=-120&&(this.otherSp2.node.y+=240,this.otherSp2.spriteFrame=this.getSF())}},loadHeadSf:function(e){var t=this;Utils.loadBundle("main_a",function(n,i){i.loadDir("panel/matchPanel/head/",cc.SpriteFrame,function(n,i){t.headSfs=i,e&&e()})})},getSF:function(){var e=Math.floor(25*Math.random())+1;for(var t in this.headSfs)if(this.headSfs[t].name=="portrait"+e)return this.headSfs[t];return console.log(this.headSfs,"headSfs"),null}}),cc._RF.pop()},{FakeNames:"FakeNames",basePanel:"basePanel"}],moreGameItem:[function(e,t){"use strict";cc._RF.push(t,"2f0ceiSfThDf5iC/czjt1o+","moreGameItem"),cc.Class({extends:cc.Component,properties:{iconSp:cc.Sprite,nameLab:cc.Label,initPos:0,noAction:!1},onLoad:function(){cc.director.on("updateMoreGame",this.updateMoreGameState,this)},onDestroy:function(){cc.director.off("updateMoreGame",this.updateMoreGameState,this)},onEnable:function(){var e=this;GCommon.OnlineInfo.jumpList.length<=0?setTimeout(function(){e.node.active=!1},20):(this.node.off(cc.Node.EventType.TOUCH_START),this.noAction||(this.node.stopAllActions(),this.node.runAction(cc.repeatForever(cc.sequence(cc.repeat(cc.sequence(cc.rotateTo(.2,10).easing(cc.easeSineOut()),cc.rotateTo(.2,0).easing(cc.easeSineIn()),cc.rotateTo(.2,-10).easing(cc.easeSineOut()),cc.rotateTo(.2,0).easing(cc.easeSineIn()),cc.delayTime(.2),cc.rotateTo(.2,10).easing(cc.easeSineOut()),cc.rotateTo(.2,0).easing(cc.easeSineIn()),cc.rotateTo(.2,-10).easing(cc.easeSineOut()),cc.rotateTo(.2,0).easing(cc.easeSineIn())),1),cc.delayTime(.1),cc.moveBy(.12,0,20).easing(cc.easeSineOut()),cc.moveBy(.12,0,-20).easing(cc.easeSineIn()),cc.moveBy(.12,0,20).easing(cc.easeSineOut()),cc.moveBy(.12,0,-20).easing(cc.easeSineIn()),cc.delayTime(.1))))),this.updateMoreGameState())},updateMoreGameState:function(){this.node.active=!0,this.index=null==this.index?Math.floor(GCommon.OnlineInfo.jumpList.length*Math.random()):this.index+1,this.updateIcon(),this.unschedule(this.changeIcon),this.schedule(this.changeIcon,10)},changeIcon:function(){GCommon.OnlineInfo.jumpList.length>0&&(this.node.active=!0),this.index+=Math.floor(3*Math.random())+1,this.updateIcon()},updateIcon:function(){var e=this;if(!(GCommon.OnlineInfo.jumpList.length<=0)){this.index>=GCommon.OnlineInfo.jumpList.length&&(this.index-=GCommon.OnlineInfo.jumpList.length);var t=GCommon.OnlineInfo.jumpList[this.index];t.icon?cc.loader.load(t.icon,function(t,n){var i=new cc.SpriteFrame(n);e&&cc.isValid(e.iconSp)&&(e.iconSp.spriteFrame=i)}):cc.loader.loadRes("img/ads/"+t.spic,cc.SpriteFrame,function(t,n){e&&cc.isValid(e.iconSp)&&(e.iconSp.spriteFrame=n)}),this.nameLab.string=t.name,this.info=t}},onClickedJumpOtherGame:function(){var e=this,t=this.info.appId,n=this.info.name,i=this.info.path;console.log("path----------------",i),platformAdapter.navigateToMiniProgram(t,i,function(){e.index++,e.updateIcon()},function(){e.index++,e.updateIcon(),Utils.showMoreGame()},n)}}),cc._RF.pop()},{}],moreGame:[function(e,t){"use strict";cc._RF.push(t,"f3e870ePs1JZq86udz/D66W","moreGame"),cc.Class({extends:cc.Component,properties:{scrollView:cc.ScrollView,itemN:cc.Node,showNum:{default:9,type:cc.Integer},randomType:0,moveType:0,speed:100},init:function(){if(!this.nodes){this.nodes=[],this.index=0;for(var e=this.itemN.parent.children,t=0;t<this.showNum;t++)if(!this.nodes[t]){var n=null;e[t]?n=e[t]:(n=cc.instantiate(this.itemN)).parent=this.itemN.parent,this.nodes[t]=n}null==this.initPos&&(1==this.moveType?this.scrollView.scrollToLeft(0):2==this.moveType&&this.scrollView.scrollToTop(0),this.initPos=this.scrollView.content.position)}},getRandomArrayElements:function(e,t){for(var n,i,a=e.slice(0),o=e.length,s=o-t;o-- >s;)n=a[i=Math.floor((o+1)*Math.random())],a[i]=a[o],a[o]=n;return a.slice(s)},getShowList:function(){for(var e=[],t=0;t<this.showNum;++t)this.index>=GCommon.OnlineInfo.jumpList.length&&(this.index=this.index%GCommon.OnlineInfo.jumpList.length),e.push(this.index),this.index++;return e},getRandomShowList:function(){for(var e=[],t=0;t<GCommon.OnlineInfo.jumpList.length;t++)e[t]=t;return this.getRandomArrayElements(e,this.showNum)},getAllShowList:function(){for(var e=[],t=0;t<GCommon.OnlineInfo.jumpList.length;t++)e[t]=t;return e},updateShowList:function(){var e,t=this;e=1==this.randomType?this.getRandomShowList():0==this.randomType?this.getShowList():this.getAllShowList();var n=function(n){var i=t.nodes[n],a=GCommon.OnlineInfo.jumpList[e[n]];if(!a)return"continue";var o=a.name;o.length>6&&(o=o.substring(0,6)),cc.find("name",i).getComponent(cc.Label).string=o;var s=cc.find("icon",i).getComponent(cc.Sprite),c=cc.find("shadow",i);if(c&&Utils.loadBundle("main_a",function(e,t){t.load("panel/panelMoreGame/img/show_icon_"+(Number(n)+1)%4,cc.SpriteFrame,function(e,t){e||(c.getComponent(cc.Sprite).spriteFrame=t)})}),a.name==i.name)return"continue";a.icon?cc.loader.load(a.icon,function(e,t){var n=new cc.SpriteFrame(t);s.spriteFrame=n}):cc.loader.loadRes("img/ads/"+a.spic,cc.SpriteFrame,function(e,t){s.spriteFrame=t}),i.appId=a.appId,i.path=a.path,i.name=a.name};for(var i in e)n(i)},onEnable:function(){GCommon.OnlineInfo.jumpList.length<=0?this.node.active=!1:(this.init(),this.updateShowList(),0==!this.moveType&&this.setAutoScroll())},randomShow:function(){this.updateShowList()},setAutoScroll:function(e){var t=this;void 0===e&&(e=0),this.scrollType=e,this.scheduleOnce(function(){t.toRight=!0,t.scrollViewCall(),t.autoAction()},1.5)},scrollViewCall:function(){this.scrollView.node.on("scroll-began",this.scrollBeganClick,this),this.scrollView.node.on("scroll-ended",this.scrollEndedClick,this)},scrollBeganClick:function(){this.scrollView.node.stopAllActions()},scrollEndedClick:function(){this.autoAction()},autoAction:function(){var e,t,n=this;t=1==this.moveType?this.scrollView.content.x:this.scrollView.content.y,this.toRight?1==this.moveType?(e=(this.scrollView.content.width-this.scrollView.node.width)/this.speed,this.scrollView.scrollToRight(e,!1)):(e=(this.scrollView.content.height-this.scrollView.node.height)/this.speed,this.scrollView.scrollToBottom(e,!1)):1==this.moveType?(e=Math.abs(t-this.initPos.x)/this.speed,this.scrollView.scrollToLeft(e,!1)):(e=Math.abs(t-this.initPos.y)/this.speed,this.scrollView.scrollToTop(e,!1)),this.scrollView.node.runAction(cc.sequence(cc.delayTime(e+2),cc.callFunc(function(){n.toRight=!n.toRight,n.scrollView.node.stopAllActions(),n.autoAction()})))},onDisable:function(){this.scrollView&&this.scrollView.node&&this.scrollView.node.stopAllActions()},onClickedJumpOtherGame:function(e){var t=e.target.appId,n=e.target.name,i=e.target.path;platformAdapter.aldSendEvent("\u6e38\u620f\u8df3\u8f6c_\u66f4\u591a\u6e38\u620f\u754c\u9762_\u5f00\u59cb\u8df3\u8f6c",{name:n}),console.log("path----------------",i),platformAdapter.navigateToMiniProgram(t,i,function(){platformAdapter.aldSendEvent("\u6e38\u620f\u8df3\u8f6c_\u66f4\u591a\u6e38\u620f\u754c\u9762_\u8df3\u8f6c\u6210\u529f",{name:n})},null,n)}}),cc._RF.pop()},{}],moveT:[function(e,t){"use strict";cc._RF.push(t,"4b348cUTxlLlbTAgMnI2RI1","moveT"),cc.Class({extends:cc.Component,properties:{},start:function(){if(cc.Canvas.instance.node.height>1136){var e=(cc.Canvas.instance.node.height-1136)/2,t=this.node.getComponent(cc.Widget).top;this.node.getComponent(cc.Widget).top=t+Math.min(50,e)}}}),cc._RF.pop()},{}],panelMoreGame:[function(e,t){"use strict";cc._RF.push(t,"979c7UKnChCT42QaA650P9N","panelMoreGame"),cc.Class({extends:e("basePanel"),properties:{},onCloseClicked:function(){this.node.active=!1},onEnable:function(){this.updateBanner(),platformAdapter.aldSendEvent("\u754c\u9762\u5c55\u793a_\u66f4\u591a\u6e38\u620f\u754c\u9762",{missionId:playerInfo.MissionID})},start:function(){}}),cc._RF.pop()},{basePanel:"basePanel"}],repeatForever:[function(e,t){"use strict";cc._RF.push(t,"c4c1afgsYNMj55Cnuv8hsQO","repeatForever");var n=cc.Enum({Rotate:0,Scale1:1,Jump1:2});cc.Class({extends:cc.Component,properties:{eventType:{default:n.Rotate,type:n},speed:10},start:function(){var e=null;for(var t in n)if(n[t]==this.eventType){e=t;break}this[e]()},Rotate:function(){cc.tween(this.node).by(1,{angle:this.speed}).repeatForever().start()},Scale1:function(){var e=this.node.scale;this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.1,e+.1),cc.scaleTo(.1,e),cc.delayTime(1))))},Jump1:function(){cc.tween(this.node).repeatForever(cc.tween().by(.2,{y:this.speed}).by(.2,{y:-this.speed}).by(.2,{y:this.speed}).by(.2,{y:-this.speed}).delay(1)).start()}}),cc._RF.pop()},{}],shareVideoBtn:[function(e,t){"use strict";cc._RF.push(t,"9e9aeNN5d5Oj6IBxEor5ga7","shareVideoBtn");var n=cc.Enum({default:0,kaijuBuff:1,OverDouble:2,GuajiDouble:3,DungeonTimes:4,SkinDouble:5,JiangzReward:6,StoreDiamond:7,StoreBox:8,AddThree:9,getAsset:10,MatchStar:11,MatchDiamond:12,SignDouble:13,PhysicalFull:14,PhysicalUn:15,Turntable:16,EndlessDouble:17,EndlessChangeBuff:18,EndlessAllBuff:19,OnlineDouble:20,GetBuff:21,AddStep:22,tupoTime:23,storeRandom:24,storeSuper:25}),i={0:"\u9ed8\u8ba4",1:"\u5f00\u5c40BUFF",2:"\u7ed3\u675f\u53cc\u500d\u5956\u52b1",3:"\u6302\u673a\u53cc\u500d\u5956\u52b1",4:"\u83b7\u53d6\u526f\u672c\u6b21\u6570",5:"\u53cc\u500d\u788e\u7247\u5956\u52b1",6:"\u83b7\u53d6\u5956\u72b6\u5956\u52b1",7:"\u5546\u5e97\u83b7\u53d6\u94bb\u77f3",8:"\u5546\u5e97\u6253\u5f00\u5b9d\u7bb1",9:"\u52a0\u4e09\u6b65",10:"\u514d\u8d39\u91d1\u5e01\u94bb\u77f3",11:"\u5339\u914d\u7ed3\u675f\u4fdd\u661f",12:"\u5339\u914d\u7ed3\u675f\u94bb\u77f3",13:"\u7b7e\u5230\u53cc\u500d",14:"\u4f53\u529b\u5145\u6ee1",15:"\u4f53\u529b\u65e0\u9650",16:"\u8f6c\u76d8",17:"\u65e0\u5c3d\u53cc\u500d\u5956\u52b1",18:"\u65e0\u5c3d\u66f4\u6362BUFF",19:"\u65e0\u5c3d\u83b7\u5f97BUFF",20:"\u5728\u7ebf\u53cc\u500d\u5956\u52b1",21:"\u4e3b\u7ebf\u83b7\u53d6BUFF",22:"\u589e\u52a0\u6b65\u6570",23:"\u7a81\u7834\u65f6\u95f4",24:"\u5546\u5e97\u968f\u673a\u5b9d\u7bb1",25:"\u5546\u5e97\u8d85\u7ea7\u5b9d\u7bb1"};cc.Class({extends:cc.Component,properties:{nameType:{default:n.MatchDiamond,type:n},iconSp:cc.Sprite,targetBtn:cc.Button,defaultShowN:cc.Node,successEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1},failEvents:{default:[],type:cc.Component.EventHandler},clickedEvents:{default:[],type:cc.Component.EventHandler}},onLoad:function(){for(var e in this.nameEx="default",n)this.nameType==n[e]&&(this.nameEx=e)},addListener:function(){this.targetBtn.node.on(cc.Node.EventType.TOUCH_END,this.onClickedBtn,this),cc.director.on(MyEnum.CustomEvent.SVStateEvent,this.updateUI,this)},removeListener:function(){this.targetBtn.node.off(cc.Node.EventType.TOUCH_END,this.onClickedBtn,this),cc.director.off(MyEnum.CustomEvent.SVStateEvent,this.updateUI,this)},onEnable:function(){this.updateUI(),this.addListener()},onDisable:function(){this.removeListener()},updateUI:function(){var e=platformAdapter.getShareVideoState(this.nameEx);e!=this.state&&(this.state=e,this.state==MyEnum.ShareVideoState.Close?(this.targetBtn.node.active=!1,this.defaultShowN&&(this.defaultShowN.active=!0)):(this.targetBtn.node.active=!0,this.defaultShowN&&(this.defaultShowN.active=!1),this.iconSp&&Utils.getShareVideoIcon(this.state,this.iconSp)))},onClickedBtn:function(e){var t=this;cc.Component.EventHandler.emitEvents(this.clickedEvents,e),platformAdapter.startShareWatch(this.state,function(){cc.Component.EventHandler.emitEvents(t.successEvents,e)},function(){cc.Component.EventHandler.emitEvents(t.failEvents,e)},null,i[this.nameType])}}),cc._RF.pop()},{}],signPanel:[function(e,t){"use strict";cc._RF.push(t,"51552SYnXZG7JFNekPe6MvS","signPanel");var n=[[{type:0,num:20}],[{type:3,num:5,id:10}],[{type:0,num:40}],[{type:3,num:5,id:10}],[{type:0,num:60}],[{type:0,num:70}],[{type:3,num:10,id:10}]];cc.Class({extends:e("basePanel"),properties:{itemParent:cc.Node,icon:cc.SpriteFrame,btn:cc.Node,btnClose:cc.Node,iconNode:cc.Node,labelNode:cc.Node,doubleBtnN:cc.Node},start:function(){},onEnable:function(){this._super(),this.updateUI(),platformAdapter.aldSendEvent("openSignPanel",{desc:"\u7b7e\u5230\u754c\u9762_\u5c55\u793a"})},updateUI:function(){this.itemList=this.itemParent.children;for(var e=playerInfo.getSignInfo(),t=playerInfo.getIsCanSign(),i=0;i<7;i++){var a=e.signDay%7;if(0!=a||t||(a=7),this.itemList[i].getChildByName("sign").active=i<a,this.itemList[i].getChildByName("select").active=t?i==a:i==a-1,!this.initState)for(var o in n[i]){if(o>0){var s=cc.instantiate(this.labelNode);s.parent=this.itemList[i].getChildByName("reward"),s.active=!0}var c=n[i][o],l=cc.instantiate(this.iconNode);if(l.getChildByName("icon").active=!0,l.getChildByName("num").active=!0,0==c.type)l.getChildByName("num").getComponent(cc.Label).string="X"+c.num;else if(c.type==MyEnum.ObjectType.Chip){var r=l.getChildByName("icon").getComponent(cc.Sprite);Utils.getAssetSf(MyEnum.ObjectType.Chip,r);var d=Config.skin[c.id-1];l.getChildByName("num").getComponent(cc.Label).string=d.name+"\u788e\u7247 x"+c.num}i==e.signDay%7&&(this.rewardsNode=l.getChildByName("icon")),l.parent=this.itemList[i].getChildByName("reward"),l.active=!0}}this.initState=!0,t?(this.btn.active=!0,this.btnClose.active=!1,this.doubleBtnN.active=!0):(this.btn.active=!1,this.btnClose.active=!0,this.doubleBtnN.active=!1)},onClickedSign:function(e,t){var i=this;void 0===t&&(t=1);var a=playerInfo.getSignInfo(),o=n[a.signDay%7];for(var s in o)if(0==o[s].type)playerInfo.addObject({type:MyEnum.ObjectType.Diamond,num:o[s].num*Number(t)},!0),Global.mainCtrl.coinAction(this.rewardsNode.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},cc.find("Canvas/asset/diamond/iconGold"));else if(o[s].type==MyEnum.ObjectType.Chip){var c=Config.skin[o[s].id-1];console.log("rewardInfo[i]",o[s]),playerInfo.addSkinChip(o[s].id,o[s].num),Utils.showHintText("normal",c.name+"\u788e\u7247  x"+o[s].num)}a.signDay++,a.signTime=Utils.getDayNum(),playerInfo.updataSignInfo(a),this.updateUI(),this.scheduleOnce(function(){i.onClickedClose()},1),1==t?platformAdapter.aldSendEvent("getSignReward1",{desc:"\u7b7e\u5230\u754c\u9762_\u83b7\u53d6\u5956\u52b1"}):platformAdapter.aldSendEvent("getSignReward2",{desc:"\u7b7e\u5230\u754c\u9762_\u53cc\u500d\u83b7\u53d6\u5956\u52b1"})},onClickedClose:function(){this.onClickedCloseBtn(null,!0)}}),cc._RF.pop()},{basePanel:"basePanel"}],skinDescPanel:[function(e,t){"use strict";cc._RF.push(t,"d519ehH+h9AZbnD9EOzkzdb","skinDescPanel"),cc.Class({extends:e("basePanel"),properties:{progressBar:cc.ProgressBar,progressLab:cc.Label,unlockLab:cc.Label,buffLab:cc.Label,nameLab:cc.Label,unlockBtnN:cc.Node,goStoreBtnN:cc.Node,diamondBtnN:cc.Node,unlockTipN:cc.Node,adBtnN:cc.Node,addSkinBtn:cc.Node,heroShow:e("heroShow"),useBtnN:cc.Node},show:function(e){this.nameLab.string=e.name;var t=playerInfo.skinIsUnlock(e.id);if(this.heroShow.node.color=t?cc.Color.WHITE:cc.Color.BLACK.fromHEX("#666666"),this.buffLab.string=MyEnum.SkinDescs[e.id]||"\u65e0",t){this.unlockBtnN.active=!1,this.progressBar.node.active=!1,this.goStoreBtnN.active=!1,this.diamondBtnN.active=!1,this.adBtnN.active=!1,this.unlockLab.string="\u5df2\u89e3\u9501";var n=playerInfo.CurSkin,i=playerInfo.skinIsUnlock(e.id);this.useBtnN.active=i&&n[Number(e.e_id)-1]!=Number(e.id),this.addSkinBtn.active=!1}else{this.useBtnN.active=!1,this.unlockBtnN.active=!0,this.progressBar.node.active=!0;var a=playerInfo.getChipInfo(e.id);this.progressBar.progress=a.c/a.n,this.progressLab.string=a.c+"/"+a.n,console.log("d.c / d.n",a.c/a.n,a.c,a.n),Number(e.adTimes);var o=Number(e.diamond);0!=o?(this.goStoreBtnN.active=!1,this.diamondBtnN.active=!0,this.adBtnN.active=!1,this.unlockLab.string="\u94bb\u77f3\u8d2d\u4e70\u83b7\u5f97\u788e\u7247",cc.find("label",this.diamondBtnN).getComponent(cc.Label).string=o):(this.goStoreBtnN.active=!0,this.diamondBtnN.active=!1,this.adBtnN.active=!1,this.unlockLab.string="\u5546\u5e97\u8d2d\u4e70\u83b7\u5f97\u788e\u7247"),this.addSkinBtn.active=!0}this.info=e,this.heroShow.setId(e.id,function(){}),platformAdapter.aldSendEvent("showDescPanel",{desc:"\u76ae\u80a4\u4fe1\u606f\u754c\u9762_\u5c55\u793a"})},onClickedADBtn:function(){playerInfo.addSkinChip(this.info.id,5),this.show(this.info)},onClickedGoStoreBtn:function(){this.close(),Global.mainCtrl.clickedToggle(4),platformAdapter.aldSendEvent("onClickedGoStoreBtn",{desc:"\u76ae\u80a4\u4fe1\u606f\u754c\u9762_\u524d\u5f80\u5546\u5e97"})},onClickedDiamondBtn:function(){var e=this.info,t=Number(e.diamond);playerInfo.Diamond<t?Global.mainCtrl.openGetAssetPanel({type:MyEnum.ObjectType.Diamond}):(playerInfo.Diamond-=t,playerInfo.unlockSkin(e.id),this.show(this.info))},onClickedUseBtn:function(){var e=this.info,t=Number(e.e_id)-1;playerInfo.useSkin(t,e.id),this.close()}}),cc._RF.pop()},{basePanel:"basePanel",heroShow:"heroShow"}],skinPage:[function(e,t){"use strict";cc._RF.push(t,"db04e15ufFKEaDdUy7dFQCs","skinPage"),cc.Class({extends:e("basePage"),properties:{panelN:cc.Node,itemN:cc.Node,tipN:cc.Node},onEnable:function(){cc.director.on(MyEnum.CustomEvent.SkinUpdate,this.updateUI,this)},onDisable:function(){cc.director.off(MyEnum.CustomEvent.SkinUpdate,this.updateUI,this)},updateUI:function(){if(this.panels)for(var e=0;e<4;++e){var t=this.panels[e];this.updatePanelUI(t,e)}},start:function(){this.panels=[this.panelN];for(var e=0;e<4;++e){var t=this.panels[e];t||((t=cc.instantiate(this.panelN)).parent=this.panelN.parent,this.panels.push(t)),t.opacity=0,cc.tween(t).set({opacity:0}).delay(.1*e).to(.5,{opacity:255}).start()}for(var n=0;n<4;++n){var i=this.panels[n];this.initPanelUI(i,n),this.updatePanelUI(i,n)}this.tipN.active=!1},init:function(){if(this.panels){for(var e=0;e<4;++e){var t=this.panels[e];this.updatePanelUI(t,e)}platformAdapter.aldSendEvent("openSkinPage",{desc:"\u6253\u5f00\u76ae\u80a4\u754c\u9762"})}},initPanelUI:function(e,t){var n=this,i=cc.find("name",e).getComponent(cc.Label);i.node.color=cc.Color.WHITE.fromHEX(["#DB132F","#3589FF","#EFC82C","#EB52D3"][t]),i.string=MyEnum.RoleName[t+1];var a=cc.find("scrollview/view/content",e).children[0],o=Number(t)+1,s=[];for(var c in Config.skin){var l=Config.skin[c];Number(l.e_id)==o&&s.push(l)}for(var r=function(e){var i=a,o=s[e];0!=e&&((i=cc.instantiate(a)).parent=a.parent),i.info=o;var c=cc.find("icon",i).getComponent("heroShow");c.setId(o.id,function(){c.upAni(playerInfo.ELevels[t])}),i.on(cc.Node.EventType.TOUCH_END,n.clickedItem,n)},d=0;d<s.length;++d)r(d)},updatePanelUI:function(e,t){var n=cc.find("scrollview/view/content",e);for(var i in n.children){var a=n.children[i],o=a.info,s=cc.find("yes",a),c=playerInfo.CurSkin;s.active=c[t]==Number(o.id);var l=playerInfo.skinIsUnlock(o.id);cc.find("icon",a).color=l?cc.Color.WHITE:cc.Color.BLACK.fromHEX("#444444"),cc.find("icon",a).getComponent("heroShow").upAni(playerInfo.ELevels[t])}},hideTip:function(){this.tipN.active=!1,this.curSelectItem=null},clickedItem:function(e){var t=e.target,n=t.convertToWorldSpaceAR(cc.Vec2.ZERO);this.tipN.position=this.tipN.parent.convertToNodeSpaceAR(n).add(cc.v2(0,-50)),this.tipN.active=!0;var i=t.info,a=playerInfo.CurSkin,o=playerInfo.skinIsUnlock(i.id),s=cc.find("btn_select",this.tipN);s.active=o&&a[Number(i.e_id)-1]!=Number(i.id);var c=cc.find("btn_desc",this.tipN),l=cc.find("btn_desc2",this.tipN);if(o)c.active=!0,l.active=!1;else{c.active=!0,l.active=!0;var r=playerInfo.getChipInfo(i.id);cc.find("num",l).getComponent(cc.Label).string=r.c+"/"+r.n}this.curSelectItem==t&&s.active?this.onClickedSelectBtn():this.curSelectItem!=t||s.active||this.onClickedDescBtn(),this.curSelectItem=t,this.unschedule(this.hideTip),this.scheduleOnce(this.hideTip,3)},onClickedSelectBtn:function(){if(this.curSelectItem){var e=this.curSelectItem.info,t=Number(e.e_id)-1;playerInfo.useSkin(t,e.id),this.updatePanelUI(this.panels[t],t),this.tipN.active=!1,platformAdapter.aldSendEvent("onClickedSelectBtn",{desc:"\u76ae\u80a4\u754c\u9762_\u9009\u62e9\u76ae\u80a4",id:e.e_id})}},onClickedDescBtn:function(){var e=this;if(this.curSelectItem){var t=this.curSelectItem.info,n=Number(t.e_id)-1;platformAdapter.aldSendEvent("onClickedDescBtn",{desc:"\u76ae\u80a4\u754c\u9762_\u67e5\u770b\u76ae\u80a4",id:t.e_id}),Global.mainCtrl.openSkinDescPanel(this.curSelectItem.info,function(){e.updatePanelUI(e.panels[n],n)})}}}),cc._RF.pop()},{basePage:"basePage"}],storePage:[function(e,t){"use strict";cc._RF.push(t,"c2c10d+jmxBr7V0SenO+eHj","storePage"),cc.Class({extends:e("basePage"),properties:{goldN:cc.Node,diamondN:cc.Node,randomN:cc.Node,superN:cc.Node,itemN:cc.Node},getStoreData:function(){return platformAdapter.getCurDateStoreDate("storeData")||{gold:{max:8,cur:0},diamond:{max:8,cur:0},random:{max:8,cur:0},super:{max:8,cur:0}}},setStoreData:function(e){platformAdapter.setCurDateStoreDate("storeData",e)},onLoad:function(){cc.director.on(MyEnum.CustomEvent.UnlockSkin,this.init,this)},onDestroy:function(){cc.director.off(MyEnum.CustomEvent.UnlockSkin,this.init,this)},init:function(){console.log("Pinit init");var e=this.getStoreData();this.updateItem(this.goldN,e.gold),this.updateItem(this.diamondN,e.diamond),this.updateItem(this.randomN,e.random),this.updateItem(this.superN,e.super),this.goldReward=4*Utils.getAvgCost(),cc.find("name",this.goldN).getComponent(cc.Label).string="\u83b7\u5f97"+this.goldReward+"\u91d1\u5e01";var t=playerInfo.getValueByKey("store_refresh_Data")||{time:0,type:1};this.superN.rType=t.type,cc.find("exp",this.superN).getComponent(cc.Label).string="2~4\u4e2a"+["\u5965\u7279","\u6597\u7f57","\u897f\u6e38"][t.type-1]+"\u76ae\u80a4";var n=0;for(var i in this.items=this.items||[this.itemN],Config.skin){var a=Config.skin[i];if(!playerInfo.skinIsUnlock(a.id)){var o=this.items[n];o||((o=cc.instantiate(this.itemN)).parent=this.itemN.parent,this.items.push(o)),cc.find("name",o).getComponent(cc.Label).string=a.name+"\u788e\u7247x1",cc.find("btn_start/label",o).getComponent(cc.Label).string=a.store,o.info=a,n++}}for(var s=n;s<this.items.length;++s)this.items[s].active=!1;platformAdapter.aldSendEvent("openStorePage",{desc:"\u6253\u5f00\u5546\u5e97\u754c\u9762"})},update:function(){var e=playerInfo.getValueByKey("store_refresh_Data")||{time:0,type:0},t=+new Date;if(t>=e.time+72e5)e.time=t,e.type++,e.type>2&&(e.type=1),playerInfo.setValueByKey("store_refresh_Data",e),this.superN.rType=e.type,console.log("*****************",e.type),cc.find("exp",this.superN).getComponent(cc.Label).string="2~4\u4e2a"+["\u5965\u7279","\u6597\u7f57","\u897f\u6e38"][e.type-1]+"\u76ae\u80a4";else{var n=Math.floor((e.time+72e5-t)/1e3);cc.find("time",this.superN).getComponent(cc.Label).string="\u5237\u65b0\u65f6\u95f4 "+Utils.getFormatTime(n)}},updateItem:function(e,t){t.cur>=t.max?(cc.find("times",e).getComponent(cc.Label).string="\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u660e\u65e5\u518d\u6765",cc.find("shareVideoBtn",e).active=!1):(cc.find("times",e).getComponent(cc.Label).string="\u5269\u4f59\u6b21\u6570 "+(t.max-t.cur)+"/"+t.max,cc.find("shareVideoBtn",e).active=!0)},onClickedGoldBtn:function(e){var t=this;playerInfo.addObject({type:MyEnum.ObjectType.Coin,num:this.goldReward},!0),Global.mainCtrl.coinAction(e.target.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate),Utils.showHintText("coin_2",t.goldReward)},cc.find("Canvas/asset/gold/iconGold")),this.addOneTimes("gold"),platformAdapter.aldSendEvent("onClickedGoldBtn",{desc:"\u5546\u5e97\u754c\u9762_\u91d1\u5e01\u83b7\u53d6"})},onClickedDiamondBtn:function(e){var t=Math.floor(13*Math.random()+8);playerInfo.addObject({type:MyEnum.ObjectType.Diamond,num:t},!0),Global.mainCtrl.coinAction(e.target.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate),Utils.showHintText("diamond_2",t)},cc.find("Canvas/asset/diamond/iconGold")),this.addOneTimes("diamond"),platformAdapter.aldSendEvent("onClickedDiamondBtn",{desc:"\u5546\u5e97\u754c\u9762_\u94bb\u77f3\u83b7\u53d6"})},onClickedRandomBtn:function(){var e=[];e.push({type:MyEnum.ObjectType.Coin,num:Math.floor(Utils.getAvgCost()*(Math.random()+1))}),e.push({type:MyEnum.ObjectType.Diamond,num:1+Math.floor(4*Math.random())});var t=playerInfo.getRandomLockSkinId();for(var n in console.log("player ",t),e.push({type:MyEnum.ObjectType.Chip,num:Math.floor(3*Math.random())+2,id:t}),e)playerInfo.addObject(e[n],!0);Global.mainCtrl.openBoxPanel(e),this.addOneTimes("random"),platformAdapter.aldSendEvent("onClickedRandomBtn",{desc:"\u5546\u5e97\u754c\u9762_\u968f\u673a\u5b9d\u7bb1"})},addOneTimes:function(e){var t=this.getStoreData();t[e].cur++,this.setStoreData(t),this.init()},onCLickedSuperBtn:function(e){if(playerInfo.Diamond<50)Global.mainCtrl.openGetAssetPanel({type:MyEnum.ObjectType.Diamond});else{var t=e.target.parent.rType,n=[],i=playerInfo.getRandomLockSkinId(t);if(console.log("player ",i),i){for(var a in n.push({type:MyEnum.ObjectType.Chip,num:Math.floor(3*Math.random())+2,id:i}),playerInfo.Diamond-=50,n)playerInfo.addObject(n[a],!0);Global.mainCtrl.openBoxPanel(n),this.addOneTimes("super"),platformAdapter.aldSendEvent("onCLickedSuperBtn",{desc:"\u5546\u5e97\u754c\u9762_\u8d85\u7ea7\u5b9d\u7bb1"})}else Utils.showHintText("store_tip1")}},onClickedChipBtn:function(e){var t=e.target.parent.info,n=Number(t.store);console.log("*****************",playerInfo.Diamond,n),playerInfo.Diamond<n?Global.mainCtrl.openGetAssetPanel({type:MyEnum.ObjectType.Diamond}):(playerInfo.Diamond-=n,playerInfo.addSkinChip(t.id,1),Utils.showHintText("normal",t.name+"\u788e\u7247  x1"),platformAdapter.aldSendEvent("onClickedChipBtn",{desc:"\u5546\u5e97\u754c\u9762_\u788e\u7247\u8d2d\u4e70",id:t.id}))}}),cc._RF.pop()},{basePage:"basePage"}],studentPage:[function(e,n){"use strict";cc._RF.push(n,"26babcI7xVKro2q5RxT/+1r","studentPage");cc.Class({extends:e("basePage"),properties:{panelParentN:cc.Node,sfList:[cc.SpriteFrame],baseN:cc.Node,panelPrefab:cc.Prefab,heros:[cc.Node]},start:function(){var e=this,t=0;this.schedule(function(){var n=cc.instantiate(e.panelPrefab);n.parent=e.panelParentN,e.updateOneUI(t,n),e.updateOneData(t),t++,n.on(cc.Node.EventType.TOUCH_END,function(){e.playLevelUpAni(n)}),n.opacity=0,cc.tween(n).set({opacity:0}).to(.5,{opacity:255}).start()},.1,3,.002),cc.director.on(MyEnum.CustomEvent.SkinUpdate,this.updateUI,this)},onDestroy:function(){cc.director.off(MyEnum.CustomEvent.SkinUpdate,this.updateUI,this)},init:function(){this.updateUI(),platformAdapter.aldSendEvent("openStudentPage",{desc:"\u6253\u5f00\u5347\u7ea7\u754c\u9762"})},updateOneUI:function(e,t){var n=["#701414","#1B3561","#8B621A","#4E1364"],i=e+1;cc.find("lvLab",t).color=cc.Color.WHITE.fromHEX(["#DB132F","#3589FF","#EFC82C","#EB52D3"][e]);for(var a=t.getComponentsInChildren(cc.LabelOutline),o=0;o<6;++o)a[o].color=cc.Color.WHITE.fromHEX(n[e]);Utils.loadBundle("main_a",function(e,n){n.load("panel/studentPage/res/name_"+i,cc.SpriteFrame,function(e,n){cc.find("name_1",t).getComponent(cc.Sprite).spriteFrame=n}),n.load("panel/studentPage/res/bb"+i,cc.SpriteFrame,function(e,n){cc.find("bb1",t).getComponent(cc.Sprite).spriteFrame=n})});var s=new cc.Component.EventHandler;s.target=this.node,s.component="studentPage",s.handler="onClickedLevelUpBtn",cc.find("button",t).getComponent(cc.Button).clickEvents=[s];var c=new cc.Component.EventHandler;c.target=this.node,c.component="studentPage",c.handler="onClickedClearTimeBtn",cc.find("levelUpBtn",t).getComponent("shareVideoBtn").successEvents=[c];var l=new cc.Component.EventHandler;l.target=this.node,l.component="studentPage",l.handler="onClickedAdvanceBtn",cc.find("advanceBtn",t).getComponent(cc.Button).clickEvents=[l]},updateOneData:function(e){var t=playerInfo.ELevels[e],n=Number(e)+1;t>Config["student_"+n].length&&(t=Config["student_"+n].length);var i=Config["student_"+n][t-1],a=this.panelParentN.children[e];a.index=e,this.updateElementUI(n,i,a)},updateUI:function(){for(var e in playerInfo.ELevels,this.panelParentN.children)this.updateOneData(e)},updateElementUI:function(e,n,i){var a=playerInfo.getAdditive(e),o=Utils.getStudentInfo({id:e,eLevel:n.lv},a);cc.find("lvLab",i).getComponent(cc.Label).string="Lv."+n.lv,cc.find("attackLab",i).getComponent(cc.Label).string=o.atk,cc.find("atkSpeedLab",i).getComponent(cc.Label).string=o.defense,cc.find("hpLab",i).getComponent(cc.Label).string=o.hp;var s=n.cost;1==Number(n.cost_type)&&(s=Math.floor(s*playerInfo.getLevelUpCoinRate())),cc.find("button/Background/cost",i).getComponent(cc.Label).string=s;var c=cc.find("icon",i).getComponent("heroShow"),l=playerInfo.CurSkin[e-1];c.setId(l,function(){c.upAni(n.lv)});var r=cc.find("button",i),d=cc.find("levelUpBtn",i),h=cc.find("advanceBtn",i),p="student_"+e;if(n.lv>=Config[p].length)return r.active=!1,d.active=!1,void(h.active=!1);if(n.lv%5==0){var u=e-1,f=playerInfo.getValueByKey("advance_"+u)||{state:1,time:+new Date+6e4*t};console.log("advance_ get ","advance_"+u,{state:1,time:+new Date+18e4}),1==f.state?(r.active=!1,d.active=!0,h.active=!1):2==f.state?(r.active=!1,d.active=!1,h.active=!0):(r.active=!0,d.active=!1,h.active=!1)}else r.active=!0,d.active=!1,h.active=!1},onClickedAdvanceBtn:function(e){var t=e.target.parent.index,n=playerInfo.eLevelUp(t);this.updateUI(),this.playLevelUpAni(this.panelParentN.children[t]),this.updateOneData(t),Global.mainCtrl.openTupoPanel({index:t,level:n-1,hero:this.heros[t]})},onClickedClearTimeBtn:function(e){var t=e.target.parent.parent.index;console.log("onClickedClearTimeBtn",t),playerInfo.setValueByKey("advance_"+t,{state:2}),this.updateOneData(t)},update:function(){for(var e in this.panelParentN.children){var t=this.panelParentN.children[e];if(playerInfo.ELevels[e]%5==0){var n=playerInfo.getValueByKey("advance_"+e);if(1==n.state){var i=+new Date;if(i>n.time)n.state=2,playerInfo.setValueByKey("advance_"+e,n),this.updateOneData(e);else{var a=Math.floor((n.time-i)/1e3);cc.find("levelUpBtn/btn_start/time",t).getComponent(cc.Label).string=Utils.getFormatTime(a)}}}}},playLevelUpAni:function(e){cc.Tween.stopAllByTarget(e),cc.tween(e).set({scaleX:1,scaleY:1}).by(.1,{scaleX:-.05,scaleY:.05}).by(.1,{scaleX:.1,scaleY:-.1}).by(.1,{scaleX:-.05,scaleY:.05}).start()},onClickedLevelUpBtn:function(e){var t=e.target.parent.index,n=playerInfo.ELevels[t],i=Config["student_"+(Number(t)+1)][n-1],a=Number(i.cost);if(1==Number(i.cost_type)){if(a=Math.floor(a*playerInfo.getLevelUpCoinRate()),playerInfo.Gold<a)return void Global.mainCtrl.openGetAssetPanel({type:MyEnum.ObjectType.Coin});playerInfo.Gold-=a}else{if(playerInfo.Diamond<a)return void Global.mainCtrl.openGetAssetPanel({type:MyEnum.ObjectType.Diamond});playerInfo.Diamond-=a}Utils.showHintText("levelup_success"),playerInfo.eLevelUp(t)%5==0&&(playerInfo.setValueByKey("advance_"+t,{state:1,time:+new Date+36e5}),console.log("advance_ set ","advance_"+t,{state:1,time:+new Date+36e5})),this.updateUI(),this.playLevelUpAni(this.panelParentN.children[t]);var o=MyEnum.RoleName[Number(t)+1];platformAdapter.aldSendEvent("onClickedLevelUpBtn",{desc:"\u517b\u6210_"+o+"\u5347\u7ea7",missionId:playerInfo.MissionID})},onClickedSkinBtn:function(e,t){Global.mainCtrl.openSkinPanel(Number(t)),platformAdapter.aldSendEvent("onClickedSkinBtn",{desc:"\u6309\u94ae\u70b9\u51fb_\u5347\u7ea7\u754c\u9762_\u76ae\u80a4",missionId:playerInfo.MissionID})}}),cc._RF.pop()},{basePage:"basePage"}],studentTalk:[function(e,t){"use strict";cc._RF.push(t,"3138a0UR4ZIk4+LcYQVQQUW","studentTalk"),cc.Class({extends:cc.Component,properties:{talkLab:cc.Label},showTalk:function(e,t){var n=this;this.talkLab.string=t;var i=this.getComponent(cc.Animation);i.on(cc.Animation.EventType.FINISHED,function(){n.node.destroy()});var a=e?"talkLeft":"talkRight";i.play(a)},showTalk2:function(e,t){this.talkLab.string=t},showTalk3:function(e,t,n){this.talkLab.string=t;var i=this.getComponent(cc.Animation);i.on(cc.Animation.EventType.FINISHED,function(){n&&n()});var a=e?"talkLeft":"talkRight";i.play(a)}}),cc._RF.pop()},{}],teacher:[function(e,t){"use strict";cc._RF.push(t,"e8bd4ZKCKFLn6ASjMwDmYZo","teacher");var n=e("Sync"),i={start:[{str:"\u554a\u54c8\uff0c\u73ed\u7ea7\u6765\u4e86\u65b0\u540c\u5b66\uff0c\u6b22\u8fce\u6b22\u8fce",delay:2},{str:"\u5148\u6765\u719f\u6089\u4e00\u4e0b\u6e38\u620f\u5427\uff0c\u70b9\u51fb\u5f00\u59cb\u6218\u6597"}],battle:[{str:"\u62d6\u52a8\u5b66\u751f,\u7ec4\u6210\u4e09\u4e2a\u8fde\u5728\u4e00\u8d77\u5373\u53ef\u5408\u6210",delay:2}]};cc.Class({extends:cc.Component,properties:{lab:cc.Label},startTalk:function(e,t){this.talks=i[e],this.index=-1,this.endCb=t,this.startNextTalk()},startNextTalk:function(){this.index++;var e=this.talks[this.index];if(!e)return this.node.active=!1,void(this.endCb&&this.endCb());this.node.active=!0,this.show(e,this.startNextTalk.bind(this))},show:function(e,t){var i=this;this.lab.string=e.str,n.series([this.playEnter.bind(this),function(t){i.playWait(e.delay,t)},this.playExit.bind(this)],t)},playEnter:function(e){var t=this.getComponent(cc.Animation);t.off(cc.Animation.EventType.FINISHED),t.on(cc.Animation.EventType.FINISHED,function(){e&&e()}),t.play("teacherEnter")},playWait:function(e,t){setTimeout(function(){t&&t()},1e3*(e||1))},playExit:function(e){var t=this.getComponent(cc.Animation);t.off(cc.Animation.EventType.FINISHED),t.on(cc.Animation.EventType.FINISHED,function(){e&&e()}),t.play("teacherExit")}}),cc._RF.pop()},{Sync:void 0}],tiliPanel:[function(e,t){"use strict";cc._RF.push(t,"fe4bcdKgrlIm6BU1QJw2wIA","tiliPanel"),cc.Class({extends:e("basePanel"),properties:{timesLab:cc.Label},show:function(){var e=platformAdapter.getCurDateStoreDate("unchanged_times")||0;this.timesLab.string=e+"/2",platformAdapter.aldSendEvent("showtiliPanel",{desc:"\u4f53\u529b\u754c\u9762_\u5c55\u793a"})},onClickedMaxBtn:function(){playerInfo.fullPhysical(),this.close(),platformAdapter.aldSendEvent("onClickedMaxBtn",{desc:"\u4f53\u529b\u754c\u9762_\u52a0\u6ee1\u4f53\u529b"})},onClickedUnchangedBtn:function(){var e=platformAdapter.getCurDateStoreDate("unchanged_times")||0;if(e++,platformAdapter.setCurDateStoreDate("unchanged_times",e),this.timesLab.string=e+"/2",e>=2){var t=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1).getTime(),n=+new Date;playerInfo.physicalUnchanged(t-n),this.close(),Utils.showHintText("phy_tip2")}else console.log("phy_tip1phy_tip1phy_tip1"),Utils.showHintText("phy_tip1");platformAdapter.aldSendEvent("onClickedUnchangedBtn",{desc:"\u4f53\u529b\u754c\u9762_\u65e0\u9650\u4f53\u529b"})}}),cc._RF.pop()},{basePanel:"basePanel"}],tipPanel:[function(e,t){"use strict";cc._RF.push(t,"7a762GvhIhAa72sIlTeoU6g","tipPanel"),cc.Class({extends:e("basePanel"),properties:{},start:function(){},show:function(e,t){this.yesCb=e,this.noCb=t},onClickedYesBtn:function(){this.close(),this.yesCb&&this.yesCb()},onClickedNoBtn:function(){this.close(),this.noCb&&this.noCb()}}),cc._RF.pop()},{basePanel:"basePanel"}],tupoPanel:[function(e,t){"use strict";cc._RF.push(t,"c976f2a5T5CLJXXTe4BJCF1","tupoPanel"),cc.Class({extends:e("basePanel"),properties:{beforeN:cc.Node,afterN:cc.Node},start:function(){},show:function(e){console.log("level ********************");var t=e.index,n=Number(t)+1,i=e.level,a=playerInfo.CurSkin[n-1],o=cc.find("icon",this.beforeN).getComponent("heroShow");o.setId(a,function(){o.upAni(i)});var s=cc.find("icon",this.afterN).getComponent("heroShow");s.setId(a,function(){s.upAni(i+1)});var c=playerInfo.getAdditive(n),l=Utils.getStudentInfo({id:n,eLevel:i},c),r=Utils.getStudentInfo({id:n,eLevel:i+1},c),d=function(e,t){var n=cc.find("New RichText",e).getComponent(cc.RichText);console.log("attr.atk, attr.defense, attr.hp",t.atk,t.defense,t.hp,t),n.string="\u653b\u51fb\uff1a<size=24>{0}</size>\n\u9632\u5fa1\uff1a<size=24>{1}</size>\n\u8840\u91cf\uff1a<size=24>{2}</size>".format(t.atk,t.defense,t.hp)};d(this.beforeN,l),d(this.afterN,r),platformAdapter.aldSendEvent("openToPoPanel",{desc:"\u7a81\u7834\u754c\u9762_\u5c55\u793a"})}}),cc._RF.pop()},{basePanel:"basePanel"}],turntablePanel:[function(e,t){"use strict";cc._RF.push(t,"71b84vXbwBHraHIczr5zKU+","turntablePanel"),cc.Class({extends:e("basePanel"),properties:{lights:{default:[],type:cc.Node},itemN:cc.Node,turnN:cc.Node,lanuchBtnN:cc.Node,startBtnN:cc.Node},onLoad:function(){for(var e in this.lights)this.lights[e].runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5),cc.rotateBy(0,15),cc.callFunc(function(){}))))},start:function(){},onEnable:function(){this._super(),this.lanuchBtnN.active=!0;var e=playerInfo.getValueByKey("turntable_times")||0;this.startBtnN.active=0==e,this.lanuchBtnN.active=e>0;var t=playerInfo.ELevels,n=0;for(var i in t)n+=t[i];(n=Math.floor(n/4))>Config.student_1.length&&(n=Config.student_1.length);var a=Config.student_1[n-1],o=Math.floor(a.cost);this.reward=[{type:1,num:o,weight:70},{type:2,num:100,weight:1},{type:1,num:2*o,weight:10},{type:2,num:50,weight:2},{type:1,num:4*o,weight:3},{type:2,num:20,weight:3},{type:1,num:10*o,weight:1},{type:2,num:10,weight:10}],playerInfo.skinIsUnlock(9)||(this.reward[1]={type:3,num:5,id:9,weight:1},this.reward[6]={type:3,num:2,id:9,weight:1}),this.itemList=this.itemList||[this.itemN];for(var s=0;s<8;++s){var c=this.itemList[s];c||((c=cc.instantiate(this.itemN)).parent=this.itemN.parent,this.itemList.push(c)),c.angle=45*(s+.5);var l=this.reward[s];if(cc.find("num",c).getComponent(cc.Label).string=l.num,l.type==MyEnum.ObjectType.Chip){var r=Config.skin[l.id-1];cc.find("num",c).getComponent(cc.Label).string=r.name+"\u788e\u7247\nx"+l.num;var d=cc.find("icon2",c).getComponent("heroShow");d.node.active=!0,cc.find("icon_gold",c).active=!1,d.setId(l.id,function(){})}else cc.find("icon2",c).active=!1,cc.find("icon_gold",c).active=!0,Utils.getAssetShowSf(l.type,cc.find("icon_gold",c).getComponent(cc.Sprite))}platformAdapter.aldSendEvent("openTumTablePanel",{desc:"\u8f6c\u76d8\u754c\u9762_\u5c55\u793a"})},startTurn:function(e){Global.openMask();var t=100*Math.random(),n=0;for(var i in this.reward){if(t<this.reward[i].weight){n=Number(i);break}t-=this.reward[i].weight}console.log(n,"index");var a=this.turnN.angle;for(a+=1440;;){var o=((a+=45)%360+360)%360;if(7-Math.floor(o/45)==n)break}var s=a%45;console.log(this.turnN.angle,a,"***************"),s<15?a+=15:s>30&&(a-=15),console.log("angle",a,"vvvvvvvvvvvvvvvvv",this.turnN.angle,this.turnN),cc.tween(this.turnN).to(3,{angle:a},{easing:"sineInOut"}).call(function(){Global.closeMask(),e&&e()}).start()},onClickedTurnBtn:function(){var e=this;platformAdapter.aldSendEvent("TurnTableStart",{desc:"\u8f6c\u76d8\u754c\u9762_\u5f00\u59cb\u65cb\u8f6c"}),this.startBtnN.active&&platformAdapter.aldSendEvent("TurnTableStartVideo",{desc:"\u8f6c\u76d8\u754c\u9762_\u89c6\u9891\u5f00\u59cb\u65cb\u8f6c"}),this.lanuchBtnN.active=!1,this.startBtnN.active=!1,this.startTurn(function(){var t=(e.turnN.angle%360+360)%360,n=7-Math.floor(t/45),i=e.reward[n];if(console.log(t,n,i,e.reward,"angle ***********"),1==i.type)playerInfo.Gold+=i.num,Utils.showHintText("coin_2",i.num);else if(i.type==MyEnum.ObjectType.Chip){var a=Config.skin[i.id-1];playerInfo.addSkinChip(i.id,i.num),Utils.showHintText("normal",a.name+"\u788e\u7247  x"+i.num)}else playerInfo.Diamond+=i.num,Utils.showHintText("diamond_2",i.num);var o=playerInfo.getValueByKey("turntable_times")||0;playerInfo.setValueByKey("turntable_times",o+1),e.lanuchBtnN.active=!0,e.startBtnN.active=!1})}}),cc._RF.pop()},{basePanel:"basePanel"}],wujinoverPanel:[function(e,t){"use strict";cc._RF.push(t,"5cc1fMb7WNH0qoRctVf1QHR","wujinoverPanel"),cc.Class({extends:e("basePanel"),properties:{curLabel:cc.Label,highestLab:cc.Label,goldLab:cc.Label,diamondLab:cc.Label},show:function(e){var t=playerInfo.getValueByKey("endless_highest")||0,n=e>t;n&&(t=e),e>=MyEnum.EndlessMaxLv?(this.curLabel.string="\u7b2c{0}\u7ae0\u901a\u5173\uff08\u65b0\u7eaa\u5f55\uff09".format(playerInfo.EndlessLevel-1),this.highestLab.string="\u7b2c{0}\u7ae0\u901a\u5173".format(playerInfo.EndlessLevel-1),playerInfo.setValueByKey("endless_highest",0)):(this.curLabel.string="\u7b2c{0}\u7ae0 \u7b2c{1}\u5c42".format(playerInfo.EndlessLevel,e)+(n?"\uff08\u65b0\u7eaa\u5f55\uff09":""),this.highestLab.string="\u7b2c{0}\u7ae0 \u7b2c{1}\u5c42".format(playerInfo.EndlessLevel,t),playerInfo.setValueByKey("endless_highest",t)),this.reward=Math.floor(Utils.getAvgCost()*e/5*(.8+.2*playerInfo.EndlessLevel)),this.reward2=Math.floor(e/2*(.8+.2*playerInfo.EndlessLevel)),this.goldLab.string=this.reward,this.diamondLab.string=this.reward2},onClickedGetBtn:function(){var e=this;this.coinAction(this.goldLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){playerInfo.Gold+=e.reward,playerInfo.Diamond+=e.reward2,Global.gotoPage=3,Utils.switchScene("main")},cc.find("asset/gold/iconGold",this.node)),this.reward2>0&&this.coinAction(this.diamondLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){},cc.find("asset/diamond/iconGold",this.node))},onCLickedDoubleBtn:function(){var e=this;this.coinAction(this.goldLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){playerInfo.Gold+=2*e.reward,playerInfo.Diamond+=2*e.reward2,Global.gotoPage=3,Utils.switchScene("main")},cc.find("asset/gold/iconGold",this.node)),this.reward2>0&&this.coinAction(this.diamondLab.node.convertToWorldSpaceAR(cc.Vec2.ZERO),5,null,function(){},cc.find("asset/diamond/iconGold",this.node))},coinAction:function(e,t,n,i,a){Global.openMask();for(var o=e,s=a.convertToWorldSpaceAR(cc.Vec2.ZERO),c=Math.random()*Math.PI-3*Math.PI/4,l=2*Math.PI/t,r=function(e){var r=cc.instantiate(a);r.parent=cc.director.getScene(),r.position=o,r.active=!0;var d=c+l*e,h=50*Math.random()+50,p=cc.v2(Math.cos(d),Math.sin(d)).mul(h),u=p.add(o),f=p.mul(2).add(o);r.runAction(cc.sequence(cc.moveTo(.15,u).easing(cc.easeSineOut()),cc.bezierTo(.2+.05*e,[u,f,s]).easing(cc.easeInOut(1)),cc.callFunc(function(){a.stopAllActions(),a.runAction(cc.sequence(cc.scaleTo(.05,1.4),cc.scaleTo(.1,1))),r.destroy(),Utils.invokeCallback(n),e==t-1&&(Utils.invokeCallback(i),Global.closeMask())})))},d=0;d<t;++d)r(d)}}),cc._RF.pop()},{basePanel:"basePanel"}],wujinvictoryPanel:[function(e,t){"use strict";cc._RF.push(t,"c0b0bzRDU5OkohLnVZj3e8M","wujinvictoryPanel"),cc.Class({extends:e("basePanel"),properties:{buffParentN:cc.Node,bgs:[cc.SpriteFrame],icons:[cc.SpriteFrame]},onEnable:function(){this._super(),platformAdapter.aldSendEvent("openWuJinVictory",{desc:"\u754c\u9762\u5c55\u793a_\u65e0\u5c3dBUFF",missionId:playerInfo.MissionID})},show:function(e,t){var n=Utils.clone(Config.shiLian),i=[0,10,25];for(var a in n){var o=n[a],s=i[Number(o.type)-1]*(e.level-1);o.weight=Number(o.weight)+s}var c=0;for(var l in n)c+=Number(n[l].weight);for(var r=[],d=0;d<3;++d){var h=Math.random()*c;for(var p in n){var u=n[p];if((h-=Number(u.weight))<0){n[p]=n[n.length-1-d],c-=Number(u.weight),r.push(u),this.updateItem(this.buffParentN.children[d],u);break}}}this.kv=e,this.data=r,this.cb=t},updateItem:function(e,t){var n,i=Number(t.e_id);n=1==i?0:2==i?1:4==i?2:8==i?3:4,e.getComponent(cc.Sprite).spriteFrame=this.bgs[n],cc.find("icon",e).getComponent(cc.Sprite).spriteFrame=this.icons[n],cc.find("name",e).getComponent(cc.Label).string=MyEnum.RoleName[n+1],cc.find("desc",e).getComponent(cc.Label).string=t.desc.format(t.value),"addRole"==t.att_type?cc.find("title",e).getComponent(cc.Label).string=MyEnum.RoleName[n+1]+"\u589e\u52a0":cc.find("title",e).getComponent(cc.Label).string=MyEnum.RoleName[n+1]+"\u5f3a\u5316",e.info=t},onClickedOneBtn:function(e){var t=e.target.info;this.cb&&this.cb([t]),this.close(),platformAdapter.aldSendEvent("onClickedOneBtn",{desc:"\u65e0\u5c3dBUFF_\u9009\u62e9\u4e00\u4e2a",missionId:playerInfo.MissionID})},onClickedAllBtn:function(){var e;null==(e=this.cb)||e.call(this,this.data),this.close(),platformAdapter.aldSendEvent("onClickedAllBtn",{desc:"\u65e0\u5c3dBUFF_\u9009\u62e9\u6240\u6709",missionId:playerInfo.MissionID})},onClickedChangeBtn:function(){platformAdapter.aldSendEvent("onClickedChangeBtn",{desc:"\u65e0\u5c3dBUFF_\u66f4\u6362\u5217\u8868",missionId:playerInfo.MissionID}),this.show(this.kv,this.cb)}}),cc._RF.pop()},{basePanel:"basePanel"}],zaixianPanel:[function(e,t){"use strict";cc._RF.push(t,"d1f64b2FNRJfbQ2eMxATiZc","zaixianPanel"),cc.Class({extends:e("basePanel"),properties:{rewardParentN:cc.Node,bgSfs:{default:[],type:cc.SpriteFrame},getBtnN:cc.Node,getDoubleBtnN:cc.Node,iconSp:cc.Sprite,numLab:cc.Label,timeLab:cc.Label},start:function(){},onEnable:function(){this._super(),platformAdapter.aldSendEvent("openZaixianPanel",{desc:"\u5728\u7ebf\u754c\u9762_\u5c55\u793a"})},update:function(){var e=playerInfo.getOnlineData();this.timeLab.string="\u5728\u7ebf\u65f6\u95f4:  "+Utils.getFormatTime(e.time);var t=null;for(var n in this.reward=null,this.rewardParentN.children){var i=this.rewardParentN.children[n],a=MyEnum.OnlineConfig[n],o=cc.find("iconDiamond",i).getComponent(cc.Sprite);Utils.getAssetShowSf(a.type,o);var s=cc.find("timeLab",i).getComponent(cc.Label);s.string=a.time/60+"\u5206\u949f";var c=cc.find("bg_asset",i).getComponent(cc.Sprite),l=cc.find("icon_get",i);e.cur>n?(l.active=!0,c.spriteFrame=this.bgSfs[0],s.string="\u5df2\u9886\u53d6",s.node.color=cc.Color.BLACK.fromHEX("#4B4B4B")):(s.node.color=cc.Color.BLACK,l.active=!1,null==t?(t=n,Utils.getAssetShowSf(a.type,this.iconSp),this.numLab.string=a.num,a.time<=e.time?(c.spriteFrame=this.bgSfs[2],this.reward=a,s.string="\u53ef\u9886\u53d6"):c.spriteFrame=this.bgSfs[1]):a.time<=e.time?(c.spriteFrame=this.bgSfs[0],s.string="\u53ef\u9886\u53d6"):c.spriteFrame=this.bgSfs[1])}this.getBtnN.active=null!=this.reward,this.getDoubleBtnN.active=null!=this.reward},getReward:function(e){void 0===e&&(e=1),playerInfo.getOnlineData().cur++,this.show(),playerInfo.addObject({type:this.reward.type,num:this.reward.num*e},!0),Global.mainCtrl.coinAction(this.iconSp.node.convertToWorldSpaceAR(cc.Vec2.ZERO),5*e,null,function(){cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},1==this.reward.type?cc.find("Canvas/asset/gold/iconGold"):cc.find("Canvas/asset/diamond/iconGold"))},onClickedGetBtn:function(){this.getReward(1),platformAdapter.aldSendEvent("onClickedGetZaixianBtn",{desc:"\u5728\u7ebf\u754c\u9762_\u83b7\u53d6\u5956\u52b1"})},onClickedGetDoubleBtn:function(){this.getReward(2),platformAdapter.aldSendEvent("onClickedGetZaixianDoubleBtn",{desc:"\u5728\u7ebf\u754c\u9762_\u53cc\u500d\u83b7\u53d6\u5956\u52b1"})}}),cc._RF.pop()},{basePanel:"basePanel"}],zhuxianbuffPanel:[function(e,t){"use strict";cc._RF.push(t,"f0624+vvZ9JD7Z01wP16Y86","zhuxianbuffPanel"),cc.Class({extends:e("basePanel"),properties:{buffParentN:cc.Node,bgs:[cc.SpriteFrame],icons:[cc.SpriteFrame]},show:function(e){for(var t=Config.buff,n=[],i=0;i<t.length;++i)n.push(i);for(var a=[],o=n.length,s=0;s<this.buffParentN.children.length;++s){var c=Math.floor(Math.random()*o),l=t[n[c]];a.push(l),n[c]=n[o-1],o--,this.updateItem(this.buffParentN.children[s],l)}this.data=a,this.cb=e,platformAdapter.aldSendEvent("openZaixianBuffPanel",{desc:"\u7ade\u6280\u573aBUFF\u754c\u9762_\u5c55\u793a"})},updateItem:function(e,t){var n,i=Number(t.e_id);n=1==i?0:2==i?1:4==i?2:8==i?3:4,console.log(i,"updateItem e_id",n),e.getComponent(cc.Sprite).spriteFrame=this.bgs[n],cc.find("icon",e).getComponent(cc.Sprite).spriteFrame=this.icons[n],cc.find("name",e).getComponent(cc.Label).string=MyEnum.RoleName[n+1],cc.find("desc",e).getComponent(cc.Label).string=t.desc.format(t.value),cc.find("title",e).getComponent(cc.Label).string=MyEnum.RoleName[n+1]+"\u5f3a\u5316",e.info=t},onClickedBuffBtn:function(e){var t=e.target.parent.parent.info;console.log("onClickedBuffBtn *********",t),this.node.active=!1,this.cb&&this.cb(t),platformAdapter.aldSendEvent("onClickedBuffBtn",{desc:"\u7ade\u6280\u573aBUFF\u754c\u9762_\u83b7\u53d6BUFF"})},onClickedStartBtn:function(){this.node.active=!1,this.cb&&this.cb()}}),cc._RF.pop()},{basePanel:"basePanel"}]},{},["battleMeeting","battleMeetingReward","bonus","bonusPanel","bossPanel","boxPanel","chaojikaijuPanel","coloredEggsPanel","followPanel","ani2","ani3","geniusPage","geniusPage_old","getAssetPanel","guajiPanel","guideCtrl","grade","matchPanel","moreGame","panelMoreGame","signPanel","skinDescPanel","skinPage","storePage","studentPage","tiliPanel","tipPanel","tupoPanel","turntablePanel","wujinoverPanel","wujinvictoryPanel","zaixianPanel","zhuxianbuffPanel","shareVideoBtn","repeatForever","FakeNames","audioCtrl","basePanel","bossChallenge","assetShow","chapters","moveT","equipInfo","heroShow","mainCtrl","mask_open","moreGameItem","basePage","battlePage","studentTalk","teacher"]);