window.__require=function t(e,n,a){function i(s,r){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){return i(e[s][1][t]||t)},d,d.exports,t,e,n,a)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<a.length;s++)i(a[s]);return i}({ASPlatform:[function(t,e){"use strict";cc._RF.push(e,"beccd+bqdZLVq2XpWtPG7/z","ASPlatform"),cc.Class({extends:t("BasePlatform"),properties:{interstTime:(new Date).getTime()},isNative:function(){return!1},startLogin:function(t){Utils.invokeCallback(t),GCommon.OnlineInfo.jumpList=[]},startPlayVideo:function(t,e,n){this.interstTime=(new Date).getTime(),console.log("this.interstTime          "+this.interstTime),window.watchVideoSuc=t,window.watchVideoErr=n,window.watchVideoFail=e,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Game/GameUtils","showRewardVideoAd","(Ljava/lang/String;)V","")},showInterstitialAd:function(){var t=(new Date).getTime();this.interstTime||(this.interstTime=t),console.log("this.interstTime "+this.interstTime),t-this.interstTime>=3e5&&(this.interstTime=t,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Game/GameUtils","showInterstitialAd","(Ljava/lang/String;)V",""))},aldSendEvent:function(t,e){void 0===e&&(e={});var n=JSON.stringify(e);cc.sys.platform==cc.sys.ANDROID&&(console.log("\u57cb\u70b9--------------------------",t),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Game/GameUtils","onEvent","(Ljava/lang/String;Ljava/lang/String;)V",t,n))},isShowMore:function(){return!1}}),cc._RF.pop()},{BasePlatform:"BasePlatform"}],AdManager:[function(t,e){"use strict";cc._RF.push(e,"435a2azO2hDj4Ybfx838xyf","AdManager");var n=function(t){var e=t.windowWidth,n=t.windowHeight,a=cc.winSize.width,i=cc.winSize.height,o=t.pos,s=t.anchor,r=t.realWidth,c=t.realHeight,l=cc.v2(o.x/a*e,n-o.y/i*n);return{left:Math.min(Math.max(l.x-s.x*r,2),e-r-2),top:Math.min(Math.max(l.y-(1-s.y)*c,2),n-c-2)}},a=function(t,e){var n=this;this.ad=e,this.showTime=0,this.startShowTime=null,this.isShow=!1,this.lastShowState=1,this.delegate=t,this.ad.onError(function(t){console.log("AdNode err",t)}),this.ad.onClose&&this.ad.onClose(function(){n.delegate.removeAdNode(n)})};a.prototype.destroy=function(){this.ad.destroy()},a.prototype.resetPos=function(t){if(this.ad.style&&this.ad.style.realWidth){t.realWidth=this.ad.style.realWidth,t.realHeight=this.ad.style.realHeight;var e=n(t);this.ad.style.left=e.left,this.ad.style.top=e.top}},a.prototype.show=function(){var t=this;return new Promise(function(e,n){t.resetPos(t.delegate.info),t.ad.show().then(function(){t.isShow||t.ad.hide(),t.lastShowState=1,e()}).catch(function(){t.lastShowState=2,n()}),t.startShowTime=+new Date,t.isShow=!0})},a.prototype.hide=function(){this.isShow&&(this.ad.hide(),this.showTime+=+new Date-this.startShowTime,this.isShow=!1)};var i=function(t,e,n,a,i){void 0===a&&(a=1e4),void 0===i&&(i=2),this.info=t,this.createFun=e,this.maxNum=i,this.showTime=n,this.lock=!1,this.checkTime=a,this.adList=[],this.curAdNode=null,this.isShow=!1};i.prototype={createAd:function(){var t=this;return new Promise(function(e,n){t.lock=!0;var a=t.createFun(t.info),i=function(e){t.lock=!1,console.log(t.name,"AdManager  loadErr",e),a.destroy(),n()};a.onLoad(function n(){t.lock=!1,console.log(t.name,"AdManager  onLoad"),a.offLoad(n),a.offError(i),e(a)}),a.onError(i)})},checkAdBuffer:function(){var t=this;if(!this.lock)if(this.adList.length<=0)this.createAd().then(function(e){t.insertAd(e)}).catch(function(){setTimeout(function(){t.checkAdBuffer()},t.checkTime)});else{var e=!0;if(this.adList.forEach(function(n){n.showTime<t.showTime&&(e=!1)}),!e)return;this.createAd().then(function(e){t.insertAd(e)})}},insertAd:function(t){this.adList.length>=this.maxNum&&this.adList.shift().destroy();var e=new a(this,t);this.adList.push(e),console.log(this.name,"AdManager insertAd",this.adList.length)},removeAdNode:function(t){for(var e in this.adList)if(this.adList[e]==t){this.adList.splice(e,1),t.destroy();break}this.checkAdBuffer()},getAdNode:function(){if(!(this.adList.length<=0)){var t=null,e=null;if(this.adList.forEach(function(n,a){2!=n.lastShowState&&(null==t||n.showTime<t)&&(t=n.showTime,e=a)}),null!=e)return this.adList[e]}},resetAdNodeState:function(){this.adList.forEach(function(t){t.lastShowState=1})},showAd:function(t,e){var n=this;if(void 0===t&&(t=null),void 0===e&&(e=!0),e)this.isShow=!0;else if(!this.isShow)return;return new Promise(function(e,a){if(n.curAdNode)e();else{var i=n.getAdNode();if(!i)return n.resetAdNodeState(),void a();i.show(t).then(function(){e()}).catch(function(i){n.curAdNode=null,console.log(i,"err"),n.showAd(t,!1).then(function(){e()}).catch(function(){a()})}),n.curAdNode=i}})},hideAd:function(){this.isShow=!1,this.curAdNode&&(this.curAdNode.hide(),this.curAdNode=null,this.checkAdBuffer())},updateShowState:function(t){var e=this;return new Promise(function(n,a){t?e.showAd().then(function(){e.isShow?n():e.hideAd()}).catch(function(){e.isShow&&a()}):(e.hideAd(),n())})}};var o={createBannerAd:function(t){var e=o.getSystemInfo(),n=e.windowWidth,a=e.windowHeight;t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight;var i=300;return n/a<640/1136&&(i=.90625*n),wx.createBannerAd({adUnitId:t.id,style:{top:0,left:0,width:i}})},createGridAd:function(t){var e=o.getSystemInfo(),n=e.windowWidth,a=e.windowHeight;t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight;var i=300;return n/a<640/1136&&(i=.90625*n),wx.createGridAd({adUnitId:t.id,adTheme:"black",adIntervals:30,gridCount:5,style:{width:i,left:0,top:0}})},createCustomAd:function(t){var e=o.getSystemInfo();t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight,t.anchor=t.anchor||cc.v2(.5,1);var a=n(t);return console.log(a,"createCustomAd"),wx.createCustomAd({adUnitId:t.id,adIntervals:60,style:{left:a.left,top:a.top,width:t.realWidth}})},getSystemInfo:function(){return wx.getSystemInfoSync()},createRewardedVideoAd:function(t){return wx.createRewardedVideoAd({adUnitId:t.id})},createInterstitialAd:function(t){if(wx.createInterstitialAd)return wx.createInterstitialAd({adUnitId:t.id})}},s=function(t,e,n){this.id=t,this.createFunc=e,this.ad=null,n||this.preLoad()};s.prototype={preLoad:function(){if(this.ad)return this.ad;var t=this.createFunc({id:this.id});return console.log("preLoad ****",t,this.id),t.onLoad(function(){console.log("RewardAdMnager **** load")}),t.onError(function(t){console.log("RewardAdMnager **** err",t)}),this.ad=t,t},play:function(t,e,n,a){var i=this.ad;i||(i=this.preLoad());var o=function(){null==a||a(),i.offClose(),i.onClose(function(n){n&&n.isEnded||void 0===n?null==t||t():null==e||e()})},s=function(){null==a||a(),i.load(),Utils.invokeCallback(n)};i.show().then(function(){o()}).catch(function(t){console.log("show err 1",t),i.load().then(function(){i.show().then(function(){o()}).catch(function(t){console.log("show err2",t),s()})}).catch(function(t){console.log("load err",t),s()})})}};var r=function(t,e,n){this.id=t,this.createFunc=e,this.ad=null,n||this.preLoad()};r.prototype={preLoad:function(){if(this.ad)return this.ad;var t=this.createFunc({id:this.id});return t?(console.log("preLoad ****",t,this.id),t.onLoad(function(){console.log("InterAdMnager **** load")}),t.onError(function(t){console.log("InterAdMnager **** err",t)}),this.ad=t,t):void 0},play:function(t,e){var n=this.ad;(n||(n=this.preLoad()))&&(n.show().then(function(){}).catch(function(){n.load(),null==e||e()}),n.offClose(),n.onClose(function(){null==t||t()}))}},e.exports={AdManager:i,RewardAdMnager:s,InterAdMnager:r,wxAdCreateFuncs:o},cc._RF.pop()},{}],AudioManager:[function(t,e){"use strict";cc._RF.push(e,"b3992CsbZ1Bfo/ZUQ5NE/TH","AudioManager"),cc._RF.pop()},{}],BasePlatform:[function(t,e){"use strict";var n;cc._RF.push(e,"ff29dnn2f9BjaG22CpFYNjV","BasePlatform"),cc.Class(((n={properties:{data:null,openId:"",session_key:""},checkVerson:function(t,e){var n=t.split("."),a=e.split(".");if(n.length>a.length)return 1;if(n.length<a.length)return-1;for(var i=0;i<n.length;++i){if(Number(t[i])>Number(e[i]))return 1;if(Number(t[i])<Number(e[i]))return-1}return 0},getQueryStrByObj:function(t){var e="",n=!0;for(var a in t)n||(e+="&"),n=!1,e+=a+"="+t[a];return e},init:function(){this.setDefaultGlobalOnlineInfo(),this.svStates={}},startLogin:function(t){Utils.invokeCallback(t)},saveLocationData:function(t,e){cc.sys.localStorage.setItem(t,JSON.stringify(e))},getLocationData:function(t){var e=cc.sys.localStorage.getItem(t);if(e&&""!=typeof e){var n="";try{n=JSON.parse(e)}catch(a){n=e}return n}return null},removeStorage:function(t){return cc.sys.localStorage.removeItem(t)},postDataFormat:function(t){if("object"==typeof t){var e=new Array,n=0;for(var a in t)e[n]=encodeURIComponent(a)+"="+encodeURIComponent(t[a]),n++;return e.join("&")}},request:function(t){var e=new XMLHttpRequest,n=!1,a=setTimeout(function(){n=!0,e.abort(),Utils.invokeCallback(t.fail)},3e3);e.onreadystatechange=function(){if(!n&&(clearTimeout(a),4==e.readyState))if(e.status>=200&&e.status<400){var i=e.responseText,o={};o.code=e.status,o.data=JSON.parse(i),Utils.invokeCallback(t.success,o)}else Utils.invokeCallback(t.fail)},t.method&&"GET"!=t.method||(t.url+="?"+this.postDataFormat(t.data)),e.open(t.method||"GET",t.url,!0);var i=null;"POST"==t.method&&(e.setRequestHeader("content-type","application/x-www-form-urlencoded"),i=this.postDataFormat(t.data)),e.send(i)},setGameClubButtonState:function(){},showModal:function(){},navigateToMiniProgram:function(){},changeBannerAd:function(){},changeBannerState:function(t){console.log("changeBannerState",t)},createBannerAd:function(){},startOfShowInterAd:function(){},createOfInterstitialAd:function(){},initSharedOfCanvas:function(){},updateSharedofCanvas:function(){},postMessageDate:function(){},isNative:function(){return!1},updateCurLocationDate:function(){var t=this.curDateData||this.getLocationData(MyEnum.StorageKey.CurDateData),e=Utils.getDayNum();t&&t.day==e||(t={day:e}),this.curDateData=t},getCurDateStoreDate:function(t){return this.updateCurLocationDate(),this.curDateData[t]},setCurDateStoreDate:function(t,e){this.updateCurLocationDate(),this.curDateData[t]=e,this.saveLocationData(MyEnum.StorageKey.CurDateData,this.curDateData)},addCurDataInfoKey:function(t){var e=this.getCurDateStoreDate(t)||0;e++,this.curDateData[t]=e,this.saveLocationData(MyEnum.StorageKey.CurDateData,this.curDateData)},shareAppMessage:function(t,e){Utils.invokeCallback(e,!0)},startPlayVideo:function(t){console.log("startPlayVideo ***"),Utils.invokeCallback(t)},getOnlineGlobalInfo:function(t){var e="https://yzh.lequ.com/admin/gameJson/starWar/"+this.getCurVersion()+".json";console.log("getOnlineGlobalInfo url===== ",e),this.request({url:e,success:function(e){for(var n in console.log("getOnlineGlobalInfo res===== ",e,e.data),e.data)GCommon.OnlineInfo[n]=e.data[n];GCommon.OnlineInfo.jumpList.sort(function(t,e){return t.rank-e.rank}),Utils.invokeCallback(t)},fail:function(){Utils.invokeCallback(t)}})},getCurGameName:function(){return MyEnum.GameName},getCurVersion:function(){return MyEnum.VERSION},setDefaultGlobalOnlineInfo:function(){window.GCommon||(window.GCommon={}),this.defaultShareInfo={str:"\u3010\u6c42\u52a9\u3011\u4f60\u80fd\u5e2e\u5e2e\u8fd9\u7fa4\u540c\u5b66\u5417\uff1f\u4ed6\u4eec\u8003\u8bd5\u4e0d\u53ca\u683c\u554a",img:"src/myOpenDataContext/res/share1.png",query:"type=\u6c42\u52a9"},GCommon.OnlineInfo={shareVideoInfo:{all:2,maxVideoTimes:1e3,maxShareTimes:5,maxBannerTimes:10,name:0},jumpList:[{appId:"wx6e6796e9d30624fc",name:"\u73ed\u7ea7\u5927\u4f5c\u6218",spic:"wx6e6796e9d30624fc",icon:"",path:""},{appId:"wxde8adbafb71af8c7",name:"\u8fd0\u6c14\u4eba\u751f",spic:"wxde8adbafb71af8c7",icon:"",path:""},{appId:"wxade473f0101f5211",name:"\u6253\u7a7f\u4e00\u767e\u5c42",spic:"wxade473f0101f5211",icon:"",path:""},{appId:"wxb11577557a54274e",name:"\u5510\u50e7\u7684\u53d6\u7ecf\u4e4b\u8def",spic:"wxb11577557a54274e",icon:"",path:""},{appId:"wxf87050edaf82a44b",name:"\u82b1\u679c\u5c71\u996d\u5e97",spic:"wxf87050edaf82a44b",icon:"",path:""},{appId:"wxbefb1d1e5346d6bd",name:"\u629310\u4ebf\u53ea\u9e2d\u5b50",spic:"wxbefb1d1e5346d6bd",icon:"",path:""},{appId:"wx3085180d778cbaff",name:"\u67aa\u738b\u7a81\u7a81\u7a81",spic:"wx3085180d778cbaff",icon:"",path:""},{appId:"wxecc1bf64754eb137",name:"\u540310\u4ebf\u4e2a\u74dc",spic:"wxecc1bf64754eb137",icon:"",path:""},{appId:"wxb4f3a14bd0f4e539",name:"\u5200\u5251\u9ab0\u5b50",spic:"wxb4f3a14bd0f4e539",icon:"",path:""},{appId:"wx9b9327e27d4a2cdf",name:"\u6700\u5f3a\u73ed\u7ea7",spic:"wx9b9327e27d4a2cdf",icon:"",path:""}],shareInfo:{list:[{str:"\u3010\u6c42\u52a9\u3011,\u4f60\u80fd\u5e2e\u6211\u901a\u8fc7\u8fd9\u4e00\u5173\u5417\uff1f\u597d\u96be\u554a",img:"src/myOpenDataContext/res/share1.png",query:"type=\u6c42\u52a9",isLocal:!0}],isUseLocal:!1,name:[1,2]},sceneIdList:["1089","1001","1044","1007","1104","1037","1038","1023","1008","1103","1069","1027","1096","1090","1058","1095","1055","1139"],sceneIdList1:["1011","1047"],openBannerTimes:5,isReview:!1,goldenTime:2e4,golden:!1,goldenShowTime:10,goldenTimes:5,showHeZi:!1,heZi:[5,0],showChaPin:!1,heZiTime:50,eventTime:30},GCommon.OnlineInfo.sceneIdList=[1011,1012],GCommon.OnlineInfo.shareVideo=122,GCommon.OnlineInfo.extra={value1:{value:"true",desc:"xxxxxxxxxxxxx"},forceAds:{value:"true",desc:"\u662f\u5426\u5f00\u542f\u5f3a\u62c9\u89c6\u9891"}},GCommon.OnlineInfo.isReview=!1,cc.sys.platform==cc.sys.ANDROID&&this.startLogin()},getCurShareInfo:function(t){var e=GCommon.OnlineInfo.shareInfo,n=null;if(GCommon.OnlineInfo.isReview)return{str:"\u840c\u59b9\u4eec\u8857\u5934\u4e92\u6254\u65a7\u5934\uff0c\u90a3\u573a\u9762\u771f\u662f\u55e8\uff01\u5feb\u6765\u770b\u770b\u5427",img:"src/myOpenDataContext/res/share3.png",query:"type=\u840c\u59b9\u4e22\u65a7\u5934"};if(e[t]){var a=Math.floor(Math.random()*e[t].length),i=e[t][a];n=e.list[i]}else if(e.isUseLocal){if(!e.localList)for(var o in e.localList=[],e.list)e.list[o].isLocal&&e.localList.push(e.list[o]);var s=Math.floor(Math.random()*e.localList.length);n=e.localList[s]}else{var r=Math.floor(Math.random()*e.list.length);n=e.list[r]}return n||(n=this.defaultShareInfo),n},getShareVideoState:function(t){var e=this._getShareVideoState(t);if(e==MyEnum.ShareVideoState.Share){var n=GCommon.OnlineInfo.shareVideoInfo;if((this.getCurDateStoreDate("todayShareTimes")||0)>=n.maxShareTimes)return MyEnum.ShareVideoState.Close}return e},_getShareVideoState:function(t){var e=GCommon.OnlineInfo;if(e.isReview)return MyEnum.ShareVideoState.Video;var n=e.shareVideoInfo,a=null==n[t]?n.all:n[t];if(a==MyEnum.ShareVideoState.Close)return MyEnum.ShareVideoState.Close;var i=(this.getCurDateStoreDate("todayVideoTimes")||0)+(this.getCurDateStoreDate("todayShareTimes")||0)+(this.getCurDateStoreDate("todayBannerTimes")||0),o=(a=String(a))[i%a.length];return this.getCurShareAndVideoState(parseInt(o))},getCurShareAndVideoState:function(t){var e=GCommon.OnlineInfo.shareVideoInfo,n=this.getCurDateStoreDate("todayVideoTimes")||0,a=(this.getCurDateStoreDate("todayShareTimes"),this.getCurDateStoreDate("todayBannerTimes")||0);switch(t){case MyEnum.ShareVideoState.Share:return MyEnum.ShareVideoState.Share;case MyEnum.ShareVideoState.Video:return n<e.maxVideoTimes?MyEnum.ShareVideoState.Video:MyEnum.ShareVideoState.Share;case MyEnum.ShareVideoState.Banner:return a<e.maxBannerTimes&&"ios"!=this.systemInfo.platform?MyEnum.ShareVideoState.Banner:this.getCurShareAndVideoState(MyEnum.ShareVideoState.Video)}},changeCustomMoreAdState:function(){},initAd:function(){},startShareWatch:function(t,e,n,a,i,o,s){var r=this;if(MyEnum.isShowAd){var c=GCommon.OnlineInfo.shareVideoInfo.isAllSwitch;i=i||a,1==t?(o=o||this.getCurShareInfo(a),this.shareAppMessage(o,function(){return c?r.allVideo=!0:r.svStates[a]=2,s||r.addCurDataInfoKey("todayShareTimes"),Utils.invokeCallback(e),cc.director.emit(MyEnum.CustomEvent.SVStateEvent),null==e},function(){return Utils.invokeCallback(n),null==n},i||a)):(this.getCurDateStoreDate("todayVideoTimes"),platformAdapter.aldSendEvent("videoStart",{desc:"\u89c6\u9891\u70b9_\u5f00\u59cb_"+i,missionId:playerInfo.MissionID}),this.startPlayVideo(function(){c?r.allVideo=!1:r.svStates[a]=1,r.addCurDataInfoKey("todayVideoTimes"),Utils.invokeCallback(e),cc.director.emit(MyEnum.CustomEvent.SVStateEvent);var t=r.getCurDateStoreDate("watchAdTimes")||1;platformAdapter.aldSendEvent("videoSuc",{desc:"\u89c6\u9891\u70b9_\u6210\u529f_"+i,watchAdTimes:t,missionId:playerInfo.MissionID}),platformAdapter.aldSendEvent("watchTime",{desc:"\u89c6\u9891\u70b9_\u89c2\u770b\u89c6\u9891\u6b21\u6570_"+t}),r.setCurDateStoreDate("watchAdTimes",t+1)},function(){r.addCurDataInfoKey("todayVideoTimes"),Utils.invokeCallback(n),platformAdapter.aldSendEvent("videoFail",{desc:"\u89c6\u9891\u70b9_\u5931\u8d25_"+i,missionId:playerInfo.MissionID})},function(){if(platformAdapter.aldSendEvent("videoErr",{desc:"\u89c6\u9891\u70b9_\u9519\u8bef_"+i,missionId:playerInfo.MissionID}),(r.getCurDateStoreDate("todayShareTimes")||0)>=GCommon.OnlineInfo.shareVideoInfo.maxShareTimes||cc.sys.platform!=cc.sys.ANDROID)return Utils.invokeCallback(n),void(cc.sys.platform!=cc.sys.ANDROID&&Utils.showHintText("ad_play_fail"));r.startShareWatch(1,e,n,a,i)},i||a))}else e&&e()},sendMissionStartEvent:function(){},sendMissionRunningEvent:function(){},sendMissionEndEvent:function(){},aldSendEvent:function(t,e){console.log("aldSendEvent",t,e)},createGridAd:function(){},startInterstitialAd:function(){},createAppBox:function(){},hideGridAd:function(){},createGameCustomAd:function(){},hideGameCustomAd:function(){},isRecordScreen:function(){return!1},startRecordScreen:function(){},stopRecordScreen:function(){}}).changeBannerState=function(t){if(t)return Promise.reject()},n.changeGirdAdState=function(t){if(t)return Promise.reject()},n.changeCustomAdState=function(t){if(t)return Promise.reject()},n.changeCustomAdState2=function(t){if(t)return Promise.reject()},n.changeCustomAdState3=function(t){if(t)return Promise.reject()},n.changeCustomAdState4=function(t){if(t)return Promise.reject()},n.updateBannerAdState=function(t){console.log("updateBannerAdState",t)},n.isDouYin=function(){return!1},n.openAwemeUserProfile=function(){},n)),cc._RF.pop()},{}],BtnClicked:[function(t,e){"use strict";cc._RF.push(e,"e41cbalBs5Gp7qC/ietmTmK","BtnClicked"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart.bind(this),this.node)},touchStart:function(){},start:function(){}}),cc._RF.pop()},{}],CocosPlatform:[function(t,e){"use strict";cc._RF.push(e,"afd52okXB9NA5PWEDAMpzWj","CocosPlatform"),cc.Class({extends:t("BasePlatform"),isNative:function(){return!0}}),cc._RF.pop()},{BasePlatform:"BasePlatform"}],CustomPanel:[function(t,e){"use strict";cc._RF.push(e,"7bcd3p/inFD14GPeAw8AHGL","CustomPanel"),cc.Class({extends:cc.Component,properties:{isShowBanner:!0,isShowAsset:!0,isUseAction:!1},start:function(){},onClickedCloseBtn:function(t,e){var n=this;this.isUseAction?this.playExitAction(function(){n.node.active=!1,Utils.invokeCallback(e)}):(this.node.active=!1,Utils.invokeCallback(e))},uiUpdate:function(){},playExitAction:function(t){cc.tween(this.node).to(.2,{y:-50,opacity:255},{easing:"backIn"}).call(function(){t&&t()}).start()},playEnterAction:function(t){cc.tween(this.node).set({y:-50,opacity:255}).to(.2,{y:0,opacity:255},{easing:"backOut"}).call(function(){t&&t()}).start()},onEnable:function(){platformAdapter.aldSendEvent("openCustomPanel",{desc:"\u6253\u5f00"+this.node.name+"\u754c\u9762"}),GCommon.mainS.panelMap[this.node.name]=this.node,this.node.zIndex=MyEnum.PanelZIndex[this.node.name]||0,this.updateShowState(),this.isUseAction&&this.playEnterAction()},onDisable:function(){platformAdapter.aldSendEvent("closeCustomPanel",{desc:"\u5173\u95ed"+this.node.name+"\u754c\u9762"}),Utils.invokeCallback(this.node.hideCb),this.updateShowState()},updateShowState:function(){var t=GCommon.mainS.getTopPanel();t&&t.isShowBanner?platformAdapter.changeBannerState(!0):platformAdapter.changeBannerState(!1),t&&t.isShowAsset?GCommon.assetPanel.node.active=!0:GCommon.assetPanel.node.active=!1}}),cc._RF.pop()},{}],DebugConfig:[function(t,e){"use strict";cc._RF.push(e,"0e5f6dhtuFDJY6SLcJMaw04","DebugConfig"),e.exports=window.DebugConfig={_isDebug:!0,_closeGuide:!1,_forceMission:-1,_forceLevel:-1,_clearData:!1,isDebug:function(){return!window.wx&&this._isDebug},isCloseGuide:function(){return this.isDebug()&&this._closeGuide},forceMission:function(){return this.isDebug()?this._forceMission:-1},forceLevel:function(){return this.isDebug()?this._forceLevel:-1},isClearData:function(){return!!this.isDebug()&&this._clearData}},cc._RF.pop()},{}],GroupWait:[function(t,e){"use strict";cc._RF.push(e,"d95dfbvXJFHhatottV3UD/+","GroupWait");var n=function(t,e,n){this.completeBack=t,"number"==typeof e&&(n=e,e=null),this.target=e,this.Count=n||0,this._hasWait=0!=this.Count};function a(t){if("function"==typeof t||"object"==typeof t)var e=(""+t).match(/function\s*([\w\$]*)\s*\(/);return e&&e[1]}n.prototype.wait=function(){this.Count++,this._hasWait=!0},n.prototype.done=function(){this.Count--,this.Count<0&&console.trace(),this.isDone()&&this.completeBack&&this.completeBack.apply(this.target,Array.prototype.slice.call(arguments,0))},n.prototype.isDone=function(){return this.Count<=0},n.prototype.completed=function(){this.completeBack.apply(this.target,Array.prototype.slice.call(arguments,0))},"console"in window||(window.console={}),console.trace||(console.trace=function(){for(var t=[],e=arguments.callee.caller;e;)t.unshift(a(e)),e=e&&e.caller;cc.log("functions on stack:\n"+t.join("\n"))}),n.prototype.hasWait=function(){return this._hasWait},e.exports=window.GroupWait=n,cc._RF.pop()},{}],HintText:[function(t,e){"use strict";cc._RF.push(e,"8e6a4u7Jm9KK6uUPiq8eaKt","HintText"),cc.Class({extends:cc.Component,properties:{titleLab:cc.Label},setCallBack:function(t){this.callback=t},show:function(t){var e=this,n=LangData.getStr(t)||"";arguments.length>1&&(n=n.format(Array.prototype.slice.call(arguments,1))),this.titleLab.node.on(cc.Node.EventType.SIZE_CHANGED,function(){e.titleLab.node.parent.width=Math.max(e.titleLab.node.width+100,350)}),this.titleLab.string=n;var a=this.getComponent(cc.Animation);a.off(cc.Animation.EventType.FINISHED,this.runCallback,this),a.once(cc.Animation.EventType.FINISHED,this.runCallback,this),a.play()},runCallback:function(){Utils.invokeCallback(this.callback),this.node.active=!1}}),cc._RF.pop()},{}],MyEnum:[function(t,e){"use strict";cc._RF.push(e,"9f438MMLL1GsIeuFABaBsgs","MyEnum"),window.MyEnum={StorageKey:{AssetData:"AssetData",KVData:"KVData",UnlockSkinData:"UnlockSkinData",SkinChips:"SkinChips",FixedAttr:"FixedAttr",CurDateData:"CurDateData",PhysicalData:"PhysicalData",CurMissionConfig:"CurMissionConfig",NotIsFirst:"NotIsFirst"},CustomEvent:{SVStateEvent:"SVStateEvent",AssetUpdate:"AssetUpdate",SkinUpdate:"SkinUpdate",UnlockSkin:"UnlockSkin",HCEvent:"HCEvent",GuideEvent:"GuideEvent"},GuideEvents:{EnterGame:"EnterGame",ClickedStartGame:"ClickedStartGame",HCTouchEnd:"HCTouchEnd",HCEnd:"HCEnd",DragToBattle:"DragToBattle",GuideTouchStart:"GuideTouchStart",HCTouchStart:"HCTouchStart",OpenMissionPanel:"OpenMissionPanel",StartCleanStar:"StartCleanStar"},PoolName:{Road:"Road",CanBox:"CanBox"},AddPhyNum:10,CustomPanel:{gamePanel:"gamePanel",startPanel:"startPanel",phyPanel:"phyPanel",overPanel:"overPanel",settingPanel:"settingPanel",leftMorePanel:"leftMorePanel",rankPanel:"rankPanel",moreGamePanel:"moreGamePanel",friendPanel:"friendPanel",missionPanel:"missionPanel",revivePanel:"revivePanel"},PanelZIndex:{startPanel:0,gamePanel:1,revivePanel:2,overPanel:3,friendPanel:4,leftMorePanel:5,settingPanel:6,missionPanel:7,rankPanel:8,phyPanel:9,moreGamePanel:99},ShareVideoState:{Close:0,Share:1,Video:2},OpenDataKeys:{MissionID:"MissionID"},DomainAction:{Init:"init",FriendRank:"friendRank",UserCloudStaroge:"UserCloudStaroge",TouchStart:"touchStart",TouchMove:"touchMove",TouchEnd:"touchEnd",LastPage:"LastPage",NextPage:"NextPage",Beyond:"Beyond",potentialList:"potentialList",clickFriend:"clickFriend"},WordsList:[{txt:"114514"}],WordsList2:[{txt:"the words"}],FriendWords:["\u6c42\u6c42\u4f60\u8ddf\u6211\u73a9\u4f1a\u513f\u6e38\u620f\u5427\u3002","\u4e00\u987f\u996d\u529f\u592b\u6211\u73a9\u4e8620\u5173\uff0c\u5feb\u6765\u4e00\u8d77\u73a9\u73a9\u5427~","\u5728\u5fd9\u5565\u5462\uff1f\u4e00\u8d77\u73a9\u4f1a\u513f\u6e38\u620f\u5427\u3002","\u8fd8\u6ca1\u4f11\u606f\u554a\uff0c\u4e00\u8d77\u73a9\u4f1a\u513f\u6e38\u620f\u5427\u3002","\u597d\u4e45\u6ca1\u8054\u7cfb\uff0c\u6765\u4e00\u8d77\u73a9\u4f1a\u513f\u6e38\u620f\u5427~","\u5e9f\u8bdd\u4e0d\u591a\u8bf4\uff0c\u5feb\u6765\u4e00\u8d77\u73a9\u6e38\u620f\u3002","\u8fd9\u6e38\u620f\u633a\u6709\u610f\u601d\u7684\uff0c\u6211\u90fd\u73a9\u5230128\u5173\u4e86\u3002\u5feb\u6765\u8ffd\u6211\u3002","\u8fd9\u6e38\u620f\u6211\u90fd\u73a9\u5230200\u5173\u4e86\uff0c\u5feb\u6765\u8ffd\u4e0a\u6211\u5440\u3002","\u50cf\u8fd9\u79cd\u8d39\u70b9\u8111\u5b50\u7684\u6e38\u620f\uff0c\u6211\u770b\u4f60\u53ef\u4ee5\u3002","\u542c\u8bf4\u597d\u591a\u4eba\u90fd\u5728\u73a9\u8fd9\u6b3e\u6e38\u620f\uff0c\u6765\u4e00\u8d77\u73a9\u4f1a\u513f\u5427\u3002","\u516c\u4ea4\u4e0a\u73a9\u8fd9\u6e38\u620f\u5750\u8fc7\u7ad9\u4e86\uff0c\u4f60\u4e5f\u6765\u8bd5\u8bd5~"],KrqSDKType:{Left:100,RightTop:320,Over:59,Middle:5,Banner:911},ObjTag:{DEFAULT:0,ICE:3,METAL:4},PoolNameList:["block_rock","block_wood","box_wood1","floor2","ft_matal","rock_circle","rock_square","rock_square2"],BeyondScree:["red_balloon","blue_balloon"],BalloonDisAppera:["bullet"],GlassDisAppera:["bullet"],ElementIds:{Stone:1001,AlarmClock:1002,Turn:1003,Launcher:1004,Swap:1005,LevelUp:1006,Fazhan:1007,Box:1008},GameType:{Normal:"Normal",Score:"Score",Test:"Test",Endless:"Endless",Match:"Match",Boss:"Boss"},GameTypeIndex:{Score:0,Test:1},ObjectType:{Coin:1,Diamond:2,Chip:3},HCMaxLv:5,GeniusMaxLv:1,physicalMax:50,physicalTime:120,physicalCost:5,Page:["skinPage","studentPage","battlePage","geniusPage","storePage"],BgColor:["#000000","#FD9465","#FD65B8","#5F99F8","#65F999","#9F65FD"],ChapterName:["\u5c0f\u5b66\u4e00\u5e74\u7ea7","\u5c0f\u5b66\u4e8c\u5e74\u7ea7","\u5c0f\u5b66\u4e09\u5e74\u7ea7","\u5c0f\u5b66\u56db\u5e74\u7ea7","\u5c0f\u5b66\u4e94\u5e74\u7ea7","\u5c0f\u5b66\u516d\u5e74\u7ea7","\u5c0f\u5347\u521d\u8003\u8bd5","\u521d\u4e2d\u4e00\u5e74\u7ea7","\u521d\u4e2d\u4e8c\u5e74\u7ea7","\u521d\u4e2d\u4e09\u5e74\u7ea7","\u521d\u5347\u9ad8\u8003\u8bd5","\u9ad8\u4e2d\u4e00\u5e74\u7ea7","\u9ad8\u4e2d\u4e8c\u5e74\u7ea7","\u9ad8\u4e2d\u4e09\u5e74\u7ea7","\u5168\u56fd\u9ad8\u8003","\u5927\u5b66\u4e00\u5e74\u7ea7","\u5927\u5b66\u4e8c\u5e74\u7ea7","\u5927\u5b66\u4e09\u5e74\u7ea7","\u5927\u5b66\u56db\u5e74\u7ea7","\u5927\u5b66\u8bba\u6587","\u7814\u7a76\u751f\u4e00\u5e74\u7ea7","\u7814\u7a76\u751f\u4e8c\u5e74\u7ea7","\u7814\u7a76\u751f\u4e09\u5e74\u7ea7","\u7814\u7a76\u751f\u8bba\u6587","\u535a\u58eb\u4e00\u5e74\u7ea7","\u535a\u58eb\u4e8c\u5e74\u7ea7","\u535a\u58eb\u4e09\u5e74\u7ea7","\u535a\u58eb\u8bba\u6587"],schoolName:{7:"\u5b66\u9738\u5c0f\u5b66",11:"\u5b66\u9738\u521d\u4e2d",15:"\u5b66\u9738\u9ad8\u4e2d",19:"\u5b66\u9738\u5927\u5b66"},AttrType:{Atk:"atk",AtkSpeed:"atk_speed",Defense:"defense",Hp:"hp",Crit:"crit",CritNum:"crit_num"},MeetingRewardRate:[{g:4,d:80},{g:2,d:40},{g:1,d:20},{g:.5,d:10}],MissionNum:38,MaxPhysical:10,MAX_LDTimes:10,HERO_MAX_WIDTH:70,HERO_MIN_WIDTH:10,HERO_HP:3,GameName:"starWar",PHPHOST:"https://game1.yzh.lequ.com",Appid:"wx2c3aac7599509bc2",BannerAdUnitId:"adunit-9033533f29d2c7ae",RewardedVideoAdID:"adunit-6ca049cf3f431e18",CustomMoreUnitId:"adunit-148af0f80daa3730",CustomOneUnitId:"adunit-7945bac0dc5e79c4",CustomOneUnitId2:"adunit-d3488f8dd2f788bc",GridUnitId:"adunit-1ad12f2060b3420d",InterUnitId:"adunit-24c32a404f89441b",VERSION:1,ColliderTag:{Default:0,Rope:1,Bounce:2},Dungeons:[{}],RoleName:{1:"\u6218\u58eb",2:"\u5c04\u624b",3:"\u8089\u76fe",4:"\u6cd5\u5e08",5:"\u5168\u4f53"},AttrNames:{p_hp:"\u8840\u91cf +{0}%",p_atk:"\u653b\u51fb +{0}%",p_defense:"\u9632\u5fa1 +{0}%",crit:"\u66b4\u51fb\u7387 +{0}%",p_atkSpeed:"\u653b\u901f +{0}%",addRole:"\u6570\u91cf +{0}"},GameState:{Clear:0,Ready:1,Battle:2,Over:3,Buff:4},GuaJiConfig:{10:{1:100,2:.5},20:{1:120,2:.5},40:{1:140,2:.5},60:{1:160,2:1},80:{1:180,2:1},100:{1:200,2:1},140:{1:240,2:1},180:{1:280,2:1},220:{1:350,2:1.5}},OnlineConfig:[{type:2,num:5,time:60},{type:2,num:5,time:180},{type:2,num:10,time:300},{type:2,num:10,time:600},{type:2,num:15,time:900}],SkinDescs:{5:"\u6218\u58eb\u8840\u91cf+10%",6:"\u5c04\u624b\u653b\u51fb+10%",7:"\u8089\u76fe\u8840\u91cf+10%",8:"\u6cd5\u5e08\u653b\u51fb+10%",9:"\u6218\u58eb\u8840\u91cf+20%",10:"\u5c04\u624b\u653b\u51fb+20%",11:"\u8089\u76fe\u8840\u91cf+20%",12:"\u6cd5\u5e08\u653b\u51fb+20%",13:"\u6218\u58eb\u8840\u91cf+30%",14:"\u5c04\u624b\u653b\u51fb+30%",15:"\u8089\u76fe\u8840\u91cf+30%",16:"\u6cd5\u5e08\u653b\u51fb+30%"},SkinAttrs:{5:[{key:"p_hp",value:10,pos:1}],6:[{key:"p_atk",value:10,pos:2}],7:[{key:"p_hp",value:10,pos:4}],8:[{key:"p_hp",value:10,pos:8}],9:[{key:"p_hp",value:20,pos:1}],10:[{key:"p_atk",value:20,pos:2}],11:[{key:"p_hp",value:20,pos:4}],12:[{key:"p_atk",value:20,pos:8}],13:[{key:"p_hp",value:30,pos:1}],14:[{key:"p_atk",value:30,pos:2}],15:[{key:"p_hp",value:30,pos:4}],16:[{key:"p_atk",value:30,pos:8}]},OtherPlay:{Match:{key:"Match_key",unlock:10},Endless:{key:"Endless_key",unlock:5},Meeting:{key:"Meeting_key",unlock:15}},isShowAd:!0,EndlessMaxLv:10,TTPlat:{BannerAdUnitId:"284ahbf23ae9ql3sps",IntUnitUnitId:"7g055o7b4mpegb9b4q",VideoAdUnitId:"2l9jdoai96b1l8slgr",RecordTopics:{title:["\u4f60\u80fd\u5e2e\u5e2e\u6211\u5417?"],topics:[["\u8ff7\u4f60\u52c7\u58eb"]]}}},cc._RF.pop()},{}],PoolManager:[function(t,e){"use strict";cc._RF.push(e,"2655eM7YcVM0rNhP59YIrJc","PoolManager");var n=function(){this.pools={},this.maxSize=0};n.prototype.hasPool=function(t){return!!this.pools[t]},n.prototype.initPoolByName=function(t,e,n,a){void 0===n&&(n=5),void 0===a&&(a=100),this.pools[t]||(this.pools[t]={},this.pools[t].node=e,this.pools[t].pool=new cc.NodePool),this.maxSize=a;for(var i=this.pools[t].pool,o=i.size();o<n;++o){var s=cc.instantiate(e);i.put(s)}},n.prototype.getPoolNodeByName=function(t,e){if(this.pools[t]){var n=null,a=this.pools[t].pool,i=this.pools[t].node;return a.size()>0?n=a.get():(this.count=this.count||0,this.count++,n=cc.instantiate(i)),e&&(n.parent=e),n}},n.prototype.pushPoolNodeByName=function(t,e){this.pools[t]&&(this.pools[t].pool.size()>=this.maxSize?e.removeFromParent(!0):this.pools[t].pool.put(e))},n.prototype.getNode=function(t){return this.pools[t]||(this.pools[t]={},this.pools[t].pool=new cc.NodePool),this.pools[t].pool.get()},n.prototype.putNode=function(t,e){this.pools[t]||(this.pools[t]={},this.pools[t].pool=new cc.NodePool),this.pools[t].pool.put(e)},n.prototype.clearPoolByName=function(t){this.pools[t]&&(this.pools[t].pool.clear(),delete this.pools[t])};var a=null;e.exports=(null==a&&(a=new n),a),cc._RF.pop()},{}],QQPlatform:[function(t,e){"use strict";var n;cc._RF.push(e,"b0818uhxDlJhq4rMV8+soVO","QQPlatform");var a=window.qq;cc.Class(((n={extends:t("BasePlatform"),properties:{query:{default:{}}},init:function(){this._super(),a.getOpenDataContext&&(this.openDataContext=a.getOpenDataContext(),this.sharedCanvas=this.openDataContext.canvas),a.showShareMenu({withShareTicket:!0}),this.systemInfo=a.getSystemInfoSync(),this._onShareAppMessage(),this._onShow(),this.startLogin();var t=a.getUpdateManager();t.onUpdateReady(function(){a.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(e){e.confirm&&t.applyUpdate()}})})},_onShow:function(){var t=this;this.query=a.getLaunchOptionsSync().query,this.scene=a.getLaunchOptionsSync().scene,GCommon.fromScene=this.scene,this.query&&this.query.type&&this.aldSendEvent("\u4ece\u5206\u4eab\u94fe\u63a5\u8fdb\u5165\u6e38\u620f",{type:this.query.type}),a.onShow(function(e){for(var n in t.query=e.query,t.scene=e.scene,e.query&&e.query.type&&t.aldSendEvent("\u4ece\u5206\u4eab\u94fe\u63a5\u8fdb\u5165\u6e38\u620f",{type:e.query.type}),Utils.invokeCallback(t.shareCB),t.shareCB=null,t.bannerCallbackList)t.bannerCallbackList[n]&&Utils.invokeCallback(t.bannerCallbackList[n])}),this.uploadScore()},_onShareAppMessage:function(){a.onShareAppMessage(function(){return{query:"userId="+this.openId+"&"+this.defaultShareInfo.query,title:this.defaultShareInfo.str,imageUrl:this.defaultShareInfo.img}}.bind(this))},saveLocationData:function(t,e){try{a.setStorageSync(t,JSON.stringify(e))}catch(n){}},getLocationData:function(t){var e=a.getStorageSync(t);if(e&&""!=typeof e){var n="";try{n=JSON.parse(e)}catch(i){n=e}return n}return null},removeStorage:function(t){try{a.removeStorageSync(t)}catch(e){}},request:function(t){a?(t.header=t.header||{"content-type":"application/json"},t.method=t.method||"GET",a.request(t)):t.fail&&t.fail()},aldSendEvent:function(){},sendMissionStartEvent:function(){},sendMissionRunningEvent:function(){},getCurGameName:function(){return MyEnum.QQAd.GameName},getCurVersion:function(){return MyEnum.QQAd.VERSION},createBannerAd:function(){var t=this;this.bannerAdOldState=!1,this.createBannerTimes=this.createBannerTimes||0,this.createBannerTimes++,this.aldSendEvent("\u770b\u5e7f\u544a_\u521b\u5efaBanner",{createTime:this.createBannerTimes});var e=this.systemInfo.windowWidth,n=this.systemInfo.windowHeight,i=300;e/n<640/1136&&(i=.90625*e);var o=a.createBannerAd({adUnitId:MyEnum.QQAd.BannerAdUnitId,style:{top:n/2+.640625*e,left:e/2-i/2,width:i}});return o.onResize(function(a){console.log("-----onresize--------"),console.log(a.width,a.height,o.style.realHeight),o.style.top=n/2+.640625*e,Utils.invokeCallback(t.onBannerResize),t.onBannerResize=null}),o.onError(function(t){console.log("banner error",t)}),o},createOfInterstitialAd:function(){},changeBannerAd:function(t){var e=+new Date,n=GCommon.OnlineInfo.updateBannerTime?1e3*GCommon.OnlineInfo.updateBannerTime:12e4;this.onBannerResize=t,this.lastUpdateBannerTime&&e-this.lastUpdateBannerTime<n||(this.lastUpdateBannerTime=e,this.bannerAd&&this.bannerAd.destroy(),this.bannerAd=this.createBannerAd(t))},changeBannerState:function(t){if(this.bannerAd||(this.bannerAd=this.createBannerAd(),this.bannerAd)){var e=this.bannerAdOldState||!1;return t?this.bannerAd.show():(this.bannerAd.hide(),this.bannerAdOldState&&this.changeBannerAd()),this.bannerAdOldState=t,e}}}).createOfInterstitialAd=function(){var t=null;wx.createOfInterstitialAd&&(t=wx.createOfInterstitialAd({adUnitId:MyEnum.QQAd.InterstitialUnitId})),t&&t.show().catch(function(t){console.error(t)})},n.startOfShowInterAd=function(t,e){var n=this.createOfInterstitialAd();n&&(n.offClose(),n.onClose(function(){Utils.invokeCallback(t),n.offClose()}),n.offError(),n.onError(function(){Utils.invokeCallback(e)}),n.show())},n.initSharedOfCanvas=function(t,e,n){if(console.log("openDataContext",this.openDataContext),this.openDataContext){var a=this.openDataContext.canvas;a.width=t,a.height=e,this.shareCanvasSprite=n,this.texture=new cc.Texture2D;var i=new cc.SpriteFrame;i.setTexture(this.texture),n.spriteFrame=i,this.texture.initWithElement(this.sharedCanvas)}},n.updateSharedofCanvas=function(){this.openDataContext&&this.texture.handleLoadedTexture()},n.postMessageDate=function(t){this.openDataContext&&this.openDataContext.postMessage(t)},n.startLogin=function(t){this._login(t)},n._login=function(t){var e=this;console.log("qq.login"),a.login({success:function(n){console.log("qq.login",n),e._getOpenId(n.code,function(){Utils.invokeCallback(t)})},fail:function(){Utils.invokeCallback(t)}})},n._getOpenId=function(t,e){var n=this;this.request({url:MyEnum.QQAd.PHPHOST+"/api/wx/qq_login.php",data:{js_code:t,appid:MyEnum.QQAd.APPID},success:function(t){console.log("_getOpenId",t),n.openId=t.data.openid,window.openid=t.data.openid,n.session_key=t.data.session_key;try{a.setStorageSync("openId",n.openId)}catch(i){}Utils.invokeCallback(e)},fail:function(){Utils.invokeCallback(e)}})},n._showUserInfoButton=function(t){var e=this;if(!this.userInfoButton){if(!a.createUserInfoButton)return void Utils.invokeCallback(t);this.userInfoButton=this._createUserInfoButton(),this.userInfoButton.onTap(function(n){e.userInfoButton.hide(),"getUserInfo:ok"==n.errMsg?Utils.invokeCallback(t,!0):Utils.invokeCallback(t)})}this.userInfoButton.show()},n._createUserInfoButton=function(){var t=this.systemInfo.windowWidth,e=this.systemInfo.windowHeight;return a.createUserInfoButton({type:"image",image:"src/myOpenDataContext/res/transparent.png",style:{left:0,top:0,width:t,height:e,lineHeight:40,borderRadius:4}})},n._getUserInfo=function(t){var e=this,n=setTimeout(function(){Utils.invokeCallback(t)},2e3);a.getUserInfo({success:function(a){console.log("_getUserInfo.res",a),e.data=a.userInfo,window.openid&&ServerCom.UpdatePlayerInfo({_openid:window.openid,avatarUrl:a.userInfo.avatarUrl,nickName:a.userInfo.nickName},function(){},function(){}),clearTimeout(n),Utils.invokeCallback(t)},fail:function(){clearTimeout(n),Utils.invokeCallback(t)}})},n.shareAppMessage=function(t,e,n){var i=this,o="userId="+this.openId;t.query&&(o+="&"+t.query),console.log("shareAppMessage  query",o),GCommon.shareState=!0,a.shareAppMessage({title:t.str||this.defaultShareInfo.str,imageUrl:t.img||this.defaultShareInfo.img,query:o});var s=+new Date;this.shareCB=function(){var a=+new Date,o=2750;cc.sys.platform==cc.sys.ANDROID&&(o=2350),a-s>o?(i.maxShareRate=i.maxShareRate||.3,Math.random()<i.maxShareRate?(Utils.invokeCallback(n)&&Utils.showHintText("share_1"),i.maxShareRate=.01):(i.shareSuccessIndex||(i.shareSuccessIndex=0),i.shareSuccessIndex++,i.aldSendEvent("\u5206\u4eab\u603b\u6210\u529f\u6b21\u6570",{shareSuccessIndex:i.shareSuccessIndex}),i.aldSendEvent("\u5206\u4eab\u6210\u529f\u65f6\u5206\u4eab\u94fe\u63a5",{share:t.query}),Utils.invokeCallback(e)&&Utils.showHintText("share_3"),i.maxShareRate=.3)):Utils.invokeCallback(n)&&Utils.showHintText("share_2"),GCommon.shareState=!1,i.shareCB=null}},n.startPlayVideo=function(t,e,n){var a=this.createRewardedVideoAd(n);a?(a.onClose(function(n){console.log("video close **********",n),n&&n.isEnded||void 0===n?(console.log("vvvvvvvvvvvvvvvvv  success"),Utils.invokeCallback(t)):(console.log("vvvvvvvvvvvvvvvvv fail"),Utils.invokeCallback(e)),a.offClose()}),a.onError(function(t){console.log(t,"video err")})):Utils.invokeCallback(e)},n.createRewardedVideoAd=function(t){var e=a.createRewardedVideoAd({adUnitId:MyEnum.QQAd.VideoAdUnitId});return e.onError(function(t){console.log("videoAd onError",t)}),a.showLoading({title:"loading"}),e.load().then(function(){e.show(),a.hideLoading()}).catch(function(){a.hideLoading(),Utils.invokeCallback(t)}),e},n.createAppBox=function(){if(a.createAppBox){var t=a.createAppBox({adUnitId:MyEnum.QQAd.BoxAdUnitUnitId});t.load().then(function(){t.show()})}},n._createGameClubButton=function(){var t=this.systemInfo.windowWidth,e=this.systemInfo.windowHeight;if(!a.createGameClubButton)return null;var n=t/640;return a.createGameClubButton({type:"image",icon:"green",style:{left:550*n,top:e/2-465*n,width:60*n,height:60*n}})},n.setGameClubButtonState=function(t){this.gameClubButton||(this.gameClubButton=this._createGameClubButton()),this.gameClubButton&&(t?this.gameClubButton.show():this.gameClubButton.hide())},n.navigateToMiniProgram=function(){this.createAppBox()},n.notifyAccess=function(t){this.request({url:MyEnum.QQAd.NEWSHOST,method:"POST",data:{OpenId:window.openid,Content:{data:t,formid:""}},success:function(t){console.log("notifyAccess------success",t)},fail:function(t){console.log("----notifyAccess----fail",t)}})},n)),cc._RF.pop()},{BasePlatform:"BasePlatform"}],StringEx:[function(t,e){"use strict";cc._RF.push(e,"2358eWdMcdPkorg+PlCeuII","StringEx"),String.prototype.format=function(t){var e=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof t){for(var n in t)if(null!=t[n]){var a=new RegExp("({)"+n+"(})","g");e=e.replace(a,t[n])}}else for(var i=0;i<arguments.length;i++)null!=arguments[i]&&(a=new RegExp("({)"+i+"(})","g"),e=e.replace(a,arguments[i]));return e},cc._RF.pop()},{}],Sync:[function(t,e){"use strict";cc._RF.push(e,"10143Hyex1NQYqqIDwQ+e4l","Sync"),e.exports={series:function(t,e){this._callFuncs(t,0,e,[])},_callFuncs:function(t,e,n,a){var i=this;if(e>=t.length)n(null,a);else{var o=t[e];"function"==typeof o?o(function(o,s){null==o?(s&&a.push(s),i._callFuncs(t,e+1,n,a)):n(o,a)}):n(null,a)}}},cc._RF.pop()},{}],TTPlatform:[function(t,e){"use strict";cc._RF.push(e,"3fccdAsFC5L0ZO5/EFC/3Ke","TTPlatform");var n=window.tt,a=null;cc.Class({extends:t("BasePlatform"),properties:{query:{default:{}}},init:function(){for(var t in this._super(),n.getOpenDataContext&&(this.openDataContext=n.getOpenDataContext(),this.sharedCanvas=this.openDataContext.canvas),n.showShareMenu({withShareTicket:!0}),this.systemInfo=n.getSystemInfoSync(),this._onShareAppMessage(),this._onShow(),this.systemInfo.platform,GCommon.OnlineInfo.jumpList=[],GCommon.app_list=[],GCommon.OnlineInfo.jumpList){var e={appId:GCommon.OnlineInfo.jumpList[t].appId,query:"",extraData:""};GCommon.app_list.push(e)}},getOnlineGlobalInfo:function(t){Utils.invokeCallback(t)},_onShow:function(){var t=this;this.query=n.getLaunchOptionsSync().query,this.scene=n.getLaunchOptionsSync().scene,n.onShow(function(e){t.checkUpdate(),t.query=e.query,t.scene=e.scene,e.query&&e.query.type&&t.aldSendEvent("\u4ece\u5206\u4eab\u94fe\u63a5\u8fdb\u5165\u6e38\u620f",{type:e.query.type}),Utils.invokeCallback(t.shareCB),t.shareCB=null}),this.scene&&(console.log("_onShow",this.scene),GCommon.fromScene=this.scene)},_onShareAppMessage:function(){n.onShareAppMessage(function(){return{query:"userId="+this.openId+"&"+this.defaultShareInfo.query,title:this.defaultShareInfo.str,imageUrl:this.defaultShareInfo.img}}.bind(this))},saveLocationData:function(t,e){try{n.setStorageSync(t,JSON.stringify(e))}catch(a){}},getLocationData:function(t){var e=n.getStorageSync(t);if(e&&""!=typeof e){var a="";try{a=JSON.parse(e)}catch(i){a=e}return a}return null},removeStorage:function(t){try{n.removeStorageSync(t)}catch(e){}},request:function(t){n?(t.header=t.header||{"content-type":"application/json"},t.method=t.method||"GET",n.request(t)):t.fail&&t.fail()},aldSendEvent:function(){},ttSendEvent:function(t,e){n.reportAnalytics(t,e)},sendMissionStartEvent:function(){},sendMissionRunningEvent:function(){},createBannerAd:function(t){this.systemInfo,GCommon.bannerError=!1;var e=n.getSystemInfoSync(),a=e.windowWidth,i=e.windowHeight,o=(e.pixelRatio,.8*a);i/a<1.775&&(o=i/1136*512);var s=n.createBannerAd({adUnitId:MyEnum.TTPlat.BannerAdUnitId,adIntervals:31,style:{width:o,left:(a-o)/2,top:i/2+380*a/640}});return console.log("createBannerAd createBannerAd",s),s.onResize(function(t){s.style.top=i/a<1.775?i/2+380*i/1136:i/2+380*a/640,t.width>0&&(s.style.left=(a-t.width)/2)}),s.onLoad(function(){console.log("bannerAd *** ",onLoad)}),s.onError(function(t){console.log("onError",t),GCommon.bannerError=!0}),this.bannerAd=s,t&&t(),s},updateBannerAdState:function(t){MyEnum.isShowAd&&this.changeBannerState(t)},changeBannerState:function(t){var e=this,n=this.bannerAdState||!1;return this.bannerAdState=t,console.log("changeBannerState GCommon.bannerError",GCommon.bannerError),null==GCommon.bannerError||1==GCommon.bannerError?this.createBannerAd(function(){e.bannerAd&&(t?e.bannerAd.show():e.bannerAd.hide())}):this.bannerAd&&(t?this.bannerAd.show():this.bannerAd.hide()),n},createOfInterstitialAd:function(){n.createInterstitialAd&&(a&&a.destroy(),(a=n.createInterstitialAd({adUnitId:MyEnum.TTPlat.IntUnitUnitId}))&&a.load().then(function(){a.show().catch(function(t){console.error("show err------",t)})}).catch(function(t){console.log("load err------",t)}))},startOfShowInterAd:function(t){if(MyEnum.isShowAd){var e=this.createOfInterstitialAd();e&&(e.offClose(),e.onClose(function(){t&&t(),e.offClose(),console.log("startOfShowInterAd------   interstitial.destroy()")}))}else t&&t()},initSharedOfCanvas:function(t,e,a){var i=n.getOpenDataContext();if(console.log("initSharedOfCanvas",i),i){var o=i.canvas;o.width=t,o.height=e,this.shareCanvasSprite=a,this.texture=new cc.Texture2D;var s=new cc.SpriteFrame;s.setTexture(this.texture),a.spriteFrame=s,this.texture.initWithElement(o)}},updateSharedofCanvas:function(){n.getOpenDataContext()&&this.texture.handleLoadedTexture()},postMessageDate:function(t){var e=n.getOpenDataContext();e&&(console.log("postMessageDate",t),e.postMessage(t))},startLogin:function(t){this.openId=n.getStorageSync("openId"),this.openId?Utils.invokeCallback(t):this._login(t),GCommon.bannerType=2},_login:function(t){var e=this;n.login({success:function(n){e._getOpenId(n.code,function(){Utils.invokeCallback(t)})},fail:function(){Utils.invokeCallback(t)}})},_getOpenId:function(t,e){var a=this;this.request({url:MyEnum.PHPHOST+"/api/wx/login.php",data:{js_code:t,appid:MyEnum.APPID},success:function(t){a.openId=t.data.openid,a.session_key=t.data.session_key;try{n.setStorageSync("openId",a.openId)}catch(i){}Utils.invokeCallback(e)},fail:function(){Utils.invokeCallback(e)}})},_showUserInfoButton:function(t){var e=this;if(!this.userInfoButton){if(!n.createUserInfoButton)return void Utils.invokeCallback(t);this.userInfoButton=this._createUserInfoButton(),this.userInfoButton.onTap(function(n){e.userInfoButton.hide(),"getUserInfo:ok"==n.errMsg?Utils.invokeCallback(t,!0):Utils.invokeCallback(t)})}this.userInfoButton.show()},_createUserInfoButton:function(){var t=this.systemInfo.windowWidth,e=this.systemInfo.windowHeight;return n.createUserInfoButton({type:"image",image:"src/myOpenDataContext/res/transparent.png",style:{left:0,top:0,width:t,height:e,lineHeight:40,borderRadius:4}})},_getUserInfo:function(t){var e=this,a=setTimeout(function(){Utils.invokeCallback(t)},2e3);n.getUserInfo({success:function(n){e.data=n.userInfo,clearTimeout(a),Utils.invokeCallback(t)},fail:function(){clearTimeout(a),Utils.invokeCallback(t)}})},shareAppMessage:function(t,e,a){if(MyEnum.isShowAd){var i="userId="+this.openId;t.query&&(i+="&"+t.query),GCommon.shareState=!0,n.shareAppMessage({title:t.str||this.defaultShareInfo.str,imageUrl:t.img||this.defaultShareInfo.img,query:i,success:function(){Utils.showHintText("share_3"),e&&e(),GCommon.shareState=!1},fail:function(){Utils.showHintText("share_4"),a&&a(),GCommon.shareState=!1}})}else e&&e()},startPlayVideo:function(t,e,n){var a=this.createRewardedVideo(n);console.log("videoAd",a),a?(GCommon.videoCb&&a.offClose(GCommon.videoCb),GCommon.videoCb=function(n){n&&n.isEnded||void 0===n?Utils.invokeCallback(t):Utils.invokeCallback(e)},a.onClose(GCommon.videoCb),a.onError(function(){})):Utils.invokeCallback(e)},createMoreGameBtn:function(){n.createMoreGamesButton},createRewardedVideo:function(t){this.systemInfo,console.log("tt",n);var e=n.createRewardedVideoAd({adUnitId:MyEnum.TTPlat.VideoAdUnitId});return n.showLoading({title:"loading"}),e.show().then(function(){n.hideLoading()}).catch(function(a){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",a),e.load().then(function(){return n.hideLoading(),e.show()}).catch(function(){n.hideLoading(),console.log("createRewardedVideo error",t),Utils.invokeCallback(t)})}),e},isRecordScreen:function(){return!0},startRecordScreen:function(t,e){var a=this;console.log("startRecordScreen",this.record);var i=n.getGameRecorderManager();return console.log("recorder",i),i.start({duration:t||60}),i.onStart(function(){console.log("recorder.onStart**************"),a.recordState=!1,a.record=!0,e("start")}),i.onStop(function(t){t&&t.videoPath?(console.log("recorder.onStop**************",t.videoPath),Global._videoPath=t.videoPath,a.recordState=!0,e("end")):(Global._videoPath=null,a.recordState=!1,e("error")),a.record=!1}),i.onError(function(t){console.log("recorder.onError",t),Global._videoPath=null,a.recordState=!1,e("error"),a.record=!1}),!0},stopRecordScreen:function(){console.log("stopRecordScreen",this.record),Global._videoPath=null,this.record&&n.getGameRecorderManager().stop()},shareRecordScreen:function(t,e){if(MyEnum.isShowAd){if(!Global._videoPath)return Utils.invokeCallback(e),void Utils.showHintText("share_5");var a=MyEnum.TTPlat.RecordTopics,i=Math.floor(Math.random()*a.title.length);console.log("shareRecordInfo",a.title[i],a.topics[i]),n.shareAppMessage({channel:"video",desc:a.title[i],imageUrl:"",query:"",extra:{videoPath:Global._videoPath,videoTopics:a.topics[i],hashtag_list:a.topics[i],video_title:a.title[i]},success:function(){Utils.invokeCallback(t),Utils.showHintText("share_3"),console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f")},fail:function(){Utils.invokeCallback(e),Utils.showHintText("share_6"),console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25")}})}else t&&t()},checkUpdate:function(){var t=n.getUpdateManager();t.onUpdateReady(function(){n.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(e){e.confirm&&t.applyUpdate()}})})},_createGameClubButton:function(){var t=this.systemInfo.windowWidth,e=this.systemInfo.windowHeight;if(!n.createGameClubButton)return null;var a=t/640;return n.createGameClubButton({type:"image",icon:"green",style:{left:550*a,top:e/2-465*a,width:60*a,height:60*a}})},setGameClubButtonState:function(t){this.gameClubButton||(this.gameClubButton=this._createGameClubButton()),this.gameClubButton&&(t?this.gameClubButton.show():this.gameClubButton.hide())},navigateToMiniProgram:function(t,e,a,i){var o=this,s=n.getSystemInfoSync();console.log("systemInfo",s),"ios"!==s.platform&&(console.log("this.list == ",GCommon.app_list),n.showMoreGamesModal({appLaunchOptions:GCommon.app_list,success:function(){o.ttSendEvent("showPanel",{panelName:"showMoreGamesModal",missionId:roleData.MissionID}),a&&a()},fail:function(t){console.log("fail",t.errMsg),i&&i()}}))},showModal:function(t,e,a){n.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:t,cancelText:"\u518d\u60f3\u60f3",confirmText:"\u53bb\u5206\u4eab",success:function(t){t.confirm?e&&e():t.cancel&&a&&a()},fail:function(){}})},openAwemeUserProfile:function(){n.openAwemeUserProfile&&n.openAwemeUserProfile()},isDouYin:function(){return"Douyin"==n.getSystemInfoSync().appName}}),cc._RF.pop()},{BasePlatform:"BasePlatform"}],Utils:[function(t,e){"use strict";cc._RF.push(e,"abd64hKPB1MupUBoEYxJZ24","Utils"),t("PoolManager"),e.exports=window.Utils={DBSkDic:{},DBSkTexDic:{},invokeCallback:function(t){if(null!=t&&"function"==typeof t)return t.apply(null,Array.prototype.slice.call(arguments,1))},clone:function(t){return JSON.parse(JSON.stringify(t))},getDayNum:function(){var t=new Date,e=new Date("2018","7","1");return parseInt(Math.abs(t-e)/1e3/60/60/24)},getDate:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return n<10&&(n="0"+n),a<10&&(a="0"+a),e+"-"+n+"-"+a},getFormatTime:function(t,e){var n=t%60,a=Math.floor(t/3600),i=Math.floor(t%3600/60),o=function(t){return t<10?"0"+t:t};return e?o(i)+":"+o(n):o(a)+":"+o(i)+":"+o(n)},format:function(t){return t.format(Array.prototype.slice.call(arguments,1))},showHintText:function(){var t=arguments;cc.resources.load("common/HintText",cc.Prefab,function(e,n){var a=cc.instantiate(n);a.parent=cc.Canvas.instance.node,a.zIndex=1e4,a.x=0,a.y=0;var i=a.getComponent("HintText");i.show.apply(i,t)})},initData:function(t,e){var n=this;if(window.Global)t&&t();else{if(window.Global={},this.maskN=e,this.maskN){this.maskN.active=!1,cc.game.addPersistRootNode(this.maskN);var a=0;Global.openMask=function(){a++,n.maskN.active=!0},Global.closeMask=function(){--a<=0&&(n.maskN.active=!1,a=0)}}var i=new GroupWait(t,2);platformAdapter.initAd(),this.loadConfig(function(){n.updateConfig(),playerInfo.init(),i.done()}),this.loadRes(i.done.bind(i))}},updateConfig:function(){this.updateConfigByKey("talk","type"),this.updateConfigByKey("problems","type"),this.updateConfigByKey("mission_boss","type"),this.updateConfigByMainKey("monster"),this.updateConfigByMainKey("strength","type","level")},updateConfigByKey:function(t,e){var n={};for(var a in Config[t]){var i=Config[t][a];n[i[e]]||(n[i[e]]=[]),n[i[e]].push(i)}Config[t]=n},updateConfigByMainKey:function(t,e,n){void 0===e&&(e="id"),void 0===n&&(n=null);var a={};for(var i in Config[t]){var o=Config[t][i];null==n?a[o[e]]=o:a[o[e]+o[n]]=o}Config[t]=a},loadConfig:function(t){var e=this;window.Config={},cc.resources.loadDir("config",function(n,a){for(var i in a){var o=a[i];Config[o.name]=e.parseConfig(o.text)}t&&t()})},parseConfig:function(t){var e=t.split("\n"),n=function(t){13==t[t.length-1].charCodeAt()&&(t=t.substring(0,t.length-1)),65279==t[0].charCodeAt()&&(t=t.substring(1,t.length));for(var e=(t+=",").length,n=0,a=!1,i=[],o=0;o<e;++o){var s=t[o];'"'==s?a?(a=!1,i.push(t.substring(n+1,o)),n=o+2,o++):(a=!0,n=o):","==s&&(a||(i.push(t.substring(n,o)),n=o+1))}return i},a=null,i=[];for(var o in e){var s=e[o];if("#"!=s[0]&&""!=s){var r=n(s);if(null==a)a=r;else{var c={};for(var l in a){var d=r[l];"["==d[0]&&(d=(d=d.substring(1,d.length-1)).split(",")),c[a[l]]=d}i.push(c)}}}return i},getMissionInfo:function(t,e){return e?Config.mission[t]:Config.mission[t-1]},enterCutScenes:function(t){this.cutScenesN=null,this.cutScenesN?(this.cutScenesN.active=!0,this.cutScenesN.width=1260,this.cutScenesN.height=1180,cc.tween(this.cutScenesN).to(.4,{width:1.26,height:1.18},{easing:"sineOut"}).call(function(){t&&t()}).start()):t&&t()},exitCutScenes:function(t){var e=this;this.cutScenesN?cc.tween(this.cutScenesN).to(.6,{width:1260,height:1180},{easing:"quintIn"}).call(function(){e.cutScenesN.active=!1,t&&t()}).start():t&&t()},switchScene:function(t){Global.openMask();var e=new GroupWait(function(){cc.director.loadScene(t,null,function(){Utils.exitCutScenes(function(){Global.closeMask()})})},2);"game"==t?this.loadBundle("game",function(){cc.director.preloadScene(t,function(){e.done()})}):"main"==t?this.loadBundle("main_a",function(){cc.director.preloadScene(t,function(){e.done()})}):"endless"==t?this.loadBundle("game",function(){cc.director.preloadScene(t,function(){e.done()})}):cc.director.preloadScene(t,function(){e.done()}),Utils.enterCutScenes(function(){e.done()}),platformAdapter.updateBannerAdState(!1),platformAdapter.changeCustomAdState3(!1),platformAdapter.changeCustomAdState4(!1)},getOrLoadDBSk:function(t,e){var n=this,a=cc.assetManager.getBundle("DB");this.DBSkDic[t]?this.invokeCallback(e,this.DBSkDic[t]):a.load(t+"_ske",dragonBones.DragonBonesAsset,function(a,i){a?console.log("getOrLoadDBSk err",a):(n.DBSkDic[t]=i,n.invokeCallback(e,i))})},getOrLoadDBSkTex:function(t,e){var n=cc.assetManager.getBundle("DB");this.getDBTex(n,t,e)},getDBTex:function(t,e,n){var a=this;this.DBSkTexDic[e]?this.invokeCallback(n,this.DBSkTexDic[e]):t.load(e+"_tex",dragonBones.DragonBonesAtlasAsset,function(t,i){t?console.log("getDBTex!!!",t):(a.DBSkTexDic[e]=i,a.invokeCallback(n,i))})},loadBundle:function(t,e){var n=this;this.loadMap=this.loadMap||{},this.loadMap[t]?this.loadMap[t].bundle?e(null,this.loadMap[t].bundle):this.loadMap[t].cbs.push(e):(this.loadMap[t]={bundle:null,cbs:[e]},console.log("loadBundle ****** start",t),cc.assetManager.loadBundle(t,function(e,a){if(console.log("loadBundle ****** end",t,e),e)n.loadMap[t]=null;else{for(var i in n.loadMap[t].cbs)n.loadMap[t].cbs[i](e,a);n.loadMap[t].cbs=[],n.loadMap[t].bundle=a}}))},getEquipSf:function(t,e,n){var a=Config.equip[t-1],i=this.atlasMap.equip.getSpriteFrame(a.icon);e&&(e.spriteFrame=i),n&&n(i)},getMonsterSf:function(t,e,n){this.loadBundle("hero",function(a,i){i.load(t+"",cc.SpriteFrame,function(t,a){e&&(e.spriteFrame=a),n&&n(a)})})},getMonsterDB:function(t,e,n){var a={1:"role_1000",2:"role_1001",3:"role_1001_3"};this.loadBundle("hero",function(i,o){var s=a[t];e.armature(),o.load("soldier/"+s+"_ske",dragonBones.dragonAsset,function(t,a){e.dragonAsset=a,o.load("soldier/"+s+"_tex",dragonBones.DragonBonesAtlasAsset,function(t,i){e.dragonAtlasAsset=i,e.armatureName=s,n(a,i)})})})},getAssetSf:function(t,e,n){var a="iconDiamond";t==MyEnum.ObjectType.Coin?a="iconGold":t==MyEnum.ObjectType.Chip&&(a="icon_chip"),cc.resources.load("ui/"+a,cc.SpriteFrame,function(t,a){e&&(e.spriteFrame=a),n&&n(a)})},getAssetShowSf:function(t,e,n){var a="diamonds";t==MyEnum.ObjectType.Coin?a="golds":t==MyEnum.ObjectType.Chip&&(a="icon_chip"),cc.resources.load("ui/"+a,cc.SpriteFrame,function(t,a){e&&(e.spriteFrame=a),n&&n(a)})},getShareVideoIcon:function(t,e,n){var a="icon_share";t==MyEnum.ShareVideoState.Video&&(a="icon_video"),cc.resources.load("ui/"+a,cc.SpriteFrame,function(t,a){e&&(e.spriteFrame=a),n&&n(a)})},loadRes:function(t){t&&t()},reloadPre:function(){},getPrefab:function(t){var e;return null==this?void 0:null==(e=this.prefabMap)?void 0:e[t]},getGradeSf:function(t,e){this.loadBundle("main_a",function(n,a){a.load("panel/matchPanel/dw/"+t,cc.SpriteFrame,function(t,n){e.spriteFrame=n})})},showTeacher:function(t,e){var n=function(){cc.Canvas.instance.node.teacher.startTalk(t,e)};cc.Canvas.instance.node.teacher?n():this.loadBundle("main_a",function(t,e){e.load("prefabs/teacher",cc.Prefab,function(t,e){var a=cc.instantiate(e);a.parent=cc.Canvas.instance.node;var i=a.getComponent("teacher");cc.Canvas.instance.node.teacher=i,n()})})},startGuide:function(t,e){var n=this;this.guideCtrl?this.guideCtrl.startGuide(t,e):this.loadBundle("main_a",function(a,i){i.load("panel/guideCtrl/guideCtrl",cc.Prefab,function(a,i){var o=cc.instantiate(i);o.position=cc.v2(cc.Canvas.instance.node.width/2,cc.Canvas.instance.node.height/2),cc.game.addPersistRootNode(o),n.guideCtrl=o.getComponent("guideCtrl"),n.guideCtrl.startGuide(t,e)})})},showMoreGame:function(){var t=this;this.moreGamePanel?this.moreGamePanel.node.active=!0:this.loadBundle("main_a",function(e,n){n.load("panel/panelMoreGame/panelMoreGame",cc.Prefab,function(e,n){var a=cc.instantiate(n);a.position=cc.v2(cc.Canvas.instance.node.width/2,cc.Canvas.instance.node.height/2),cc.game.addPersistRootNode(a),t.moreGamePanel=a.getComponent("panelMoreGame")})})},checkAndStartGuide:function(t){if(!playerInfo.getValueByKey("guide_"+t)){playerInfo.setValueByKey("guide_"+t,!0);var e=[];for(var n in Config.guide){var a=Config.guide[n];a.name==t&&e.push(a)}e.length>0&&this.startGuide(e,!0)}},checkChapterGuide:function(){},getCost:function(t,e,n){return Number(e)+n*(t-1)},getAvgCost:function(){var t=playerInfo.ELevels,e=0;for(var n in t)e+=t[n];(e=Math.floor(e/4))>Config.student_1.length&&(e=Config.student_1.length);var a=Config.student_1[e-1];return Math.floor(a.cost)},getAvgLevel:function(){var t=playerInfo.ELevels,e=0;for(var n in t)e+=t[n];return Math.floor(e/4)},getMonsterInfo:function(t,e){var n;e=null!=(n=e)?n:{};var a=function(t,e,n){return n=n||0,Math.ceil((Number(t)+(e||0))*(1+n/100))};return{hp:a(t.hp,e.hp,e.p_hp),atk:a(t.atk,e.atk,e.p_atk),atk_speed:a(t.atk_speed,e.atk_speed,e.p_atk_speed),defense:a(t.defense,e.defense,e.p_defense),crit:a(t.crit,e.crit,e.p_crit),crit_num:a(t.crit_num,e.crit_num,e.p_crit_num)}},getStudentInfo:function(t,e){var n,a=t.id,i=t.eLevel;e=null!=(n=e)?n:{};var o="student_"+a,s=Config[o][i-1]||Config[o][Config[o].length-1],r=function(t,e,n){return n=n||0,Math.ceil((Number(t)+(e||0))*(1+n/100))};return console.log("getStudentInfo",s,e,t,o,i,"eLevel"),{hp:r(s.hp,e.hp,e.p_hp),atk:r(s.atk,e.atk,e.p_atk),atk_speed:r(s.atk_speed,e.atk_speed,e.p_atk_speed),defense:r(s.defense,e.defense,e.p_defense),crit:r(s.crit,e.crit,e.p_crit),crit_num:r(s.crit_num,e.crit_num,e.p_crit_num)}},getPower:function(t){var e=t.atk*t.atk_speed/10*(t.crit_num*t.crit/100+1*(1-t.crit/100));return 3==t.e_id&&(e/=2),Math.ceil(e)},checkAllEquipRedPoint:function(){for(var t=0;t<3;++t)for(var e=Number(t)+1,n=0;n<6;++n)if(this.checkEquipRedPoint(e,n))return!0;return!1},getEquipIdByPos:function(t,e){var n=Config.equip,a=Math.pow(2,t-1);for(var i in n){var o=n[i];if(Number(o.pos)==e&&Number(o.e_id)&a)return Number(o.id)}},checkEquipRedPoint:function(t,e){var n=playerInfo.getEEquips(t)[e];if(n){var a=n.level,i=n.id,o=Config.equip[i-1],s=this.getCost(a,o.chip,o.chip_add);if(playerInfo.getChipNum(i)<s)return!1;var r=this.getCost(a,o.cost,o.cost_add);return!(playerInfo.Gold<r)}var c=this.getEquipIdByPos(t,e);return!!playerInfo.haveChip(c)},checkAllStudentRedPoint:function(){var t=playerInfo.ELevels;for(var e in t){var n=Number(e)+1,a=t[e];a>Config["student_"+n].length&&(a=Config["student_"+n].length);var i=Config["student_"+n][a-1],o=i.cost;if(1==Number(i.cost_type)&&(o=Math.floor(o*playerInfo.getLevelUpCoinRate())),playerInfo.Gold>=o)return!0}return!1},getBigNum:function(t){var e=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"];if(t<=10)return e[t];if(t<20)return e[10]+e[t%10];if(t<100){var n=t%10,a=e[Math.floor(t/10)]+e[10];return 0!=n&&(a+=e[n]),a}return t},getChapterMissionNum:function(t){var e=null;for(var n in Config.mission){var a=Config.mission[n];if(Number(a.mission)>t)break;e=n}return Config.mission[e].level},emitGuideEvent:function(t){cc.director.emit(MyEnum.CustomEvent.GuideEvent,{type:t})},getSpecialHC:function(t,e,n){var a=Config.special[e-1001];Utils.loadBundle("hero",function(e,i){i.load("hcsp/"+a.icon,cc.SpriteFrame,function(e,a){t&&(t.spriteFrame=a),n&&n(a)})})}},cc._RF.pop()},{PoolManager:"PoolManager"}],WXPlatform:[function(t,e){"use strict";var n;cc._RF.push(e,"529d2yNq+VIBKtEA/CrMi+8","WXPlatform");var a=window.wx,i=t("./AdManager").AdManager,o=t("./AdManager").RewardAdMnager,s=t("./AdManager").InterAdMnager,r=t("./AdManager").wxAdCreateFuncs;cc.Class(((n={extends:t("BasePlatform"),properties:{query:{default:{}}},init:function(){this._super(),this.startLogin(),a.getOpenDataContext&&(this.openDataContext=a.getOpenDataContext(),this.sharedCanvas=this.openDataContext.canvas),a.showShareMenu({withShareTicket:!0}),this.systemInfo=a.getSystemInfoSync(),this._onShareAppMessage(),this._onShow()},_onShow:function(){var t=this;this.query=a.getLaunchOptionsSync().query,this.scene=a.getLaunchOptionsSync().scene,this.fromScene=this.scene,console.log("wx.getLaunchOptionsSync()",a.getLaunchOptionsSync(),this.query,this.query.ads);var e=this.getJsonLocal("notIsFirst");if(this.videoNumForce=0,this.isShowLoading=!0,e){for(var n in console.log(this.scene,this.query,!!this.query,"aaa"),this.query);1095==this.scene&&(this.noShowCustomMore=!0,this.startPlayVideoByNumOld(1))}else{for(var i in this.setJsonLocal("notIsFirst",1),console.log(this.scene,this.query,!!this.query,"aaa"),this.query);var o=this.query.ads?Number(this.query.ads):0;1095==this.scene&&o&&(this.noShowCustomMore=!0,this.startPlayVideoByNum(o))}this.aldSendEvent("\u8fdb\u5165\u6e38\u620f\u7684\u573a\u666f\u503c",{scene:this.scene}),GCommon.fromScene=this.scene,a.onShow(function(e){t.checkUpdate(),e.query&&e.query.type&&t.aldSendEvent("\u4ece\u5206\u4eab\u94fe\u63a5\u8fdb\u5165\u6e38\u620f",{type:e.query.type}),t.shareCB&&Utils.invokeCallback(t.shareCB),t.shareCB=null})},login:function(t){var e=this;this.getOnlineGlobalInfo(function(){e.openId=a.getStorageSync("openId"),e.openId?Utils.invokeCallback(t):e._login(t)})},_login:function(t){var e=this;a.login({success:function(n){e._getOpenId(n.code,function(){Utils.invokeCallback(t)})},fail:function(){Utils.invokeCallback(t)}})},_getOpenId:function(t,e){var n=this;this.request({url:MyEnum.PHPHOST+"/api/wx/login.php",data:{js_code:t,appid:MyEnum.APPID},success:function(t){n.openId=t.data.openid,n.session_key=t.data.session_key;try{a.setStorageSync("openId",n.openId)}catch(i){}Utils.invokeCallback(e)},fail:function(){Utils.invokeCallback(e)}})},setJsonLocal:function(t,e){cc.sys.localStorage.setItem(t,JSON.stringify(e))},getJsonLocal:function(t){var e=cc.sys.localStorage.getItem(t);return e?JSON.parse(e):null},startPlayVideoByNum:function(t){var e=this;console.log("startPlayVideoByNum",t),t<=0||(this.videoNumForce++,this.aldSendEvent("\u5f3a\u62c9\u89c6\u9891",{result:"\u5f00\u59cb"}),this.aldSendEvent("\u5f3a\u62c9\u89c6\u9891\u6b21\u6570",{result:this.videoNumForce}),this.startShowVideo(function(){console.log("startPlayVideoByNum \u6210\u529f"),e.aldSendEvent("\u5f3a\u62c9\u89c6\u9891",{result:"\u6210\u529f"})},function(){e.aldSendEvent("\u5f3a\u62c9\u89c6\u9891",{result:"\u5931\u8d25"}),console.log("startPlayVideoByNum \u5931\u8d25"),t>1&&(e.isShowLoading=!1,a.showToast({title:"\u8bf7\u770b\u5b8c\u89c6\u9891!!!!",icon:"loading",duration:1500})),e.startPlayVideoByNum(t-1)},function(){e.aldSendEvent("\u5f3a\u62c9\u89c6\u9891",{result:"\u76f4\u63a5\u9519\u8bef"}),console.log("startPlayVideoByNum \u9519\u8bef"),e.startPlayVideoByNum(t-1)}))},startPlayVideoByNumOld:function(t){var e=this;console.log("startPlayVideoByNum",t),t<=0||(this.videoNumForce++,this.aldSendEvent("\u8001\u7528\u6237\u5f3a\u62c9\u89c6\u9891",{result:"\u5f00\u59cb"}),this.aldSendEvent("\u8001\u7528\u6237\u5f3a\u62c9\u89c6\u9891\u6b21\u6570",{result:this.videoNumForce}),this.startShowVideo(function(){console.log("startPlayVideoByNum \u6210\u529f"),e.aldSendEvent("\u8001\u7528\u6237\u5f3a\u62c9\u89c6\u9891",{result:"\u6210\u529f"})},function(){e.aldSendEvent("\u8001\u7528\u6237\u5f3a\u62c9\u89c6\u9891",{result:"\u5931\u8d25"}),console.log("startPlayVideoByNum \u5931\u8d25"),t>1&&(e.isShowLoading=!1,a.showToast({title:"\u8bf7\u770b\u5b8c\u89c6\u9891!!!!",icon:"loading",duration:1500})),e.startPlayVideoByNumOld(t-1)},function(){e.aldSendEvent("\u8001\u7528\u6237\u5f3a\u62c9\u89c6\u9891",{result:"\u76f4\u63a5\u9519\u8bef"}),console.log("startPlayVideoByNum \u9519\u8bef"),e.startPlayVideoByNumOld(t-1)}))},startShowVideo:function(t,e,n){var a=this.createRewardedVideoAd(n);a?(a.offClose(),a.onClose(function(n){console.log("vvvvvvvvvvvverr sss",n),n&&n.isEnded||void 0===n?t&&t():e&&e()}),a.offError(),a.onError(function(t){console.log("vvvvvvvvvvvverr vvv",t),a.offError()})):e&&e()},createRewardedVideoAd:function(t){var e=null,n=this;return a.createRewardedVideoAd&&(e=a.createRewardedVideoAd({adUnitId:MyEnum.RewardedVideoAdID}),this.isShowLoading&&a.showLoading({title:"loading"}),e.load().then(function(){e.show(),n.isShowLoading=!0,n.isShowLoading&&a.hideLoading()}).catch(function(i){n.isShowLoading&&a.hideLoading(),n.isShowLoading=!0,e.destroy(),console.log("startPlayVideoByNum","\u52a0\u8f7d\u5931\u8d25",i),t&&t(),e=null})),e},changeCustomMoreAdState:function(t,e){var n=this;if(a&&a.createCustomAd&&!this.noShowCustomMore){console.log("customAdMore\u663e\u793a");var i=cc.v2(0,cc.winSize.height/5),o=this.systemInfo.windowWidth,s=this.systemInfo.windowHeight,r=o/cc.winSize.width,c=s/cc.winSize.height,l=cc.v2(i.x*r,i.y*c);if("function"==typeof a.createCustomAd){var d=a.createCustomAd({adUnitId:MyEnum.CustomMoreUnitId,adIntervals:120,left:l.x,top:l.y,fixed:0});return this.aldSendEvent("\u591a\u683c\u5b50\u5e7f\u544a",{result:"\u5f00\u59cb"}),d&&(d.onLoad(function(){console.log("\u591a\u683c\u5b50\uff0c\u52a0\u8f7d\u6210\u529f"),t?(e&&e(),n.aldSendEvent("\u52a0\u8f7d\u591a\u683c\u5b50\u5e7f\u544a",{result:"\u6210\u529f"}),d.show().catch(function(t){console.log(t,"\u5931\u8d25"),n.aldSendEvent("\u663e\u793a\u591a\u683c\u5b50\u5e7f\u544a",{result:"\u5931\u8d25"})})):d.hide().catch(function(t){console.log("hide err",t),d&&(d.destroy(),d=null)})}),d.onError(function(t){console.log(t,"\u52a0\u8f7d\u9519\u8bef"),n.aldSendEvent("\u591a\u683c\u5b50\u5e7f\u544a",{result:"\u9519\u8bef"}),e&&e()})),d}}},subscribe:function(){},updataInfo:function(){},uploadSubsTime:function(){},prefetchHighScore:function(){var t=this;this.db.collection("score").doc(window.openid+"-score").get().then(function(e){t.personalHighScore?e.data.max>t.personalHighScore&&(t.personalHighScore=e.data.max):t.personalHighScore=e.data.max}).catch(function(e){console.error("db get score catch error",e),t.prefetchHighScoreFailed=!0})},_onShareAppMessage:function(){a.aldOnShareAppMessage(function(){return{query:"userId="+this.openId+"&"+this.defaultShareInfo.query,title:this.defaultShareInfo.str,imageUrl:this.defaultShareInfo.img}}.bind(this))},saveLocationData:function(t,e){try{a.setStorageSync(t,JSON.stringify(e))}catch(n){}},getLocationData:function(t){var e=a.getStorageSync(t);if(e&&""!=typeof e){var n="";try{n=JSON.parse(e)}catch(i){n=e}return n}return null},removeStorage:function(t){try{a.removeStorageSync(t)}catch(e){}},request:function(t){a?(t.header=t.header||{"content-type":"application/json"},t.method=t.method||"GET",a.request(t)):t.fail&&t.fail()},aldSendEvent:function(t,e){t="A000_"+t,e||(e={success:1}),console.log("aldSendEvent",t,e),a.aldSendEvent(t,e)},sendMissionStartEvent:function(t){a.aldStage.onStart(t)},sendMissionRunningEvent:function(t){a.aldStage.onRunning(t)},sendMissionEndEvent:function(t){a.aldStage.onEnd(t)},createOfInterstitialAd:function(){var t=null;return a.createInterstitialAd&&(t=a.createInterstitialAd({adUnitId:"adunit-24c32a404f89441b"})),t},startOfShowInterAd:function(t,e){var n=this.createOfInterstitialAd();console.log("startOfShowInterAd",n),n&&(n.offClose(),n.onClose(function(){Utils.invokeCallback(t),n.offClose()}),n.offError(),n.onError(function(t){console.log("startOfShowInterAd err",t),Utils.invokeCallback(e)}),n.show())},initSharedOfCanvas:function(t,e,n){if(this.openDataContext){var a=this.openDataContext.canvas;a.width=t,a.height=e,this.shareCanvasSprite=n,this.texture=new cc.Texture2D;var i=new cc.SpriteFrame;i.setTexture(this.texture),n.spriteFrame=i,this.texture.initWithElement(this.sharedCanvas)}},updateSharedofCanvas:function(){this.openDataContext&&this.texture.handleLoadedTexture()},postMessageDate:function(t){this.openDataContext&&this.openDataContext.postMessage(t)},startLogin:function(t){this.login(t)},_showUserInfoButton:function(t){var e=this;if(!this.userInfoButton){if(!a.createUserInfoButton)return void Utils.invokeCallback(t);this.userInfoButton=this._createUserInfoButton(),this.userInfoButton.onTap(function(n){e.userInfoButton.hide(),"getUserInfo:ok"==n.errMsg?Utils.invokeCallback(t,!0):Utils.invokeCallback(t)})}this.userInfoButton.show()},_createUserInfoButton:function(){var t=this.systemInfo.windowWidth,e=this.systemInfo.windowHeight;return a.createUserInfoButton({type:"image",image:"src/myOpenDataContext/res/transparent.png",style:{left:0,top:0,width:t,height:e,lineHeight:40,borderRadius:4}})},_getUserInfo:function(t){var e=this;if(e.data)Utils.invokeCallback(t);else var n=a.getUserInfo({success:function(n){e.data=n.userInfo,e.updataInfo(n.userInfo,t)},fail:function(){Utils.invokeCallback(n)}})},shareAppMessage:function(t,e,n){var i=this,o="userId="+this.openId;t.query&&(o+="&"+t.query),GCommon.shareState=!0,a.aldShareAppMessage({title:t.str||this.defaultShareInfo.str,imageUrl:t.img||this.defaultShareInfo.img,query:o});var s=this,r=+new Date;this.shareCB=function(){var a=+new Date,o=2750;cc.sys.platform==cc.sys.ANDROID&&(o=2350),a-r>o?(i.maxShareRate=i.maxShareRate||.5,Math.random()<i.maxShareRate?(GCommon.OnlineInfo.modalShareTip&&roleData.MissionID>=GCommon.OnlineInfo.modalShareTip?s.showModal("\u5206\u4eab\u523030\u4eba\u4ee5\u4e0a\u7684\u7fa4\u624d\u6709\u6548\u54e6",function(){s.shareAppMessage(t,e,n)}):Utils.showHintText("share_1"),Utils.invokeCallback(n),i.maxShareRate=.01):(i.shareSuccessIndex||(i.shareSuccessIndex=0),i.shareSuccessIndex++,i.aldSendEvent("\u5206\u4eab\u603b\u6210\u529f\u6b21\u6570",{shareSuccessIndex:i.shareSuccessIndex}),i.aldSendEvent("\u5206\u4eab\u6210\u529f\u65f6\u5206\u4eab\u94fe\u63a5",{share:t.query}),i.maxShareRate=.3,Utils.invokeCallback(e)&&Utils.showHintText("share_3"))):(GCommon.OnlineInfo.modalShareTip&&roleData.MissionID>=GCommon.OnlineInfo.modalShareTip?s.showModal("\u5206\u4eab\u523030\u4eba\u4ee5\u4e0a\u7684\u7fa4\u624d\u6709\u6548\u54e6",function(){s.shareAppMessage(t,e,n)}):Utils.showHintText("share_1"),Utils.invokeCallback(n),i.maxShareRate=.3),GCommon.shareState=!1,i.shareCB=null}},checkUpdate:function(){var t=a.getUpdateManager();t.onUpdateReady(function(){a.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(e){e.confirm&&t.applyUpdate()}})})},navigateToMiniProgram:function(t,e,n,i,o){return platformAdapter.aldSendEvent("\u6e38\u620f\u8df3\u8f6c_\u5f00\u59cb\u8df3\u8f6c",{name:o}),!!a.navigateToMiniProgram&&(a.navigateToMiniProgram({appId:t||"wx908a3c4edbd2d3e8",path:e,success:function(){platformAdapter.aldSendEvent("\u6e38\u620f\u8df3\u8f6c_\u8df3\u8f6c\u6210\u529f",{name:o}),n&&n()},fail:function(){i&&i()}}),!0)},showModal:function(t,e,n){a.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:t,cancelText:"\u518d\u60f3\u60f3",confirmText:"\u53bb\u5206\u4eab",success:function(t){t.confirm?e&&e():t.cancel&&n&&n()},fail:function(){}})},createGridAd:function(){if(this.gridAd)this.gridAd.show();else{var t=this.systemInfo;if(!(this.checkVerson(t.SDKVersion,"2.0.4")<0)){this.createBannerTimes=this.createBannerTimes||0,this.createBannerTimes++;var e=this.systemInfo.windowWidth,n=this.systemInfo.windowHeight,i=cc.winSize.width,o=(cc.winSize.height,a.createGridAd({adUnitId:"adunit-1ad12f2060b3420d",adTheme:"black",adIntervals:30,gridCount:5,style:{top:n-.171875*e,left:e/2-i/2,width:i}}));return o.onResize(function(t){var a=n;e/n<640/1136&&(a=e/640*1136),o.style.top=a/2+n/2-t.height-1,o.style.left=e/2-t.width/2}),o}}},hideGridAd:function(){this.gridAd&&this.gridAd.hide()},createGameCustomAd:function(t){var e=this,n=this.systemInfo.windowWidth,i=this.systemInfo.windowHeight,o=cc.winSize.width,s=cc.winSize.height;console.log("rect  ***",t),console.log("***createGridAd*****",{left:t.x*n/o,top:(s-(t.y+t.height))*i/s,width:t.width*n/o,opacity:.8},n,i,o,s);var r=a.createCustomAd({adUnitId:"adunit-148af0f80daa3730",adIntervals:30,style:{left:t.x*n/o,top:(s-t.y-t.height)*i/s,width:t.width*n/o,opacity:.8}});r.offError(),r.onError(function(t){console.log("err",t);var n=e.createBannerAd();e.gameCustomAd=n,n.show()}),this.gameCustomAd=r,r.show()},hideGameCustomAd:function(){var t;null==(t=this.gameCustomAd)||t.destroy(),this.gameCustomAd=null},initAd:function(){var t=this,e=function(t,e){return t+=cc.winSize.width/2,e+=cc.winSize.height/2,cc.v2(t,e)};this.bannerManager=new i({id:MyEnum.BannerAdUnitId,pos:e(0,-340),anchor:cc.v2(.5,1)},r.createBannerAd,3e4),this.bannerManager.name="bannerManager",setTimeout(function(){t.bannerManager.checkAdBuffer()},2e3),this.girdAdManager=new i({id:MyEnum.GridUnitId,pos:e(0,-340),anchor:cc.v2(.5,1)},r.createGridAd,cc.macro.REPEAT_FOREVER,3e4,1),this.girdAdManager.name="girdAdManager",setTimeout(function(){t.girdAdManager.checkAdBuffer()},6e3),this.customAdManager=new i({id:MyEnum.CustomMoreUnitId,pos:e(0,-340),anchor:cc.v2(.5,1),realWidth:288,realHeight:86.4},r.createCustomAd,cc.macro.REPEAT_FOREVER,1e4,1),this.customAdManager.name="customAdManager",this.customAdManager.checkAdBuffer(),this.customAdManager3=new i({id:MyEnum.CustomOneUnitId,pos:e(-316,-110),anchor:cc.v2(0,.5),realWidth:68*.8,realHeight:86.4},r.createCustomAd,cc.macro.REPEAT_FOREVER,3e4,1),setTimeout(function(){t.customAdManager3.checkAdBuffer()},3e3),this.customAdManager4=new i({id:MyEnum.CustomOneUnitId2,pos:e(316,-110),anchor:cc.v2(1,.5),realWidth:68*.8,realHeight:86.4},r.createCustomAd,cc.macro.REPEAT_FOREVER,3e4,1),setTimeout(function(){t.customAdManager4.checkAdBuffer()},3e3),this.rewardManager=new o(MyEnum.RewardedVideoAdID,r.createRewardedVideoAd,!0),setTimeout(function(){t.rewardManager.preLoad()},15e3),this.interAdManager=new s(MyEnum.InterUnitId,r.createInterstitialAd,!0),setTimeout(function(){t.interAdManager.preLoad()},2e4)},updateBannerAdState:function(t){var e=this;if(MyEnum.isShowAd){console.log("updateBannerAdState vvv",t),this.bannerState222=t,this.bannerAdState=t,this.index=this.index||0;var n=[this.changeBannerState.bind(this),this.changeGirdAdState.bind(this),this.changeCustomAdState.bind(this)];if(t){var a=n[this.index%n.length];this.index++;var i=this.index;a(t).then(function(){e.bannerState222||e.updateBannerAdState(!1)}).catch(function(){setTimeout(function(){e.bannerState222&&i==e.index&&e.updateBannerAdState(t)},200)})}else for(var o in n)n[o](t)}},changeBannerState:function(t){return MyEnum.isShowAd?this.bannerManager.updateShowState(t):Promise.resolve()},changeGirdAdState:function(t){return MyEnum.isShowAd?this.girdAdManager.updateShowState(t):Promise.resolve()},changeCustomAdState:function(t){return MyEnum.isShowAd?this.customAdManager.updateShowState(t):Promise.resolve()},changeCustomAdState3:function(t){return MyEnum.isShowAd?this.customAdManager3.updateShowState(t):Promise.resolve()},changeCustomAdState4:function(t){return MyEnum.isShowAd?this.customAdManager4.updateShowState(t):Promise.resolve()},startPlayVideo:function(t,e,n){MyEnum.isShowAd?(a.showLoading({title:"loading"}),this.rewardManager.play(t,e,n,function(){a.hideLoading()})):t&&t()}}).startOfShowInterAd=function(){var t=this;MyEnum.isShowAd&&(console.log("startOfShowInterAd"),this.aldSendEvent("\u63d2\u5c4f\u5e7f\u544a_\u5f00\u59cb\u64ad\u653e"),this.interAdManager.play(function(){t.aldSendEvent("\u63d2\u5c4f\u5e7f\u544a_\u64ad\u653e\u6210\u529f")},function(){t.aldSendEvent("\u63d2\u5c4f\u5e7f\u544a_\u64ad\u653e\u5931\u8d25")}))},n)),cc._RF.pop()},{"./AdManager":"AdManager",BasePlatform:"BasePlatform"}],WXRankView:[function(t,e){"use strict";cc._RF.push(e,"698ffqIz/hIQI5hHwOoptZs","WXRankView"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onEnable:function(){platformAdapter.initSharedOfCanvas(this.node.width,this.node.height,this.node.getComponent(cc.Sprite)),platformAdapter.postMessageDate({action:MyEnum.DomainAction.FriendRank})},onClickedNextBtn:function(){platformAdapter.postMessageDate({action:MyEnum.DomainAction.NextPage})},onClickedLastBtn:function(){platformAdapter.postMessageDate({action:MyEnum.DomainAction.LastPage})},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel.bind(this))},touchStart:function(){platformAdapter.postMessageDate({action:MyEnum.DomainAction.TouchStart})},touchMove:function(t){var e=t.getLocation().sub(t.getPreviousLocation());platformAdapter.postMessageDate({action:MyEnum.DomainAction.TouchMove,x:e.x,y:e.y})},touchEnd:function(){platformAdapter.postMessageDate({action:MyEnum.DomainAction.TouchEnd})},touchCancel:function(){platformAdapter.postMessageDate({action:MyEnum.DomainAction.TouchEnd})},update:function(){platformAdapter.updateSharedofCanvas()}}),cc._RF.pop()},{}],asInfoManager:[function(t,e){"use strict";cc._RF.push(e,"b9e8boU4HFG2ZNxy7jTwbXm","asInfoManager"),cc.global={},cc.global.asInfoCB=function(t){switch(console.log("\u6536\u5230as\u4fe1\u606f"),t.msg_id){case"LOOK_VIDEO_FINISH":console.log("\u63a5\u53d7\u6d88\u606f:"+JSON.stringify(t)),window.watchVideoSuc&&watchVideoSuc();break;case"VIDEO_FINISH_UNLOAD":console.log("\u63a5\u53d7\u6d88\u606f:"+JSON.stringify(t)),window.watchVideoErr&&watchVideoErr(),Utils.showHintText("ad_unLoad");break;case"LOOK_VIDEO_UNFINISH":console.log("\u63a5\u53d7\u6d88\u606f:"+JSON.stringify(t)),Utils.showHintText("ad_as_fail"),window.watchVideoFail&&watchVideoFail()}window.watchVideoSuc=null,window.watchVideoErr=null,window.watchVideoFail=null},cc._RF.pop()},{}],baseMan:[function(t,e){"use strict";cc._RF.push(e,"faa5apigkJGxKPtW/6DGIXi","baseMan"),cc.Class({extends:cc.Component,properties:{hpBar:cc.ProgressBar},onLoad:function(){this.isDead=!1},onEnable:function(){this.isDead=!1,this.attackRoleList=[],this.lastAttackTime=0,this.hpBar.progress=1,this.hpBar.node.active=!1},onDisable:function(){this.attackTargetRole=null,this.attackRoleList=[]},getDefense:function(){return this._defense},decHp:function(t){return this.blood-=t,this.hpBar.progress=this.blood/this.initBlood,this.blood<=0?(this.hpBar.node.active=!1,!0):(this.hpBar.node.active=!0,!1)},playCritAni:function(){var t=new cc.Node;t.parent=cc.director.getScene(),t.position=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);var e=t.addComponent(cc.Label);e.string="\u66b4\u51fb",e.fontSize=Math.floor(10*Math.random())+18,t.color=cc.Color.WHITE.fromHSV(Math.random(),1,1),cc.tween(t).by(.3,{x:200*(Math.random()-.5),y:100*Math.random()},{easing:"sineOut"}).call(function(){t.destroy()}).start()},updateInfo:function(t,e,n){void 0===n&&(n=0),this.hpBar.node.active=!1},onCollisionEnter:function(t,e){if(e.tag!=t.tag){var n=t.node.parent.getComponent("baseMan");this.attackRoleList.push(n),this.playAnim}},onCollisionExit:function(t){var e=t.node.parent.getComponent("baseMan");if(e){var n=this.attackRoleList.indexOf(e);n>=0&&this.attackRoleList.splice(n,1)}},checkAttack:function(){var t=this;this.attackTargetRole&&!this.attackTargetRole.isDead&&this.attackRoleList.length>0&&this.attackRoleList.indexOf(this.attackTargetRole)>=0||(this.attackTargetRole=null,this.attackRoleList.length>0&&(this.attackRoleList.sort(function(e,n){return e.node.position.sub(t.node.position).mag()-n.node.position.sub(t.node.position).mag()}),this.attackTargetRole=this.attackRoleList[0]))},attack:function(){this.canAttack()&&(this.attackPos=this.attackTargetRole.node.position,this.playAtkAnim(),this.lastAttackTime=Date.now())},canAttack:function(){if(!(this.waitTime&&this.waitTime>0))return this.attackTargetRole&&!this.attackTargetRole.isDead&&Date.now()-this.lastAttackTime>=this.attackCDTime},move:function(){},update:function(t){this.isDead||this.mgr&&this.mgr.gameState==MyEnum.GameState.Battle&&(this.waitTime&&this.waitTime>0&&(this.waitTime-=t),this.move(t),this.checkAttack(),this.attack())}}),cc._RF.pop()},{}],boss:[function(t,e){"use strict";cc._RF.push(e,"f8714E0j0ZDwaLrh9+lqAB9","boss"),cc.Class({extends:t("hero"),properties:{targetN:cc.Node,bossSfs:[cc.SpriteFrame]},playAnim:function(t,e,n){var a=this;void 0===e&&(e=-1),void 0===n&&(n=1),console.log("playAnim **** name",t),cc.Tween.stopAllByTarget(this.targetN),this.targetN.scale=.5,this.targetN.angle=0,"die"==t?(cc.find("selfCol",this.node).getComponent(cc.Collider).enabled=!1,cc.tween(this.node).then(cc.tween().to(.1,{opacity:100}).to(.1,{opacity:255})).repeat(3).to(.5,{opacity:0}).call(function(){a.node.destroy()}).start()):"atk"==t?this.startAttack():cc.tween(this.targetN).repeatForever(cc.tween().by(.5,{scale:.02}).by(.5,{scale:-.02})).start()},updateIcon:function(t){this.skinId=t,this.targetN.getComponent(cc.Sprite).spriteFrame=this.bossSfs[t-1]},startAttack:function(){var t=this;if(this.attackTargetRole){var e=this.attackTargetRole,n={_attack:this._attack,_crit:this._crit,_crit_num:this._crit_num};cc.tween(this.targetN).set({scale:.5,angle:0}).by(.1,{scale:.05,angle:5}).call(function(){t.atkOver(e,n)}).by(.1,{scale:-.05,angle:-5}).start()}},updateInfo:function(){this._super.apply(this,arguments),this.node.scaleX=Math.abs(this.node.scaleX);var t=this.node.getComponent(cc.Collider);t.size=new cc.Size(200,1200),this.playAnim("idle")}}),cc._RF.pop()},{hero:"hero"}],cn_string:[function(t,e){"use strict";cc._RF.push(e,"838aakifyVIOrSGVzItG0IJ","cn_string");var n={normal:"{0}",mission_1:"\u7b2c {0} \u5173",coin_1:"\u91d1\u5e01\u4e0d\u8db3",coin_2:"\u91d1\u5e01+{0}",diamond_1:"\u94bb\u77f3\u4e0d\u8db3",diamond_2:"\u94bb\u77f3+{0}",islock:"\u672a\u83b7\u5f97",islock2:"\u672a\u89e3\u9501",skin_1:"\u5f53\u524d\u9875\u5df2\u5168\u90e8\u83b7\u5f97",skin_2:"\u6210\u529f\u83b7\u5f97{0}\u76ae\u80a4",box:"\u91d1\u5e01+{0},\u4f53\u529b+{1}",physical:"\u4f53\u529b+{0}",physicalSub:"\u4f53\u529b-{0}",ldTimes:"\u73a9\u5173\u5361\u8d62\u6b21\u6570",challen_open:"\u5b8c\u6210{0}\u5173\u540e\u5f00\u542f",share_1:"\u5206\u4eab\u7ed9\u5176\u4ed6\u597d\u53cb\u8bd5\u8bd5\u5427",share_2:"\u5206\u4eab\u7ed9\u5176\u4ed6\u597d\u53cb\u8bd5\u8bd5\u5427",share_3:"\u5206\u4eab\u6210\u529f",share_4:"\u5206\u4eab\u5931\u8d25",share_5:"\u5f55\u5c4f\u51fa\u4e86\u70b9\u95ee\u9898\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5~",share_6:"\u5f55\u5c4f\u5206\u4eab\u6210\u529f\u624d\u6709\u5956\u52b1\u54e6~",video:"\u770b\u5b8c\u89c6\u9891\u624d\u6709\u5956\u52b1\u54e6~",mission_0:"\u5173\u5361\u672a\u89e3\u9501",mission_max:"\u540e\u7eed\u5173\u5361\u656c\u8bf7\u671f\u5f85",levelUp:"\u5347\u7ea7",unlock:"\u89e3\u9501",equip_1:"\u8d44\u6e90\u4e0d\u591f",levelup_success:"\u5347\u7ea7\u6210\u529f",not_equip:"\u8be5\u88c5\u5907\u8fd8\u672a\u83b7\u5f97",used_equip:"\u88c5\u5907\u6210\u529f",mission_none:"\u540e\u7eed\u5173\u5361\uff0c\u656c\u8bf7\u671f\u5f85",levelupTip1:"\u8be5\u7269\u54c1\u6ca1\u6cd5\u5347\u7ea7",levelupTip2:"\u8be5\u5b66\u751f\u5df2\u7ecf\u662f\u6700\u9ad8\u7ea7",addStep:"\u6b65\u6570+4",not_times:"\u6b21\u6570\u4e0d\u591f",chip_tip:"\u788e\u7247+{0}",chip_tip2:"\u89e3\u9501\u6210\u529f",add_star:"\u4fdd\u661f\u6210\u529f",add_atk:"\u5f97\u5206\u80fd\u529b\u6c38\u4e45+{0}",add_atk_speed:"\u505a\u9898\u901f\u5ea6\u6c38\u4e45+{0}",add_defense:"\u4e13\u6ce8\u529b\u6c38\u4e45+{0}",get_success:"{0}\u83b7\u53d6\u6210\u529f",phy_tip1:"\u518d\u770b\u4e00\u6b21\u5e7f\u544a\u5373\u53ef\u83b7\u5f97\u65e0\u9650\u4f53\u529b",phy_tip2:"\u83b7\u5f97\u65e0\u9650\u4f53\u529b",store_tip1:"\u5df2\u552e\u7a7a",ad_play_fail:"\u4f11\u606f\u4e00\u4e0b\uff0c\u660e\u5929\u518d\u8bd5\u8bd5\u5427",ad_unLoad:"\u89c6\u9891\u672a\u51c6\u5907\u597d,\u8bf7\u7a0d\u540e\u518d\u8bd5",ad_as_fail:"\u8bf7\u770b\u5b8c\u6574\u89c6\u9891"};e.exports=window.LangData={getStr:function(t){var e=n[t]||"";return arguments.length>1&&(e=e.format(Array.prototype.slice.call(arguments,1))),e}},cc._RF.pop()},{}],hero:[function(t,e){"use strict";cc._RF.push(e,"1a39a6kTNdPcouNY5TF0jkI","hero");var n=t("PoolManager"),a=[140,300,60,360];cc.Class({extends:t("baseMan"),properties:{target:{default:null,type:dragonBones.ArmatureDisplay}},onLoad:function(){this.speed=1.5+.6*Math.random(),this.isDead=!1},onEnable:function(){this._super()},onDisable:function(){this._super(),this.node.opacity=255,this.node.stopAllActions(),this.target&&(this.target.off(dragonBones.EventObject.FRAME_EVENT,this.playOver,this),this.target.off(dragonBones.EventObject.FRAME_EVENT,this.dieOver,this))},updateIcon:function(t,e){var n=this;if(this.target){var a=Config.skin[t-1];Utils.getOrLoadDBSk(a.icon,function(t){n.target.dragonAsset=t,Utils.getOrLoadDBSkTex(a.icon,function(t){n.target.dragonAtlasAsset=t,n.target.armatureName="Armature",n.playAnim("walk",-1),n.upAni(n.level),Utils.invokeCallback(e)})})}else Utils.invokeCallback(e)},upAni:function(t,e){if(t=Math.floor((t-1)/5)+1,t=Math.max(Math.min(t,5),1),this.target&&this.target.node&&cc.isValid(this.target.node)){var n=this.target.armature();if(n){var a=n.getSlot("weapon");dragonBones.CCFactory.getInstance().replaceSlotDisplay(this.target.getArmatureKey(),"Armature","weapon","weapon"+t,a),Utils.invokeCallback(e)}else Utils.invokeCallback(e)}else Utils.invokeCallback(e)},playAnim:function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.target.animationName!=t&&(this.isDead||(this.target.animationName=t,this.target.timeScale=n,"atk"==t?(console.log("timeScale",n),this.target.off(dragonBones.EventObject.FRAME_EVENT,this.playOver,this),this.target.on(dragonBones.EventObject.FRAME_EVENT,this.playOver,this)):"die"==t&&(this.target.timeScale=2,this.target.off(dragonBones.EventObject.FRAME_EVENT,this.dieOver,this),this.target.on(dragonBones.EventObject.FRAME_EVENT,this.dieOver,this),cc.find("selfCol",this.node).getComponent(cc.Collider).enabled=!1),this.target.playAnimation(t,e)))},playOver:function(t){"over"==t.name?this.playAnim("stand"):"atk_done"==t.name&&this.playAtkEff()},dieOver:function(t){"over"==t.name&&(n.pushPoolNodeByName("hero",this.node),this.attackTargetRole=null)},bezier:function(t,e,n,a,i){var o=1-i;return o*(o*(t+(3*e-t)*i)+3*n*i*i)+a*i*i*i},attack_1:function(t){Global.audioCtrl.playXiuClip();var e=new cc.Node;e.parent=cc.director.getScene(),e.scale=.8*this.off_scale,e.anchorY=0,e.position=e.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)).add(cc.v2(0,50));var n,a,i,o,s,r,c,l,d=this.attackTargetRole.node,u=d.convertToWorldSpaceAR(cc.Vec2.ZERO).add(cc.v2(0,d.height*d.scaleY*2/3)),h=e.parent.convertToNodeSpaceAR(u),f=cc.v2(2*h.x/3+e.x/3,h.y+(h.y-e.y)/30+30),p=this,m=!0;cc.tween(e).then((.5,n=f,a=f,i=h,s=n.x,r=n.y,c=a.x,l=a.y,(o=o||Object.create(null)).progress=function(t,n,a,i){m&&0!=i&&(e.addComponent(cc.Sprite).spriteFrame=p.mgr.gjSf,m=!1);var o=cc.v2(a.x,a.y);return a.x=p.bezier(t.x,s,c,n.x,i),a.y=p.bezier(t.y,r,l,n.y,i),0!=i&&(e.angle=cc.v2(0,-1).signAngle(a.sub(o))/Math.PI*180),a},cc.tween().to(.5,{position:i},o))).call(function(){e.destroy(),t&&t()}).start()},attack_3:function(t){Global.audioCtrl.playJitaClip();var e=n.getPoolNodeByName("lightAPre",this.node.parent);e.position=e.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)).add(cc.v2(0,50));var a=e.parent.convertToNodeSpaceAR(this.attackTargetRole.node.convertToWorldSpaceAR(cc.Vec2.ZERO)).add(cc.v2(0,50));cc.tween(e).to(.5,{position:a}).call(function(){e.destroy(),t&&t()}).start()},playAtkEff:function(){var t=this;if(console.log("playAtkEff"),this.attackTargetRole){var e=this.attackTargetRole,n={_attack:this._attack,_crit:this._crit,_crit_num:this._crit_num},a=function(){t.atkOver(e,n)};switch(this.s_type){case 0:a(),Global.audioCtrl.playAttack1Clip();break;case 1:this.attack_1(function(){a()});break;case 2:a(),Global.audioCtrl.playAttackClip();break;case 3:this.attack_3(function(){a()});break;case 4:a()}}},updateInfo:function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=1),this._super(),this.mgr=t,this.type=n;var o=e.cfg.type;this.state=0,this.attackTargetRole=null,this.level=e.level,this.s_type=o-1;var s=this.node.getComponent(cc.Collider);s.size=new cc.Size(a[this.s_type],1200),0==n?(s.tag=0,this.node.getChildByName("selfCol").getComponent(cc.Collider).tag=0,this.node.scaleX=1*i,this.moveDir=1):(s.tag=1,this.node.getChildByName("selfCol").getComponent(cc.Collider).tag=1,this.node.scaleX=-1*i,this.moveDir=-1),this.node.scaleY=1*i,this.off_scale=i,this.node.zIndex=1e4-Math.floor(this.node.y),this.atkDist=50,this._atkSpeed=Number(e.attr.atk_speed),this.attackCDTime=1e4/this._atkSpeed,this._attack=Number(e.attr.atk),this._defense=Number(e.attr.defense),this._crit=Number(e.attr.crit),this._crit_num=Number(e.attr.crit_num),this.blood=Number(e.attr.hp),this.initBlood=this.blood,this.updateIcon(e.skinId),this.buffList={},cc.find("selfCol",this.node).getComponent(cc.Collider).enabled=!0},addBuff:function(t){var e=this,n=1<<this.s_type;if(t.e_id&n){var a=function(t){var n=e.buffList[t.att_type]||0;return e.buffList[t.att_type]=n+Number(t.value),{o:n,n:e.buffList[t.att_type]}}(t);if(console.log("after",this.blood,a,this._attack,"****",this._atkSpeed,this.attackCDTime),"p_atk"==t.att_type)this._attack=this._attack/(a.o+100)*(a.n+100);else if("p_hp"==t.att_type){var i=this.initBlood;this.initBlood=this.initBlood/(a.o+100)*(a.n+100),this.blood+=this.initBlood-i,this.hpBar.progress=this.blood/this.initBlood}else"p_defense"==t.att_type?this._defense=this._defense/(a.o+100)*(a.n+100):"crit"==t.att_type?this._crit=this._crit/(a.o+100)*(a.n+100):"p_atkSpeed"==t.att_type&&(this._atkSpeed=this._atkSpeed/(a.o+100)*(a.n+100),this.attackCDTime=1e4/this._atkSpeed);console.log("before",this.blood,a,this._attack,"****",this._atkSpeed,this.attackCDTime)}},getPower:function(){var t=(this._attack-this._defense)*this._atkSpeed/10*(this._crit*this._crit_num+100)/100,e=this.initBlood/10+this._defense;return Math.floor(t+e)},playAtkAnim:function(){this.playAnim("atk",1,Math.max(this._atkSpeed/10,1))},atkOver:function(t,e){if(cc.isValid(t)){var n=Math.max(e._attack-t.getDefense(),1),a=!1;100*Math.random()<e._crit&&(n*=e._crit_num,a=!0),t.decHp(n,a)&&t.onDie()}},onDie:function(){this.isDead||(this.playAnim("die"),this.attackRoleList=[],this.mgr.removeRole(this),this.isDead=!0)},move:function(t){if(this.mgr&&this.mgr.gameState==MyEnum.GameState.Battle&&!this.attackTargetRole){this.waitTime=0;var e=60*this.speed*t*this.moveDir;this.node.x+=e,this.playAnim("walk")}}}),cc._RF.pop()},{PoolManager:"PoolManager",baseMan:"baseMan"}],load:[function(t,e){"use strict";cc._RF.push(e,"254d9++RZ9CSL4W0HTMtEGf","load"),cc.Class({extends:cc.Component,properties:{cutScenesN:cc.Node,progressBar:cc.ProgressBar},start:function(){var t=this;this.customAd=platformAdapter.changeCustomMoreAdState(!0,function(){}),this.progressBar.progress=0,this.p=0;var e=platformAdapter.getLocationData(MyEnum.StorageKey.NotIsFirst);platformAdapter.saveLocationData(MyEnum.StorageKey.NotIsFirst,!0);var n=(new Date).getTime();platformAdapter.interstTime||(platformAdapter.interstTime=n);var a=!e&&1==playerInfo.MissionID&&!DebugConfig.isDebug(),i=new GroupWait(function(){t.customAd&&t.customAd.destroy(),platformAdapter.aldSendEvent("loadSuc",{desc:"\u6d41\u7a0b_\u52a0\u8f7d\u5b8c\u6210",1:1}),a?(Global.gameType=MyEnum.GameType.Normal,t.p=100,cc.director.loadScene("game")):(t.p=100,cc.director.loadScene("main"))},0);platformAdapter.aldSendEvent("loading",{desc:"\u6d41\u7a0b_\u8fdb\u5165\u52a0\u8f7d\u754c\u9762",1:1});var o=platformAdapter.getCurDateStoreDate("join_times")||1;platformAdapter.aldSendEvent("loadTime",{desc:"\u5f53\u65e5\u7b2c"+o+"\u6b21\u8fdb\u5165\u6e38\u620f",1:1}),platformAdapter.setCurDateStoreDate("join_times",o+1),i.wait(),this.loadAllSubPackage(function(){i.done()}),i.wait(),Utils.initData(function(){Utils.loadBundle("main_a",function(t,e){i.wait(),e.load("audio/audioCtrl",cc.Prefab,function(t,e){cc.instantiate(e).parent=cc.director.getScene(),console.log(" add.audioCtrl========="),i.done()}),a&&(i.wait(),Utils.loadBundle("game",function(){cc.director.preloadScene("game",function(){i.done()})})),i.done()})},this.cutScenesN)},onDestroy:function(){},loadAllSubPackage:function(t){var e=this,n=["DB"];this.updateProgress();var a=0;this.subPackage=0;var i=setInterval(function(){e.subPackage>=99||(e.subPackage+=5,e.subPackage>=99&&(e.subPackage=99),e.updateProgress())},20);for(var o in n){var s=n[o];this.loadSubpackage(s,function(){++a==n.length?(clearInterval(i),t&&t()):e.updateProgress()},2)}},loadSubpackage:function(t,e,n){var a=this;console.log("loadSubpackage start",t),cc.assetManager.loadBundle(t,function(i){console.log("loadSubpackage end",t),i?n>0&&a.loadSubpackage(t,e,n-1):e&&e()})},updateProgress:function(){},update:function(){this.p+=.4*Math.random(),this.progressBar.progress=Math.min(this.p/100,1)}}),cc._RF.pop()},{}],platformAdapter:[function(t,e){"use strict";cc._RF.push(e,"1493eA3rmdE6byhGAwRLch6","platformAdapter");var n=new function(){var e=null;return window.tt?e=new(t("TTPlatform")):window.qq?e=new(t("QQPlatform")):window.wx?(e=new(t("WXPlatform")),null!=wx.getAccountInfoSync&&"function"==typeof wx.getAccountInfoSync||(wx.getAccountInfoSync=function(){return{miniProgram:{appId:"wx2c3aac7599509bc2"}}})):e=cc.sys.platform==cc.sys.ANDROID?new(t("ASPlatform")):new(t("CocosPlatform")),e};window.platformAdapter=n,n.init(),cc._RF.pop()},{ASPlatform:"ASPlatform",CocosPlatform:"CocosPlatform",QQPlatform:"QQPlatform",TTPlatform:"TTPlatform",WXPlatform:"WXPlatform"}],playerInfo:[function(t,e){"use strict";cc._RF.push(e,"049836/4CVFsoM+TDLyo+YW","playerInfo"),MyEnum.MaxPhysical;var n={assetInfo:{missionId:1,level:1,grade:1,eLevels:[1,1,1,1],gLevels:{},gold:0,diamond:0,tempReward:{},curSkin:[1,2,3,4],unlockSkins:[1,2,3,4],endlessLevel:1,gList:[]},kvInfo:{LDTimes:0},skinChips:{},fixedAttr:{},tempAttr:{},addTempAttr:function(t){if(t.e_id&&0!=Number(t.e_id))for(var e=[1,2,4,8],n=1;n<=e.length;++n)t.e_id&e[n-1]&&(this.tempAttr[n]=this.tempAttr[n]||{},this.tempAttr[n][t.att_type]=this.tempAttr[n][t.att_type]||0,this.tempAttr[n][t.att_type]+=Number(t.value));else this.tempAttr[t.att_type]=t.value;this.updateAdditive()},clearTempAttr:function(){this.tempAttr={},this.updateAdditive()},addFixedAttr:function(t,e,n){void 0===n&&(n=""),n&&(t=n+"__"+t),this.fixedAttr[t]=this.fixedAttr[t]?this.fixedAttr[t]+e:e,this.updateAdditive(),cc.director.emit(MyEnum.CustomEvent.SkinUpdate)},get Grade(){return this.assetInfo.grade||1},set Grade(t){this.assetInfo.grade=t},addSkinChip:function(t,e){var n,a;this.skinChips[t]||(this.skinChips[t]={c:0,n:null!=(n=null==(a=Config.skin[t-1])?void 0:a.need)?n:20}),this.skinChips[t].c+=e,this.skinChips[t].c>=this.skinChips[t].n&&(this.unlockSkin(t),Global.mainCtrl.openSkinDescPanel(Config.skin[t-1],function(){}))},getChipInfo:function(t){var e,n;return this.skinChips[t]||{c:0,n:null!=(e=null==(n=Config.skin[t-1])?void 0:n.need)?e:20}},skinIsUnlock:function(t){for(var e in this.UnlockSkins)if(t==this.UnlockSkins[e])return!0;return!1},unlockSkin:function(t){this.skinIsUnlock(t)||(platformAdapter.aldSendEvent("getSkin",{desc:"\u83b7\u5f97\u76ae\u80a4",id:t}),this.UnlockSkins.push(t),cc.director.emit(MyEnum.CustomEvent.UnlockSkin))},get UnlockSkins(){return this.assetInfo.unlockSkins||(this.assetInfo.unlockSkins=[1,2,3,4]),this.assetInfo.unlockSkins},get LockSkins(){var t={};for(var e in this.assetInfo.unlockSkins)t[this.assetInfo.unlockSkins[e]]=!0;var n=[];for(var a in Config.skin){var i=Config.skin[a];t[i.id]||n.push(i.id)}return n},get EndlessLevel(){return this.assetInfo.endlessLevel||1},endlessLevelUp:function(){this.assetInfo.endlessLevel=(this.assetInfo.endlessLevel||1)+1},getRandomLockSkinId:function(t){var e={};for(var n in this.assetInfo.unlockSkins)e[this.assetInfo.unlockSkins[n]]=!0;var a=[],i=0;for(var o in Config.skin){var s=Config.skin[o],r=Number(s.weight),c=Number(s.id);null!=t&&t!=Number(s.type)||e[c]||(a.push({id:c,weight:r}),i+=r)}var l=Math.random()*i;for(var d in a){var u=a[d];if((l-=u.weight)<0)return u.id}return null},getSkin:function(t){return this.CurSkin[t]},useSkin:function(t,e){this.CurSkin[t]=Number(e),this.updateAdditive(),cc.director.emit(MyEnum.CustomEvent.SkinUpdate)},get CurSkin(){return(!this.assetInfo.curSkin||this.assetInfo.curSkin.length<4)&&(this.assetInfo.curSkin=[1,2,3,4]),this.assetInfo.curSkin},get MissionID(){return this.assetInfo.missionId},set MissionID(t){this.assetInfo.missionId=Number(t)},get Level(){return this.assetInfo.level},set Level(t){this.assetInfo.level=Number(t)},get ELevels(){return this.assetInfo.eLevels},eLevelUp:function(t){return this.assetInfo.eLevels[t]++,this.assetInfo.eLevels[t]},getGLevel:function(t,e){return this.assetInfo.gLevels[t]&&this.assetInfo.gLevels[t][e]||0},addGLevel:function(t,e){this.assetInfo.gLevels[t]||(this.assetInfo.gLevels[t]=[]);var n=this.assetInfo.gLevels[t][e]||0;this.assetInfo.gLevels[t][e]=n+1,this.updateAllGeniusAttr()},unlockGenius:function(t){if(this.assetInfo.gList||(this.assetInfo.gList=[]),console.log("unlockGenius",this.assetInfo.gList.indexOf(t),t,this.assetInfo.gList),!(this.assetInfo.gList.indexOf(t)>=0))return this.assetInfo.gList.push(t),this.updateAllGeniusAttr(),cc.director.emit("bonusUpdate",{id:t}),!0},geniusIsUnlock:function(t){return this.getGeniusList().indexOf(t)>=0},getGeniusList:function(){return this.assetInfo.gList||[]},updateAllGeniusAttr:function(){var t={},e=this.getGeniusList(),n=[1,2,4,8];for(var a in e)for(var i=e[a],o=Config.genius[i],s=Number(o.value),r=1;r<=n.length;++r)o.e_id&n[r-1]&&(t[r]=t[r]||{},t[r][o.att_type]=t[r][o.att_type]||0,t[r][o.att_type]+=s);console.log("this.geniusAttrs",t),this.geniusAttrs=t,this.updateAdditive()},getGeniusAttr:function(){return this.geniusAttrs&&this.geniusAttrs[1]||{}},getMissionCoinRate:function(){var t=this.getGeniusAttr();return 1+(t.coin_mission?Number(t.coin_mission):0)/100},getLevelUpCoinRate:function(){var t=this.getGeniusAttr();return 1-(t.coin_level?Number(t.coin_level):0)/100},updateAdditive:function(){if(this.geniusAttrs){for(var t={},e=1;e<=4;++e){var n={},a=this.geniusAttrs[e];for(var i in a)n[i]?n[i]+=a[i]:n[i]=a[i];t[e]=n;var o=this.tempAttr[e];for(var s in o)n[s]?n[s]+=o[s]:n[s]=o[s]}for(var r=1;r<=4;++r){var c=this.CurSkin[r-1],l=MyEnum.SkinAttrs[c];if(l)for(var d in l){var u=l[d];if(u.pos)for(var h=1;h<=4;++h){var f=1<<h-1;console.log(f,u.pos,f&u.pos,"pos  pos",h,t),f&u.pos&&(t[h][u.key]=t[h][u.key]?t[h][u.key]+u.value:u.value)}else"object"==typeof u.value?t[u.key]=u.value:t[u.key]=t[u.key]?t[u.key]+u.value:u.value}}console.log("additiveAttrs",t),this.additiveAttrs=t}},getAdditive:function(t){return this.additiveAttrs[t]},getCoinRate:function(){return this.additiveAttrs.p_coin?this.additiveAttrs.p_coin/100+1:1},getAddLevel:function(t){var e=this.additiveAttrs["level_"+t];if(!e)return 0;var n=e[0],a=e[1];return 100*Math.random()<a?n:0},getRandomBoxRate:function(t){var e=this.additiveAttrs["box_"+t];return e?e/100+1:1},getExpendRate:function(t){var e=this.additiveAttrs["expend_"+t];return e?e/100+1:1},get Gold(){return this.assetInfo.gold},set Gold(t){this.assetInfo.gold=t,cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},get Diamond(){return this.assetInfo.diamond},set Diamond(t){this.assetInfo.diamond=t,cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},set TempReward(t){this.assetInfo.tempReward=t},get TempReward(){return this.assetInfo.tempReward},tempRewardToMore:function(t){for(var e in void 0===t&&(t=2),this.assetInfo.tempReward)this.assetInfo.tempReward[e].num*=t},clearTempReward:function(){for(var t in this.assetInfo.tempReward){var e=this.assetInfo.tempReward[t];this.addObject(e)}this.TempReward=[]},addObject:function(t,e){t.type==MyEnum.ObjectType.Coin?e?this.assetInfo.gold=this.Gold+t.num:this.Gold+=t.num:t.type==MyEnum.ObjectType.Diamond?e?this.assetInfo.diamond=this.Diamond+t.num:this.Diamond+=t.num:t.type==MyEnum.ObjectType.Chip&&this.addSkinChip(t.id,t.num)},haveChip:function(t){return this.getChipNum(t)>0},getChipNum:function(t){return this.ChipList[t]||0},subChip:function(t,e){var n=this.ChipList[t]||0;n=Math.max(n-e,0),this.ChipList[t]=n},getEEquipByPos:function(t,e){return this.getEEquips(t)[e]},physicalData:{value:MyEnum.physicalMax,lastTime:0,unchanged:!1,unchangedTime:0,guajiStartTime:0},get GuajiStartTime(){return this.physicalData.guajiStartTime},updateGuajiStartTime:function(){this.physicalData.guajiStartTime=+new Date},get Physical(){return this.physicalData.value},physicalIsUnchanged:function(){return this.physicalData.unchanged},expendPhysical:function(t){return!!this.physicalData.unchanged||!(this.physicalData.value<t)&&(this.physicalData.value==MyEnum.physicalMax&&(this.physicalData.lastTime=+new Date),this.physicalData.value-=t,cc.director.emit(MyEnum.CustomEvent.AssetUpdate),!0)},fullPhysical:function(){this.physicalData.value=MyEnum.physicalMax,cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},physicalUnchanged:function(t){this.physicalData.unchanged=!0,this.physicalData.unchangedTime=+new Date+t,cc.director.emit(MyEnum.CustomEvent.AssetUpdate)},getValueByKey:function(t){return this.kvInfo[t]},setValueByKey:function(t,e){this.kvInfo[t]=e,platformAdapter.saveLocationData(MyEnum.StorageKey.KVData,this.kvInfo)},getSoundState:function(){var t=this.getValueByKey("soundState");return null==t||t},setSoundState:function(t){return this.setValueByKey("soundState",t),t},getVibrateState:function(){var t=this.getValueByKey("vibrateState");return null==t||t},setVibrateState:function(t){return this.setValueByKey("vibrateState",t),t},getSignInfo:function(){return this.getValueByKey("sign")||{signTime:null,signDay:0}},getIsCanSign:function(){var t=this.getSignInfo();return!t.signTime||Utils.getDayNum()!=t.signTime},updataSignInfo:function(t){this.setValueByKey("sign",t)},getBattleMeetingData:function(){return this.getValueByKey("battleMeeting_data")||{}},setBattleMeetingData:function(t){this.setValueByKey("battleMeeting_data",t)},init:function(){if(DebugConfig.isClearData()){for(var t in MyEnum.StorageKey)platformAdapter.removeStorage(MyEnum.StorageKey[t]);platformAdapter.curDateData={}}var e=platformAdapter.getLocationData(MyEnum.StorageKey.AssetData);e&&(this.assetInfo=e);var n=platformAdapter.getLocationData(MyEnum.StorageKey.KVData);n&&(this.kvInfo=n);var a=platformAdapter.getLocationData(MyEnum.StorageKey.SkinChips);a&&(this.skinChips=a);var i=platformAdapter.getLocationData(MyEnum.StorageKey.FixedAttr);i&&(this.fixedAttr=i);var o=platformAdapter.getLocationData(MyEnum.StorageKey.PhysicalData);o&&(this.physicalData=o),DebugConfig.forceMission()>0&&(this.assetInfo.missionId=DebugConfig.forceMission()),DebugConfig.forceLevel()>0&&(this.assetInfo.level=DebugConfig.forceLevel()),this.updateAllGeniusAttr(),setInterval(this.update.bind(this),1e3),this.onlineData=platformAdapter.getCurDateStoreDate("onlineData")||{time:0,cur:0}},getOnlineData:function(){return this.onlineData},update:function(){var t=this.physicalData,e=+new Date;if(t.value<MyEnum.physicalMax){var n=Math.floor((e-t.lastTime)/1e3/MyEnum.physicalTime);n>0&&(t.value+=n,t.value>=MyEnum.physicalMax?t.value=MyEnum.physicalMax:t.lastTime+=1e3*n*MyEnum.physicalTime),cc.director.emit(MyEnum.CustomEvent.AssetUpdate)}this.physicalData.unchanged&&e>this.physicalData.unchangedTime&&(this.physicalData.unchanged=!1,cc.director.emit(MyEnum.CustomEvent.AssetUpdate)),0==this.physicalData.guajiStartTime&&(this.physicalData.guajiStartTime=e),this.onlineData.time++},setAllData:function(){platformAdapter.saveLocationData(MyEnum.StorageKey.AssetData,this.assetInfo),platformAdapter.saveLocationData(MyEnum.StorageKey.KVData,this.kvInfo),platformAdapter.saveLocationData(MyEnum.StorageKey.SkinChips,this.skinChips),platformAdapter.saveLocationData(MyEnum.StorageKey.FixedAttr,this.fixedAttr),platformAdapter.saveLocationData(MyEnum.StorageKey.PhysicalData,this.physicalData),platformAdapter.setCurDateStoreDate("onlineData",this.onlineData)}};window.playerInfo=n,cc._RF.pop()},{}],repeatAction:[function(t,e){"use strict";cc._RF.push(e,"cb5c1Gey8tA2LB3DFByybd3","repeatAction");var n=cc.Enum({scale1:3,rotation5:10});cc.Class({extends:cc.Component,properties:{type:{default:n.rotation1,type:n},speed:1,move:5},start:function(){switch(this.type){case n.scale1:var t=this.node.scale;this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.1,t+.1),cc.scaleTo(.1,t),cc.delayTime(.5))));break;case n.rotation5:this.node.runAction(cc.repeatForever(cc.sequence(cc.repeat(cc.sequence(cc.rotateTo(.05,20),cc.rotateTo(.1,-20),cc.rotateTo(.05,0)),2),cc.delayTime(1))))}}}),cc._RF.pop()},{}],xml:[function(t,e){"use strict";cc._RF.push(e,"8daf4OGW+ZHf4XGX+6cXJSx","xml"),e.exports=function(t){return t=(t=t.trim()).replace(/<!--[\s\S]*?-->/g,""),{declaration:e(),root:n()};function e(){if(o(/^<\?xml\s*/)){for(var t={attributes:{}};!s()&&!r("?>");){var e=i();if(!e)return t;t.attributes[e.name]=e.value}return o(/\?>\s*/),t}}function n(){var t=o(/^<([\w-:.]+)\s*/);if(t){for(var e,c={name:t[1],attributes:{},children:[]};!(s()||r(">")||r("?>")||r("/>"));){var l=i();if(!l)return c;c.attributes[l.name]=l.value}if(o(/^\s*\/>\s*/))return c;for(o(/\??>\s*/),c.content=a();e=n();)c.children.push(e);return o(/^<\/[\w-:.]+>\s*/),c}}function a(){var t=o(/^([^<]*)/);return t?t[1]:""}function i(){var t,e=o(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(e)return{name:e[1],value:(t=e[2],t.replace(/^['"]|['"]$/g,""))}}function o(e){var n=t.match(e);if(n)return t=t.slice(n[0].length),n}function s(){return 0==t.length}function r(e){return 0==t.indexOf(e)}},cc._RF.pop()},{}]},{},["baseMan","boss","AudioManager","BtnClicked","CustomPanel","DebugConfig","GroupWait","HintText","MyEnum","PoolManager","StringEx","Sync","Utils","asInfoManager","cn_string","ASPlatform","AdManager","BasePlatform","CocosPlatform","QQPlatform","TTPlatform","WXPlatform","WXRankView","platformAdapter","playerInfo","repeatAction","xml","hero","load"]);